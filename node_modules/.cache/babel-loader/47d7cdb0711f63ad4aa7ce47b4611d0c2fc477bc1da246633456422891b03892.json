{"ast":null,"code":"var _jsxFileName = \"D:\\\\Belezza\\\\restaurant-chain-app\\\\src\\\\pages\\\\UserFavorites.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { createClient } from '@supabase/supabase-js';\nconst supabaseUrl = 'https://lnquyopfvuikhjbjsiqk.supabase.co';\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';\nexport const supabase = createClient(supabaseUrl, supabaseKey);\nimport { Link } from 'react-router-dom';\nimport '../styles/UserPages.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserFavorites() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [favorites, setFavorites] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      try {\n        if (!user) return;\n\n        // Зареждане на любими ресторанти за потребителя\n        const {\n          data,\n          error\n        } = await supabase.from('favorites').select(`\n            *,\n            restaurants:restaurant_id(*)\n          `).eq('user_id', user.id);\n        if (error) throw error;\n        setFavorites(data);\n      } catch (error) {\n        console.error('Грешка при зареждане на любими ресторанти:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchFavorites();\n  }, [user]);\n  const removeFavorite = async id => {\n    try {\n      const {\n        error\n      } = await supabase.from('favorites').delete().eq('id', id);\n      if (error) throw error;\n\n      // Обновяване на списъка\n      setFavorites(favorites.filter(fav => fav.id !== id));\n    } catch (error) {\n      console.error('Грешка при премахване от любими:', error);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-favorites-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041C\\u043E\\u0438\\u0442\\u0435 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), favorites.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-favorites\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u044F\\u043C\\u0430\\u0442\\u0435 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"favorites-grid\",\n      children: favorites.map(favorite => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"favorite-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"favorite-image\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: favorite.restaurants.image_url || 'https://via.placeholder.com/300x200?text=Няма+изображение',\n            alt: favorite.restaurants.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"favorite-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: favorite.restaurants.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: favorite.restaurants.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"favorite-actions\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/restaurant/${favorite.restaurant_id}`,\n            className: \"view-restaurant-btn\",\n            children: \"\\u0412\\u0438\\u0436 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"remove-favorite-btn\",\n            onClick: () => removeFavorite(favorite.id),\n            children: \"\\u041F\\u0440\\u0435\\u043C\\u0430\\u0445\\u043D\\u0438 \\u043E\\u0442 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this)]\n      }, favorite.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(UserFavorites, \"aYpUBgEDm4+GDxCMOIQVGgS6XrA=\", false, function () {\n  return [useAuth];\n});\n_c = UserFavorites;\nexport default UserFavorites;\nvar _c;\n$RefreshReg$(_c, \"UserFavorites\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","createClient","supabaseUrl","supabaseKey","supabase","Link","jsxDEV","_jsxDEV","UserFavorites","_s","user","favorites","setFavorites","loading","setLoading","fetchFavorites","data","error","from","select","eq","id","console","removeFavorite","delete","filter","fav","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","favorite","src","restaurants","image_url","alt","name","address","to","restaurant_id","onClick","_c","$RefreshReg$"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/UserFavorites.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = 'https://lnquyopfvuikhjbjsiqk.supabase.co';\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\nimport { Link } from 'react-router-dom';\r\nimport '../styles/UserPages.css';\r\n\r\nfunction UserFavorites() {\r\n  const { user } = useAuth();\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchFavorites = async () => {\r\n      try {\r\n        if (!user) return;\r\n\r\n        // Зареждане на любими ресторанти за потребителя\r\n        const { data, error } = await supabase\r\n          .from('favorites')\r\n          .select(`\r\n            *,\r\n            restaurants:restaurant_id(*)\r\n          `)\r\n          .eq('user_id', user.id);\r\n\r\n        if (error) throw error;\r\n        setFavorites(data);\r\n      } catch (error) {\r\n        console.error('Грешка при зареждане на любими ресторанти:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchFavorites();\r\n  }, [user]);\r\n\r\n  const removeFavorite = async (id) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('favorites')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n      if (error) throw error;\r\n\r\n      // Обновяване на списъка\r\n      setFavorites(favorites.filter(fav => fav.id !== id));\r\n    } catch (error) {\r\n      console.error('Грешка при премахване от любими:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Зареждане на любими ресторанти...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-favorites-container\">\r\n      <h1>Моите любими ресторанти</h1>\r\n      \r\n      {favorites.length === 0 ? (\r\n        <div className=\"no-favorites\">\r\n          <p>Нямате добавени любими ресторанти.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"favorites-grid\">\r\n          {favorites.map(favorite => (\r\n            <div key={favorite.id} className=\"favorite-card\">\r\n              <div className=\"favorite-image\">\r\n                <img \r\n                  src={favorite.restaurants.image_url || 'https://via.placeholder.com/300x200?text=Няма+изображение'} \r\n                  alt={favorite.restaurants.name} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"favorite-info\">\r\n                <h3>{favorite.restaurants.name}</h3>\r\n                <p>{favorite.restaurants.address}</p>\r\n              </div>\r\n              \r\n              <div className=\"favorite-actions\">\r\n                <Link to={`/restaurant/${favorite.restaurant_id}`} className=\"view-restaurant-btn\">\r\n                  Виж ресторанта\r\n                </Link>\r\n                \r\n                <button \r\n                  className=\"remove-favorite-btn\"\r\n                  onClick={() => removeFavorite(favorite.id)}\r\n                >\r\n                  Премахни от любими\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserFavorites;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}