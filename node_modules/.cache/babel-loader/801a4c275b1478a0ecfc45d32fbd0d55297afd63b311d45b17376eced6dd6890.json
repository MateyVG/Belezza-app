{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{createClient}from'@supabase/supabase-js';import'./Reservation.css';// Използвайте същите настройки за Supabase\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabaseUrl='https://lnquyopfvuikhjbjsiqk.supabase.co';const supabaseKey='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';const supabase=createClient(supabaseUrl,supabaseKey);function Reservation(){const{id}=useParams();// Взима ID на ресторанта от URL\nconst navigate=useNavigate();// Състояния за стъпките на резервацията\nconst[step,setStep]=useState(1);// Състояния за данните на резервацията\nconst[restaurant,setRestaurant]=useState(null);const[date,setDate]=useState('');const[time,setTime]=useState('');const[guests,setGuests]=useState(2);const[tables,setTables]=useState([]);const[selectedTable,setSelectedTable]=useState(null);const[name,setName]=useState('');const[phone,setPhone]=useState('');const[email,setEmail]=useState('');// Състояния за зареждане и грешки\nconst[loading,setLoading]=useState(true);const[submitting,setSubmitting]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(false);// Зареждане на данни за ресторанта\nuseEffect(()=>{async function fetchRestaurant(){try{const{data,error}=await supabase.from('restaurants').select('*').eq('id',id).single();if(error)throw error;setRestaurant(data);}catch(error){console.error(\"Грешка при зареждане на ресторанта:\",error);setError(\"Не можахме да заредим информация за ресторанта\");}finally{setLoading(false);}}fetchRestaurant();},[id]);// Зареждане на свободни маси при избор на дата и час\nuseEffect(()=>{if(date&&time&&step===2){async function fetchAvailableTables(){try{setLoading(true);// Извличане на всички маси за този ресторант с подходящ капацитет\nconst{data:allTables,error:tablesError}=await supabase.from('tables').select('*').eq('restaurant_id',id).gte('capacity',guests);if(tablesError)throw tablesError;// Извличане на резервирани маси за избраната дата и час\nconst{data:reservations,error:reservationsError}=await supabase.from('reservations').select('table_id').eq('restaurant_id',id).eq('date',date).eq('time',time).in('status',['confirmed','pending']);if(reservationsError)throw reservationsError;// Филтриране на свободните маси\nconst reservedTableIds=reservations.map(r=>r.table_id);const availableTables=allTables.filter(table=>!reservedTableIds.includes(table.id));setTables(availableTables);}catch(error){console.error(\"Грешка при зареждане на масите:\",error);setError(\"Не можахме да заредим свободните маси\");}finally{setLoading(false);}}fetchAvailableTables();}},[id,date,time,guests,step]);// Преминаване към следваща стъпка\nconst nextStep=()=>{setStep(step+1);};// Връщане към предишна стъпка\nconst prevStep=()=>{setStep(step-1);};// Избор на маса\nconst handleTableSelect=table=>{setSelectedTable(table);};// Изпращане на резервацията\nconst handleSubmit=async e=>{e.preventDefault();if(!selectedTable){setError(\"Моля, изберете маса\");return;}try{setSubmitting(true);const{error}=await supabase.from('reservations').insert([{restaurant_id:id,table_id:selectedTable.id,date,time,name,phone,email,guests_count:guests,status:'confirmed'}]);if(error)throw error;setSuccess(true);// След успешна резервация, връщаме към детайлната страница след 3 секунди\nsetTimeout(()=>{navigate(`/restaurant/${id}`);},3000);}catch(error){console.error(\"Грешка при създаване на резервация:\",error);setError(\"Не успяхме да създадем резервацията. Моля, опитайте отново.\");}finally{setSubmitting(false);}};if(loading&&!restaurant){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435...\"});}if(error&&!restaurant){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"reservation-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F \\u0437\\u0430 \",restaurant===null||restaurant===void 0?void 0:restaurant.name]}),success?/*#__PURE__*/_jsxs(\"div\",{className:\"success-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0435 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u0430!\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0411\\u043B\\u0430\\u0433\\u043E\\u0434\\u0430\\u0440\\u0438\\u043C \\u0432\\u0438 \\u0437\\u0430 \\u0432\\u0430\\u0448\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F. \\u041E\\u0447\\u0430\\u043A\\u0432\\u0430\\u043C\\u0435 \\u0432\\u0438 \\u043D\\u0430 \",date,\" \\u0432 \",time,\".\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0429\\u0435 \\u0431\\u044A\\u0434\\u0435\\u0442\\u0435 \\u043F\\u0440\\u0435\\u043D\\u0430\\u0441\\u043E\\u0447\\u0435\\u043D\\u0438 \\u043A\\u044A\\u043C \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430\\u0442\\u0430 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0430...\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"reservation-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"steps-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:`step ${step>=1?'active':''}`,children:\"1. \\u0414\\u0430\\u0442\\u0430 \\u0438 \\u0447\\u0430\\u0441\"}),/*#__PURE__*/_jsx(\"div\",{className:`step ${step>=2?'active':''}`,children:\"2. \\u0418\\u0437\\u0431\\u043E\\u0440 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:`step ${step>=3?'active':''}`,children:\"3. \\u0412\\u0430\\u0448\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u0438\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),step===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0430, \\u0447\\u0430\\u0441 \\u0438 \\u0431\\u0440\\u043E\\u0439 \\u0433\\u043E\\u0441\\u0442\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",children:\"\\u0414\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"date\",value:date,onChange:e=>setDate(e.target.value),min:new Date().toISOString().split('T')[0],required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"time\",children:\"\\u0427\\u0430\\u0441\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"time\",value:time,onChange:e=>setTime(e.target.value),required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u0447\\u0430\\u0441\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12:00\",children:\"12:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12:30\",children:\"12:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"13:00\",children:\"13:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"13:30\",children:\"13:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"14:00\",children:\"14:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"14:30\",children:\"14:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"15:00\",children:\"15:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"15:30\",children:\"15:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"16:00\",children:\"16:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"16:30\",children:\"16:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"17:00\",children:\"17:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"17:30\",children:\"17:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"18:00\",children:\"18:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"18:30\",children:\"18:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"19:00\",children:\"19:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"19:30\",children:\"19:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20:00\",children:\"20:00\"}),/*#__PURE__*/_jsx(\"option\",{value:\"20:30\",children:\"20:30\"}),/*#__PURE__*/_jsx(\"option\",{value:\"21:00\",children:\"21:00\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"guests\",children:\"\\u0411\\u0440\\u043E\\u0439 \\u0433\\u043E\\u0441\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"select\",{id:\"guests\",value:guests,onChange:e=>setGuests(parseInt(e.target.value)),required:true,children:[...Array(8)].map((_,i)=>/*#__PURE__*/_jsxs(\"option\",{value:i+1,children:[i+1,\" \",i===0?'гост':'гости']},i+1))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button secondary\",onClick:()=>navigate(`/restaurant/${id}`),children:\"\\u041E\\u0442\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button primary\",onClick:nextStep,disabled:!date||!time,children:\"\\u041F\\u0440\\u043E\\u0434\\u044A\\u043B\\u0436\\u0438\"})]})]}),step===2&&/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043C\\u0430\\u0441\\u0430\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u043D\\u0438 \\u043C\\u0430\\u0441\\u0438...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[tables.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-tables\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u044F\\u043C\\u0430 \\u0441\\u0432\\u043E\\u0431\\u043E\\u0434\\u043D\\u0438 \\u043C\\u0430\\u0441\\u0438 \\u0437\\u0430 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D\\u0430\\u0442\\u0430 \\u0434\\u0430\\u0442\\u0430 \\u0438 \\u0447\\u0430\\u0441.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041C\\u043E\\u043B\\u044F, \\u0438\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u0434\\u0440\\u0443\\u0433\\u0430 \\u0434\\u0430\\u0442\\u0430 \\u0438\\u043B\\u0438 \\u0447\\u0430\\u0441.\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"tables-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-layout\",children:tables.map(table=>/*#__PURE__*/_jsxs(\"div\",{className:`table ${(selectedTable===null||selectedTable===void 0?void 0:selectedTable.id)===table.id?'selected':''}`,style:{top:`${table.position_y}px`,left:`${table.position_x}px`,width:`${table.capacity>2?80:60}px`,height:`${table.capacity>2?80:60}px`},onClick:()=>handleTableSelect(table),children:[/*#__PURE__*/_jsx(\"span\",{className:\"table-number\",children:table.table_number}),/*#__PURE__*/_jsxs(\"span\",{className:\"table-capacity\",children:[table.capacity,\" \\u043C\\u0435\\u0441\\u0442\\u0430\"]})]},table.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-legend\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color available\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0421\\u0432\\u043E\\u0431\\u043E\\u0434\\u043D\\u0430 \\u043C\\u0430\\u0441\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"legend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"legend-color selected\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D\\u0430 \\u043C\\u0430\\u0441\\u0430\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button secondary\",onClick:prevStep,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button primary\",onClick:nextStep,disabled:!selectedTable,children:\"\\u041F\\u0440\\u043E\\u0434\\u044A\\u043B\\u0436\\u0438\"})]})]})]}),step===3&&/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u0430\\u0448\\u0438\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u0438\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u0418\\u043C\\u0435 \\u0438 \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:name,onChange:e=>setName(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",id:\"phone\",value:phone,onChange:e=>setPhone(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u0418\\u043C\\u0435\\u0439\\u043B\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reservation-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0414\\u0435\\u0442\\u0430\\u0439\\u043B\\u0438 \\u043D\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F\\u0442\\u0430\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0420\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442:\"}),\" \",restaurant.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0414\\u0430\\u0442\\u0430:\"}),\" \",date]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0427\\u0430\\u0441:\"}),\" \",time]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0411\\u0440\\u043E\\u0439 \\u0433\\u043E\\u0441\\u0442\\u0438:\"}),\" \",guests]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041C\\u0430\\u0441\\u0430 \\u2116:\"}),\" \",selectedTable===null||selectedTable===void 0?void 0:selectedTable.table_number]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button secondary\",onClick:prevStep,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button primary\",disabled:submitting||!name||!phone||!email,children:submitting?'Изпращане...':'Завърши резервацията'})]})]})]})]})]});}export default Reservation;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","createClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabaseUrl","supabaseKey","supabase","Reservation","id","navigate","step","setStep","restaurant","setRestaurant","date","setDate","time","setTime","guests","setGuests","tables","setTables","selectedTable","setSelectedTable","name","setName","phone","setPhone","email","setEmail","loading","setLoading","submitting","setSubmitting","error","setError","success","setSuccess","fetchRestaurant","data","from","select","eq","single","console","fetchAvailableTables","allTables","tablesError","gte","reservations","reservationsError","in","reservedTableIds","map","r","table_id","availableTables","filter","table","includes","nextStep","prevStep","handleTableSelect","handleSubmit","e","preventDefault","insert","restaurant_id","guests_count","status","setTimeout","className","children","htmlFor","type","value","onChange","target","min","Date","toISOString","split","required","parseInt","Array","_","i","onClick","disabled","length","style","top","position_y","left","position_x","width","capacity","height","table_number","onSubmit"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/Reservation.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport './Reservation.css';\r\n\r\n// Използвайте същите настройки за Supabase\r\nconst supabaseUrl = 'https://lnquyopfvuikhjbjsiqk.supabase.co';\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nfunction Reservation() {\r\n  const { id } = useParams(); // Взима ID на ресторанта от URL\r\n  const navigate = useNavigate();\r\n  \r\n  // Състояния за стъпките на резервацията\r\n  const [step, setStep] = useState(1);\r\n  \r\n  // Състояния за данните на резервацията\r\n  const [restaurant, setRestaurant] = useState(null);\r\n  const [date, setDate] = useState('');\r\n  const [time, setTime] = useState('');\r\n  const [guests, setGuests] = useState(2);\r\n  const [tables, setTables] = useState([]);\r\n  const [selectedTable, setSelectedTable] = useState(null);\r\n  const [name, setName] = useState('');\r\n  const [phone, setPhone] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  \r\n  // Състояния за зареждане и грешки\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  // Зареждане на данни за ресторанта\r\n  useEffect(() => {\r\n    async function fetchRestaurant() {\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from('restaurants')\r\n          .select('*')\r\n          .eq('id', id)\r\n          .single();\r\n        \r\n        if (error) throw error;\r\n        \r\n        setRestaurant(data);\r\n      } catch (error) {\r\n        console.error(\"Грешка при зареждане на ресторанта:\", error);\r\n        setError(\"Не можахме да заредим информация за ресторанта\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    \r\n    fetchRestaurant();\r\n  }, [id]);\r\n\r\n  // Зареждане на свободни маси при избор на дата и час\r\n  useEffect(() => {\r\n    if (date && time && step === 2) {\r\n      async function fetchAvailableTables() {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Извличане на всички маси за този ресторант с подходящ капацитет\r\n          const { data: allTables, error: tablesError } = await supabase\r\n            .from('tables')\r\n            .select('*')\r\n            .eq('restaurant_id', id)\r\n            .gte('capacity', guests);\r\n          \r\n          if (tablesError) throw tablesError;\r\n          \r\n          // Извличане на резервирани маси за избраната дата и час\r\n          const { data: reservations, error: reservationsError } = await supabase\r\n            .from('reservations')\r\n            .select('table_id')\r\n            .eq('restaurant_id', id)\r\n            .eq('date', date)\r\n            .eq('time', time)\r\n            .in('status', ['confirmed', 'pending']);\r\n          \r\n          if (reservationsError) throw reservationsError;\r\n          \r\n          // Филтриране на свободните маси\r\n          const reservedTableIds = reservations.map(r => r.table_id);\r\n          const availableTables = allTables.filter(table => !reservedTableIds.includes(table.id));\r\n          \r\n          setTables(availableTables);\r\n        } catch (error) {\r\n          console.error(\"Грешка при зареждане на масите:\", error);\r\n          setError(\"Не можахме да заредим свободните маси\");\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n      \r\n      fetchAvailableTables();\r\n    }\r\n  }, [id, date, time, guests, step]);\r\n\r\n  // Преминаване към следваща стъпка\r\n  const nextStep = () => {\r\n    setStep(step + 1);\r\n  };\r\n\r\n  // Връщане към предишна стъпка\r\n  const prevStep = () => {\r\n    setStep(step - 1);\r\n  };\r\n\r\n  // Избор на маса\r\n  const handleTableSelect = (table) => {\r\n    setSelectedTable(table);\r\n  };\r\n\r\n  // Изпращане на резервацията\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedTable) {\r\n      setError(\"Моля, изберете маса\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSubmitting(true);\r\n      \r\n      const { error } = await supabase\r\n        .from('reservations')\r\n        .insert([\r\n          {\r\n            restaurant_id: id,\r\n            table_id: selectedTable.id,\r\n            date,\r\n            time,\r\n            name,\r\n            phone,\r\n            email,\r\n            guests_count: guests,\r\n            status: 'confirmed'\r\n          }\r\n        ]);\r\n      \r\n      if (error) throw error;\r\n      \r\n      setSuccess(true);\r\n      \r\n      // След успешна резервация, връщаме към детайлната страница след 3 секунди\r\n      setTimeout(() => {\r\n        navigate(`/restaurant/${id}`);\r\n      }, 3000);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Грешка при създаване на резервация:\", error);\r\n      setError(\"Не успяхме да създадем резервацията. Моля, опитайте отново.\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading && !restaurant) {\r\n    return <div className=\"loading\">Зареждане...</div>;\r\n  }\r\n\r\n  if (error && !restaurant) {\r\n    return <div className=\"error\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"reservation-container\">\r\n      <h1>Резервация за {restaurant?.name}</h1>\r\n      \r\n      {success ? (\r\n        <div className=\"success-message\">\r\n          <h2>Резервацията е успешна!</h2>\r\n          <p>Благодарим ви за вашата резервация. Очакваме ви на {date} в {time}.</p>\r\n          <p>Ще бъдете пренасочени към страницата на ресторанта...</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"reservation-form\">\r\n          <div className=\"steps-container\">\r\n            <div className={`step ${step >= 1 ? 'active' : ''}`}>1. Дата и час</div>\r\n            <div className={`step ${step >= 2 ? 'active' : ''}`}>2. Избор на маса</div>\r\n            <div className={`step ${step >= 3 ? 'active' : ''}`}>3. Вашите данни</div>\r\n          </div>\r\n          \r\n          {error && <div className=\"error-message\">{error}</div>}\r\n          \r\n          {step === 1 && (\r\n            <div className=\"step-content\">\r\n              <h2>Изберете дата, час и брой гости</h2>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"date\">Дата</label>\r\n                <input \r\n                  type=\"date\" \r\n                  id=\"date\"\r\n                  value={date}\r\n                  onChange={(e) => setDate(e.target.value)}\r\n                  min={new Date().toISOString().split('T')[0]}\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"time\">Час</label>\r\n                <select \r\n                  id=\"time\"\r\n                  value={time}\r\n                  onChange={(e) => setTime(e.target.value)}\r\n                  required\r\n                >\r\n                  <option value=\"\">Изберете час</option>\r\n                  <option value=\"12:00\">12:00</option>\r\n                  <option value=\"12:30\">12:30</option>\r\n                  <option value=\"13:00\">13:00</option>\r\n                  <option value=\"13:30\">13:30</option>\r\n                  <option value=\"14:00\">14:00</option>\r\n                  <option value=\"14:30\">14:30</option>\r\n                  <option value=\"15:00\">15:00</option>\r\n                  <option value=\"15:30\">15:30</option>\r\n                  <option value=\"16:00\">16:00</option>\r\n                  <option value=\"16:30\">16:30</option>\r\n                  <option value=\"17:00\">17:00</option>\r\n                  <option value=\"17:30\">17:30</option>\r\n                  <option value=\"18:00\">18:00</option>\r\n                  <option value=\"18:30\">18:30</option>\r\n                  <option value=\"19:00\">19:00</option>\r\n                  <option value=\"19:30\">19:30</option>\r\n                  <option value=\"20:00\">20:00</option>\r\n                  <option value=\"20:30\">20:30</option>\r\n                  <option value=\"21:00\">21:00</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"guests\">Брой гости</label>\r\n                <select \r\n                  id=\"guests\"\r\n                  value={guests}\r\n                  onChange={(e) => setGuests(parseInt(e.target.value))}\r\n                  required\r\n                >\r\n                  {[...Array(8)].map((_, i) => (\r\n                    <option key={i + 1} value={i + 1}>\r\n                      {i + 1} {i === 0 ? 'гост' : 'гости'}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-buttons\">\r\n                <button \r\n                  type=\"button\" \r\n                  className=\"button secondary\"\r\n                  onClick={() => navigate(`/restaurant/${id}`)}\r\n                >\r\n                  Отказ\r\n                </button>\r\n                <button \r\n                  type=\"button\" \r\n                  className=\"button primary\"\r\n                  onClick={nextStep}\r\n                  disabled={!date || !time}\r\n                >\r\n                  Продължи\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {step === 2 && (\r\n            <div className=\"step-content\">\r\n              <h2>Изберете маса</h2>\r\n              \r\n              {loading ? (\r\n                <div className=\"loading\">Зареждане на свободни маси...</div>\r\n              ) : (\r\n                <>\r\n                  {tables.length === 0 ? (\r\n                    <div className=\"no-tables\">\r\n                      <p>Няма свободни маси за избраната дата и час.</p>\r\n                      <p>Моля, изберете друга дата или час.</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"tables-container\">\r\n                      <div className=\"restaurant-layout\">\r\n                        {tables.map(table => (\r\n                          <div\r\n                            key={table.id}\r\n                            className={`table ${selectedTable?.id === table.id ? 'selected' : ''}`}\r\n                            style={{\r\n                              top: `${table.position_y}px`,\r\n                              left: `${table.position_x}px`,\r\n                              width: `${table.capacity > 2 ? 80 : 60}px`,\r\n                              height: `${table.capacity > 2 ? 80 : 60}px`,\r\n                            }}\r\n                            onClick={() => handleTableSelect(table)}\r\n                          >\r\n                            <span className=\"table-number\">{table.table_number}</span>\r\n                            <span className=\"table-capacity\">{table.capacity} места</span>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                      \r\n                      <div className=\"table-legend\">\r\n                        <div className=\"legend-item\">\r\n                          <div className=\"legend-color available\"></div>\r\n                          <span>Свободна маса</span>\r\n                        </div>\r\n                        <div className=\"legend-item\">\r\n                          <div className=\"legend-color selected\"></div>\r\n                          <span>Избрана маса</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"form-buttons\">\r\n                    <button \r\n                      type=\"button\" \r\n                      className=\"button secondary\"\r\n                      onClick={prevStep}\r\n                    >\r\n                      Назад\r\n                    </button>\r\n                    <button \r\n                      type=\"button\" \r\n                      className=\"button primary\"\r\n                      onClick={nextStep}\r\n                      disabled={!selectedTable}\r\n                    >\r\n                      Продължи\r\n                    </button>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n          \r\n          {step === 3 && (\r\n            <div className=\"step-content\">\r\n              <h2>Вашите данни</h2>\r\n              \r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"name\">Име и фамилия</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    id=\"name\"\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"phone\">Телефон</label>\r\n                  <input \r\n                    type=\"tel\" \r\n                    id=\"phone\"\r\n                    value={phone}\r\n                    onChange={(e) => setPhone(e.target.value)}\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label htmlFor=\"email\">Имейл</label>\r\n                  <input \r\n                    type=\"email\" \r\n                    id=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"reservation-summary\">\r\n                  <h3>Детайли на резервацията</h3>\r\n                  <p><strong>Ресторант:</strong> {restaurant.name}</p>\r\n                  <p><strong>Дата:</strong> {date}</p>\r\n                  <p><strong>Час:</strong> {time}</p>\r\n                  <p><strong>Брой гости:</strong> {guests}</p>\r\n                  <p><strong>Маса №:</strong> {selectedTable?.table_number}</p>\r\n                </div>\r\n                \r\n                <div className=\"form-buttons\">\r\n                  <button \r\n                    type=\"button\" \r\n                    className=\"button secondary\"\r\n                    onClick={prevStep}\r\n                  >\r\n                    Назад\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\" \r\n                    className=\"button primary\"\r\n                    disabled={submitting || !name || !phone || !email}\r\n                  >\r\n                    {submitting ? 'Изпращане...' : 'Завърши резервацията'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reservation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}