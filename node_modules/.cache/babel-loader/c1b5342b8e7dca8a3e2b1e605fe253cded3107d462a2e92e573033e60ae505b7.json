{"ast":null,"code":"var _jsxFileName = \"D:\\\\Belezza\\\\restaurant-chain-app\\\\src\\\\components\\\\ProtectedRoute.jsx\",\n  _s2 = $RefreshSig$();\nimport React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProtectedRoute({\n  children,\n  adminRequired = false\n}) {\n  _s2();\n  var _s = $RefreshSig$();\n  const {\n    user,\n    userRole\n  } = useAuth();\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 12\n    }, this);\n  }\n  if (adminRequired && (!userRole || userRole.role !== 'super_admin' && userRole.role !== 'restaurant_admin')) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Във вашия ProtectedRoute.jsx\n  function ProtectedRoute({\n    children,\n    adminRequired = false\n  }) {\n    _s();\n    const {\n      user,\n      userRole,\n      isSuperAdmin,\n      isRestaurantAdmin\n    } = useAuth();\n    const navigate = useNavigate();\n    console.log('ProtectedRoute - adminRequired:', adminRequired);\n    console.log('ProtectedRoute - user:', user);\n    console.log('ProtectedRoute - isSuperAdmin:', isSuperAdmin ? isSuperAdmin() : 'undefined');\n    console.log('ProtectedRoute - isRestaurantAdmin:', isRestaurantAdmin ? isRestaurantAdmin() : 'undefined');\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 12\n      }, this);\n    }\n    if (!user) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 12\n      }, this);\n    }\n    if (adminRequired) {\n      const isAdmin = isSuperAdmin && isSuperAdmin() || isRestaurantAdmin && isRestaurantAdmin();\n      console.log('ProtectedRoute - isAdmin:', isAdmin);\n      if (!isAdmin) {\n        return /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 14\n        }, this);\n      }\n    }\n    return children;\n  }\n  _s(ProtectedRoute, \"a5St4gBzqctw+BJQ/X1plrDoVTo=\", true, function () {\n    return [useAuth];\n  });\n}\n_s2(ProtectedRoute, \"G+lnKnJOyNcjs162Vhg+C9zc+ZA=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","adminRequired","_s2","_s","$RefreshSig$","user","userRole","to","fileName","_jsxFileName","lineNumber","columnNumber","role","isSuperAdmin","isRestaurantAdmin","navigate","useNavigate","console","log","loading","isAdmin","_c","$RefreshReg$"],"sources":["D:/Belezza/restaurant-chain-app/src/components/ProtectedRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nfunction ProtectedRoute({ children, adminRequired = false }) {\r\n  const { user, userRole } = useAuth();\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  if (adminRequired && (!userRole || (userRole.role !== 'super_admin' && userRole.role !== 'restaurant_admin'))) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  // Във вашия ProtectedRoute.jsx\r\n  function ProtectedRoute({ children, adminRequired = false }) {\r\n    const { user, userRole, isSuperAdmin, isRestaurantAdmin } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n  \r\n  console.log('ProtectedRoute - adminRequired:', adminRequired);\r\n  console.log('ProtectedRoute - user:', user);\r\n  console.log('ProtectedRoute - isSuperAdmin:', isSuperAdmin ? isSuperAdmin() : 'undefined');\r\n  console.log('ProtectedRoute - isRestaurantAdmin:', isRestaurantAdmin ? isRestaurantAdmin() : 'undefined');\r\n  \r\n  if (loading) {\r\n    return <div>Зареждане...</div>;\r\n  }\r\n  \r\n  if (!user) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n  \r\n  if (adminRequired) {\r\n    const isAdmin = (isSuperAdmin && isSuperAdmin()) || (isRestaurantAdmin && isRestaurantAdmin());\r\n    console.log('ProtectedRoute - isAdmin:', isAdmin);\r\n    \r\n    if (!isAdmin) {\r\n      return <Navigate to=\"/\" />;\r\n    }\r\n  }\r\n  \r\n  return children;\r\n}\r\n}\r\n\r\nexport default ProtectedRoute;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,OAAO,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,SAASC,cAAcA,CAAC;EAAEC,QAAQ;EAAEC,aAAa,GAAG;AAAM,CAAC,EAAE;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC3D,MAAM;IAAEC,IAAI;IAAEC;EAAS,CAAC,GAAGV,OAAO,CAAC,CAAC;EAEpC,IAAI,CAACS,IAAI,EAAE;IACT,oBAAOP,OAAA,CAACH,QAAQ;MAACY,EAAE,EAAC;IAAQ;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACjC;EAEA,IAAIV,aAAa,KAAK,CAACK,QAAQ,IAAKA,QAAQ,CAACM,IAAI,KAAK,aAAa,IAAIN,QAAQ,CAACM,IAAI,KAAK,kBAAmB,CAAC,EAAE;IAC7G,oBAAOd,OAAA,CAACH,QAAQ;MAACY,EAAE,EAAC;IAAG;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAC5B;;EAEA;EACA,SAASZ,cAAcA,CAAC;IAAEC,QAAQ;IAAEC,aAAa,GAAG;EAAM,CAAC,EAAE;IAAAE,EAAA;IAC3D,MAAM;MAAEE,IAAI;MAAEC,QAAQ;MAAEO,YAAY;MAAEC;IAAkB,CAAC,GAAGlB,OAAO,CAAC,CAAC;IACrE,MAAMmB,QAAQ,GAAGC,WAAW,CAAC,CAAC;IAGhCC,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEjB,aAAa,CAAC;IAC7DgB,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEb,IAAI,CAAC;IAC3CY,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEL,YAAY,GAAGA,YAAY,CAAC,CAAC,GAAG,WAAW,CAAC;IAC1FI,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEJ,iBAAiB,GAAGA,iBAAiB,CAAC,CAAC,GAAG,WAAW,CAAC;IAEzG,IAAIK,OAAO,EAAE;MACX,oBAAOrB,OAAA;QAAAE,QAAA,EAAK;MAAY;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAChC;IAEA,IAAI,CAACN,IAAI,EAAE;MACT,oBAAOP,OAAA,CAACH,QAAQ;QAACY,EAAE,EAAC;MAAQ;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACjC;IAEA,IAAIV,aAAa,EAAE;MACjB,MAAMmB,OAAO,GAAIP,YAAY,IAAIA,YAAY,CAAC,CAAC,IAAMC,iBAAiB,IAAIA,iBAAiB,CAAC,CAAE;MAC9FG,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEE,OAAO,CAAC;MAEjD,IAAI,CAACA,OAAO,EAAE;QACZ,oBAAOtB,OAAA,CAACH,QAAQ;UAACY,EAAE,EAAC;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAC5B;IACF;IAEA,OAAOX,QAAQ;EACjB;EAACG,EAAA,CA5BUJ,cAAc;IAAA,QACuCH,OAAO;EAAA;AA4BvE;AAACM,GAAA,CAzCQH,cAAc;EAAA,QACMH,OAAO;AAAA;AAAAyB,EAAA,GAD3BtB,cAAc;AA2CvB,eAAeA,cAAc;AAAC,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}