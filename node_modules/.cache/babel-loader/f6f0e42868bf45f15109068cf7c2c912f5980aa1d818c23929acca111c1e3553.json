{"ast":null,"code":"var _jsxFileName = \"D:\\\\Belezza\\\\restaurant-chain-app\\\\src\\\\pages\\\\AdminDashboard.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport '../styles/Admin.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const {\n    user,\n    userRole,\n    isSuperAdmin,\n    isRestaurantAdmin,\n    supabase,\n    signOut\n  } = useAuth();\n  const [section, setSection] = useState('dashboard');\n  const [restaurants, setRestaurants] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const {\n    section: urlSection,\n    restaurantId\n  } = useParams();\n\n  // Установяваме секцията от URL параметъра, ако е наличен\n  useEffect(() => {\n    if (urlSection) {\n      setSection(urlSection);\n    }\n  }, [urlSection]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        if (!user) {\n          navigate('/login');\n          return;\n        }\n\n        // Проверка дали потребителят има админ права\n        if (!isSuperAdmin() && !isRestaurantAdmin()) {\n          navigate('/');\n          return;\n        }\n\n        // Зареждане на ресторантите\n        let restaurantsQuery = supabase.from('restaurants').select('*');\n\n        // Ако е ресторантски админ, филтрираме само за неговия ресторант\n        if (isRestaurantAdmin()) {\n          restaurantsQuery = restaurantsQuery.eq('id', userRole.restaurant_id);\n        }\n        const {\n          data: restaurantsData,\n          error: restaurantsError\n        } = await restaurantsQuery;\n        if (restaurantsError) throw restaurantsError;\n        setRestaurants(restaurantsData);\n\n        // Избиране на ресторант от URL параметъра или по подразбиране\n        if (restaurantId) {\n          const restaurant = restaurantsData.find(r => r.id === restaurantId);\n          if (restaurant) {\n            setSelectedRestaurant(restaurant);\n          } else if (restaurantsData.length > 0) {\n            // Ако не намерим ресторанта от URL, избираме първия наличен\n            setSelectedRestaurant(restaurantsData[0]);\n          }\n        } else if (restaurantsData.length > 0) {\n          if (isRestaurantAdmin()) {\n            setSelectedRestaurant(restaurantsData[0]);\n          } else if (isSuperAdmin()) {\n            setSelectedRestaurant(restaurantsData[0]);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading admin data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [user, userRole, isSuperAdmin, isRestaurantAdmin, navigate, restaurantId, supabase]);\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/login');\n  };\n\n  // Функция за смяна на секцията и обновяване на URL\n  const changeSection = newSection => {\n    setSection(newSection);\n    if (selectedRestaurant) {\n      navigate(`/admin/restaurant/${selectedRestaurant.id}/${newSection}`);\n    } else {\n      navigate(`/admin/${newSection}`);\n    }\n  };\n\n  // Функция за смяна на избрания ресторант и обновяване на URL\n  const changeRestaurant = restaurantId => {\n    const selected = restaurants.find(r => r.id === restaurantId);\n    setSelectedRestaurant(selected);\n    navigate(`/admin/restaurant/${restaurantId}/${section}`);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-loading\",\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0441\\u043A\\u0438 \\u043F\\u0430\\u043D\\u0435\\u043B...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-sidebar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0410\\u0434\\u043C\\u0438\\u043D \\u043F\\u0430\\u043D\\u0435\\u043B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: isSuperAdmin() ? 'Главен администратор' : 'Ресторантски администратор'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), isSuperAdmin() && restaurants.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"restaurant-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: (selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.id) || '',\n            onChange: e => changeRestaurant(e.target.value),\n            children: restaurants.map(restaurant => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: restaurant.id,\n              children: restaurant.name\n            }, restaurant.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"admin-menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'dashboard' ? 'active' : '',\n          onClick: () => changeSection('dashboard'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-tachometer-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), \" \\u0422\\u0430\\u0431\\u043B\\u043E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'reservations' ? 'active' : '',\n          onClick: () => changeSection('reservations'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-calendar-check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), \" \\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'menu' ? 'active' : '',\n          onClick: () => changeSection('menu'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-utensils\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), \" \\u041C\\u0435\\u043D\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'events' ? 'active' : '',\n          onClick: () => changeSection('events'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-calendar-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), \" \\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'special_offers' ? 'active' : '',\n          onClick: () => changeSection('special_offers'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-percentage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), \" \\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'tables' ? 'active' : '',\n          onClick: () => changeSection('tables'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-chair\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), \" \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0438\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'gallery' ? 'active' : '',\n          onClick: () => changeSection('gallery'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), \" \\u0413\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), isSuperAdmin() && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: section === 'restaurants' ? 'active' : '',\n            onClick: () => changeSection('restaurants'),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), \" \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: section === 'admins' ? 'active' : '',\n            onClick: () => changeSection('admins'),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-users-cog\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), \" \\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: section === 'reports' ? 'active' : '',\n            onClick: () => changeSection('reports'),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-chart-bar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this), \" \\u041E\\u0442\\u0447\\u0435\\u0442\\u0438 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: handleSignOut,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-sign-out-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), \" \\u0418\\u0437\\u0445\\u043E\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-content\",\n      children: [section === 'dashboard' && /*#__PURE__*/_jsxDEV(AdminDashboardSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this), section === 'reservations' && /*#__PURE__*/_jsxDEV(AdminReservationsSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this), section === 'menu' && /*#__PURE__*/_jsxDEV(AdminMenuSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), section === 'events' && /*#__PURE__*/_jsxDEV(AdminEventsSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), section === 'special_offers' && /*#__PURE__*/_jsxDEV(AdminSpecialOffersSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this), section === 'tables' && /*#__PURE__*/_jsxDEV(AdminTablesSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), section === 'gallery' && /*#__PURE__*/_jsxDEV(AdminGallerySection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), section === 'restaurants' && isSuperAdmin() && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this), section === 'admins' && isSuperAdmin() && /*#__PURE__*/_jsxDEV(AdminAdminsSection, {\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 3\n      }, this), section === 'reports' && isSuperAdmin() && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041E\\u0442\\u0447\\u0435\\u0442\\u0438 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u043E\\u0442\\u0447\\u0435\\u0442\\u0438 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n// В AdminDashboard.jsx след другите секционни компоненти (AdminGallerySection и т.н.) \n// и преди export default AdminDashboard\n_s(AdminDashboard, \"AY3gp1YQGE488XDH7JbLVmaIUUc=\", false, function () {\n  return [useAuth, useNavigate, useParams];\n});\n_c = AdminDashboard;\nfunction AdminAdminsSection({\n  supabase\n}) {\n  _s2();\n  const [admins, setAdmins] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    role: 'restaurant_admin',\n    restaurant_id: '',\n    name: '',\n    phone: ''\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [restaurants, setRestaurants] = useState([]);\n  useEffect(() => {\n    fetchData();\n  }, [supabase]);\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n\n      // Зареждане на администратори\n      const {\n        data: adminRolesData,\n        error: adminRolesError\n      } = await supabase.from('user_roles').select(`\n          id,\n          user_id,\n          role,\n          restaurant_id,\n          restaurants:restaurant_id (id, name)\n        `).in('role', ['super_admin', 'restaurant_admin']);\n      if (adminRolesError) throw adminRolesError;\n\n      // Зареждане на потребителски данни за всеки администратор\n      const userIds = adminRolesData.map(admin => admin.user_id);\n      const {\n        data: usersData,\n        error: usersError\n      } = await supabase.from('users') // Или друга таблица, където съхранявате допълнителна информация за потребителите\n      .select('id, email, name, phone').in('id', userIds);\n      if (usersError) {\n        // Ако няма таблица users, използваме данните от auth.users\n        console.log('Грешка при зареждане от users, опитваме от auth.users');\n\n        // Комбиниране на данните без допълнителна информация\n        setAdmins(adminRolesData.map(admin => ({\n          ...admin,\n          email: 'Потребител ' + admin.user_id.substring(0, 8),\n          // Просто примерен заместител\n          name: '',\n          phone: ''\n        })));\n      } else {\n        // Комбиниране на данните от двете заявки\n        const combinedData = adminRolesData.map(admin => {\n          const userData = usersData.find(user => user.id === admin.user_id) || {};\n          return {\n            ...admin,\n            email: userData.email || '',\n            name: userData.name || '',\n            phone: userData.phone || ''\n          };\n        });\n        setAdmins(combinedData);\n      }\n\n      // Зареждане на всички ресторанти за формата\n      const {\n        data: restaurantsData,\n        error: restaurantsError\n      } = await supabase.from('restaurants').select('id, name');\n      if (restaurantsError) throw restaurantsError;\n      setRestaurants(restaurantsData || []);\n    } catch (error) {\n      console.error('Error fetching admin data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      email: '',\n      role: 'restaurant_admin',\n      restaurant_id: '',\n      name: '',\n      phone: ''\n    });\n    setEditingId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      if (editingId) {\n        // Редактиране на съществуващ администратор\n        const adminToUpdate = admins.find(admin => admin.id === editingId);\n        if (!adminToUpdate) throw new Error('Администраторът не е намерен');\n\n        // Обновяване на ролята и ресторанта в user_roles\n        const {\n          error: updateRoleError\n        } = await supabase.from('user_roles').update({\n          role: formData.role,\n          restaurant_id: formData.role === 'restaurant_admin' ? formData.restaurant_id : null\n        }).eq('id', editingId);\n        if (updateRoleError) throw updateRoleError;\n\n        // Обновяване на потребителската информация, ако има таблица users\n        try {\n          await supabase.from('users').update({\n            name: formData.name,\n            phone: formData.phone\n          }).eq('id', adminToUpdate.user_id);\n        } catch (userUpdateError) {\n          console.log('Не може да се обнови потребителската информация:', userUpdateError);\n        }\n\n        // Обновяване на локалния списък\n        setAdmins(admins.map(admin => {\n          if (admin.id === editingId) {\n            var _restaurants$find;\n            return {\n              ...admin,\n              role: formData.role,\n              restaurant_id: formData.role === 'restaurant_admin' ? formData.restaurant_id : null,\n              name: formData.name,\n              phone: formData.phone,\n              restaurants: formData.role === 'restaurant_admin' ? {\n                id: formData.restaurant_id,\n                name: (_restaurants$find = restaurants.find(r => r.id === formData.restaurant_id)) === null || _restaurants$find === void 0 ? void 0 : _restaurants$find.name\n              } : null\n            };\n          }\n          return admin;\n        }));\n      } else {\n        // Създаване на нов администратор (по-сложен процес, изисква създаване на потребител)\n        alert('Функционалността за добавяне на нови администратори е в процес на разработка. Моля, създайте потребител първо и след това задайте роля от таблицата.');\n        return;\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving admin:', error);\n      alert('Възникна грешка при запазване на администратора');\n    }\n  };\n  const handleEdit = admin => {\n    setFormData({\n      email: admin.email || '',\n      role: admin.role || 'restaurant_admin',\n      restaurant_id: admin.restaurant_id || '',\n      name: admin.name || '',\n      phone: admin.phone || ''\n    });\n    setEditingId(admin.id);\n    setShowForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да премахнете администраторските права на този потребител?\")) {\n      return;\n    }\n    try {\n      const adminToDelete = admins.find(admin => admin.id === id);\n      if (!adminToDelete) throw new Error('Администраторът не е намерен');\n\n      // Премахване на администраторската роля\n      const {\n        error\n      } = await supabase.from('user_roles').delete().eq('id', id);\n      if (error) throw error;\n\n      // Обновяване на локалния списък\n      setAdmins(admins.filter(admin => admin.id !== id));\n    } catch (error) {\n      console.error('Error deleting admin:', error);\n      alert('Възникна грешка при премахване на администратора');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Редактирай администратор'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на администратор' : 'Нов администратор'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u043C\\u0435\\u0439\\u043B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            value: formData.email,\n            onChange: handleInputChange,\n            required: true,\n            disabled: editingId // Не позволяваме промяна на имейла при редактиране\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 15\n          }, this), editingId && /*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"\\u0418\\u043C\\u0435\\u0439\\u043B\\u044A\\u0442 \\u043D\\u0435 \\u043C\\u043E\\u0436\\u0435 \\u0434\\u0430 \\u0431\\u044A\\u0434\\u0435 \\u043F\\u0440\\u043E\\u043C\\u0435\\u043D\\u0435\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u043C\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: formData.name,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            name: \"phone\",\n            value: formData.phone,\n            onChange: handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0420\\u043E\\u043B\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"role\",\n            value: formData.role,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"super_admin\",\n              children: \"\\u0413\\u043B\\u0430\\u0432\\u0435\\u043D \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"restaurant_admin\",\n              children: \"\\u0420\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0441\\u043A\\u0438 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this), formData.role === 'restaurant_admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0420\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"restaurant_id\",\n            value: formData.restaurant_id,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 19\n            }, this), restaurants.map(restaurant => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: restaurant.id,\n              children: restaurant.name\n            }, restaurant.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави администратор'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0421\\u043F\\u0438\\u0441\\u044A\\u043A \\u0441 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 9\n      }, this), admins.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u043D\\u0430\\u043C\\u0435\\u0440\\u0435\\u043D\\u0438 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0418\\u043C\\u0435\\u0439\\u043B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0418\\u043C\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0420\\u043E\\u043B\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0420\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 575,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: admins.map(admin => {\n            var _admin$restaurants;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: admin.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: admin.name || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: admin.phone || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `role-badge ${admin.role}`,\n                  children: admin.role === 'super_admin' ? 'Главен администратор' : 'Ресторантски администратор'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 590,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_admin$restaurants = admin.restaurants) === null || _admin$restaurants === void 0 ? void 0 : _admin$restaurants.name) || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn edit\",\n                  onClick: () => handleEdit(admin),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 597,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn delete\",\n                  onClick: () => handleDelete(admin.id),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 607,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 603,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 19\n              }, this)]\n            }, admin.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 470,\n    columnNumber: 5\n  }, this);\n}\n\n// Подсекция Табло\n_s2(AdminAdminsSection, \"T26M9Bn5zZM8ZpBsHsTeMyI952E=\");\n_c2 = AdminAdminsSection;\nfunction AdminDashboardSection({\n  restaurant,\n  supabase\n}) {\n  _s3();\n  const [stats, setStats] = useState({\n    reservationsToday: 0,\n    activeTables: 0,\n    totalTables: 0,\n    upcomingEvents: 0\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchStats = async () => {\n      try {\n        setLoading(true);\n\n        // Получаване на днешната дата във формат YYYY-MM-DD\n        const today = new Date().toISOString().split('T')[0];\n\n        // Заявка за резервации днес\n        const {\n          data: reservations,\n          error: reservationsError\n        } = await supabase.from('reservations').select('*').eq('restaurant_id', restaurant.id).eq('date', today).in('status', ['confirmed', 'pending']);\n        if (reservationsError) throw reservationsError;\n\n        // Заявка за всички маси в ресторанта\n        const {\n          data: tables,\n          error: tablesError\n        } = await supabase.from('tables').select('*').eq('restaurant_id', restaurant.id);\n        if (tablesError) throw tablesError;\n\n        // Заявка за предстоящи събития\n        const {\n          data: events,\n          error: eventsError\n        } = await supabase.from('events').select('*').eq('restaurant_id', restaurant.id).gte('date', today);\n        if (eventsError) throw eventsError;\n\n        // Изчисляване на заетите маси\n        const reservedTableIds = reservations.map(r => r.table_id);\n        const activeTables = new Set(reservedTableIds).size;\n        setStats({\n          reservationsToday: reservations.length,\n          activeTables,\n          totalTables: tables.length,\n          upcomingEvents: events ? events.length : 0\n        });\n      } catch (error) {\n        console.error('Error fetching dashboard stats:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStats();\n  }, [restaurant, supabase]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0422\\u0430\\u0431\\u043B\\u043E: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438 \\u0434\\u043D\\u0435\\u0441\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"stat\",\n          children: stats.reservationsToday\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0438 \\u043C\\u0430\\u0441\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 701,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"stat\",\n          children: [stats.activeTables, \"/\", stats.totalTables]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 700,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"stat\",\n          children: stats.upcomingEvents\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0411\\u044A\\u0440\\u0437\\u0438 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-buttons-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-action-btn\",\n          onClick: () => window.location.href = `/admin/restaurant/${restaurant === null || restaurant === void 0 ? void 0 : restaurant.id}/reservations`,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 13\n          }, this), \" \\u041D\\u043E\\u0432\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-action-btn\",\n          onClick: () => window.location.href = `/admin/restaurant/${restaurant === null || restaurant === void 0 ? void 0 : restaurant.id}/events`,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-calendar-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 13\n          }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u0435\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-action-btn\",\n          onClick: () => window.location.href = `/admin/restaurant/${restaurant === null || restaurant === void 0 ? void 0 : restaurant.id}/menu`,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-utensils\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 13\n          }, this), \" \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0435\\u043D\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 720,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 713,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-info-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u0437\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 9\n      }, this), restaurant ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"restaurant-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0418\\u043C\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 16\n          }, this), \" \", restaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 730,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0410\\u0434\\u0440\\u0435\\u0441:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 16\n          }, this), \" \", restaurant.address || 'Не е зададен']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 16\n          }, this), \" \", restaurant.phone || 'Не е зададен']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u043E \\u0432\\u0440\\u0435\\u043C\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 733,\n            columnNumber: 16\n          }, this), \" \", restaurant.hours || 'Не е зададено']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 13\n        }, this), restaurant.description && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 18\n          }, this), \" \", restaurant.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 729,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u044F\\u043C\\u0430 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 692,\n    columnNumber: 5\n  }, this);\n}\n// Подсекция Резервации\n_s3(AdminDashboardSection, \"oy+FYYMmf0UR568QjRGG7rVpfr4=\");\n_c3 = AdminDashboardSection;\nfunction AdminReservationsSection({\n  restaurant,\n  supabase\n}) {\n  _s4();\n  const [reservations, setReservations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('upcoming');\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    date: '',\n    time: '',\n    table_id: '',\n    name: '',\n    phone: '',\n    email: '',\n    guests_count: 2,\n    status: 'confirmed'\n  });\n  const [tables, setTables] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchReservations = async () => {\n      try {\n        setLoading(true);\n\n        // Получаване на днешната дата\n        const today = new Date().toISOString().split('T')[0];\n\n        // Съставяне на заявката според филтъра\n        let query = supabase.from('reservations').select(`\n              *,\n              tables:table_id (table_number, capacity)\n            `).eq('restaurant_id', restaurant.id);\n        if (filter === 'upcoming') {\n          query = query.gte('date', today);\n        } else if (filter === 'past') {\n          query = query.lt('date', today);\n        }\n\n        // Изпълнение на заявката\n        const {\n          data,\n          error\n        } = await query.order('date', {\n          ascending: true\n        });\n        if (error) throw error;\n        setReservations(data || []);\n\n        // Зареждане на масите за формата\n        const {\n          data: tablesData,\n          error: tablesError\n        } = await supabase.from('tables').select('*').eq('restaurant_id', restaurant.id);\n        if (tablesError) throw tablesError;\n        setTables(tablesData || []);\n      } catch (error) {\n        console.error('Error fetching reservations:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchReservations();\n  }, [restaurant, filter, supabase]);\n  const handleFilterChange = newFilter => {\n    setFilter(newFilter);\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      date: '',\n      time: '',\n      table_id: '',\n      name: '',\n      phone: '',\n      email: '',\n      guests_count: 2,\n      status: 'confirmed'\n    });\n    setEditingId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id\n      };\n      let result;\n\n      // Актуализиране на съществуваща резервация или създаване на нова\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('reservations').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък с резервации\n        setReservations(reservations.map(res => res.id === editingId ? {\n          ...res,\n          ...result\n        } : res));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('reservations').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне на новата резервация към локалния списък\n        setReservations([...reservations, result]);\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving reservation:', error);\n      alert('Възникна грешка при запазване на резервацията');\n    }\n  };\n  const handleEdit = reservation => {\n    // Зареждане на формата с данните от избраната резервация\n    setFormData({\n      date: reservation.date,\n      time: reservation.time,\n      table_id: reservation.table_id,\n      name: reservation.name,\n      phone: reservation.phone,\n      email: reservation.email,\n      guests_count: reservation.guests_count,\n      status: reservation.status\n    });\n    setEditingId(reservation.id);\n    setShowForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази резервация?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('reservations').delete().eq('id', id);\n      if (error) throw error;\n\n      // Премахване на изтритата резервация от локалния списък\n      setReservations(reservations.filter(res => res.id !== id));\n    } catch (error) {\n      console.error('Error deleting reservation:', error);\n      alert('Възникна грешка при изтриване на резервацията');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 926,\n      columnNumber: 14\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 931,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'upcoming' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('upcoming'),\n          children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 935,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'past' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('past'),\n          children: \"\\u041C\\u0438\\u043D\\u0430\\u043B\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'all' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('all'),\n          children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 934,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави резервация'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 955,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 933,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на резервация' : 'Нова резервация'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 968,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 971,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"date\",\n            value: formData.date,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 972,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 970,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0427\\u0430\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 982,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            name: \"time\",\n            value: formData.time,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 983,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041C\\u0430\\u0441\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 993,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"table_id\",\n            value: formData.table_id,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043C\\u0430\\u0441\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1000,\n              columnNumber: 19\n            }, this), tables.map(table => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: table.id,\n              children: [\"\\u041C\\u0430\\u0441\\u0430 \", table.table_number, \" (\", table.capacity, \" \\u043C\\u0435\\u0441\\u0442\\u0430)\"]\n            }, table.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1002,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 994,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 992,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u043C\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1010,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: formData.name,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1011,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1009,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1021,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            name: \"phone\",\n            value: formData.phone,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1022,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1020,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1032,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            value: formData.email,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1033,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1031,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0411\\u0440\\u043E\\u0439 \\u0433\\u043E\\u0441\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1043,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"guests_count\",\n            value: formData.guests_count,\n            onChange: handleInputChange,\n            min: \"1\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1044,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1042,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1055,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"status\",\n            value: formData.status,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"confirmed\",\n              children: \"\\u041F\\u043E\\u0442\\u0432\\u044A\\u0440\\u0434\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1062,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pending\",\n              children: \"\\u0427\\u0430\\u043A\\u0430\\u0449\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1063,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cancelled\",\n              children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1064,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1056,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1054,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1069,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави резервация'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1072,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1068,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 969,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 967,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: reservations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u043D\\u0430\\u043C\\u0435\\u0440\\u0435\\u043D\\u0438 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1083,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1082,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0430\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1089,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0427\\u0430\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1090,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041C\\u0430\\u0441\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1091,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1093,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0413\\u043E\\u0441\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1094,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1095,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1096,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1088,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1087,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: reservations.map(reservation => {\n            var _reservation$tables;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: `status-${reservation.status}`,\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.time\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1103,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_reservation$tables = reservation.tables) === null || _reservation$tables === void 0 ? void 0 : _reservation$tables.table_number) || 'Неизвестно'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1104,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1107,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1108,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.guests_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1109,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-badge ${reservation.status}`,\n                  children: reservation.status === 'confirmed' ? 'Потвърдена' : reservation.status === 'pending' ? 'Чакаща' : 'Отказана'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1111,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1110,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn edit\",\n                  onClick: () => handleEdit(reservation),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1121,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1117,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn delete\",\n                  onClick: () => handleDelete(reservation.id),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1127,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1123,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1116,\n                columnNumber: 21\n              }, this)]\n            }, reservation.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1101,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1099,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1086,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1080,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 930,\n    columnNumber: 7\n  }, this);\n}\n// Подсекция управление на маси\n_s4(AdminReservationsSection, \"3uyILGCRjE3cGvyHlsgOCXpejFQ=\");\n_c4 = AdminReservationsSection;\nfunction AdminTablesSection({\n  restaurant,\n  supabase\n}) {\n  _s5();\n  const [tables, setTables] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [editingId, setEditingId] = useState(null);\n  const [formData, setFormData] = useState({\n    table_number: '',\n    capacity: 2,\n    position_x: 50,\n    position_y: 50,\n    available: true,\n    notes: ''\n  });\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchTables = async () => {\n      try {\n        setLoading(true);\n        const {\n          data,\n          error\n        } = await supabase.from('tables').select('*').eq('restaurant_id', restaurant.id).order('table_number', {\n          ascending: true\n        });\n        if (error) throw error;\n        setTables(data || []);\n      } catch (error) {\n        console.error('Error fetching tables:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchTables();\n  }, [restaurant, supabase]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : type === 'number' ? parseInt(value, 10) : value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      table_number: '',\n      capacity: 2,\n      position_x: 50,\n      position_y: 50,\n      available: true,\n      notes: ''\n    });\n    setEditingId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id\n      };\n      let result;\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('tables').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n        setTables(tables.map(table => table.id === editingId ? {\n          ...table,\n          ...result\n        } : table));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('tables').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n        setTables([...tables, result]);\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving table:', error);\n      alert('Възникна грешка при запазване на масата');\n    }\n  };\n  const handleEdit = table => {\n    setFormData({\n      table_number: table.table_number,\n      capacity: table.capacity,\n      position_x: table.position_x,\n      position_y: table.position_y,\n      available: table.available,\n      notes: table.notes || ''\n    });\n    setEditingId(table.id);\n    setShowForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази маса?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('tables').delete().eq('id', id);\n      if (error) throw error;\n      setTables(tables.filter(table => table.id !== id));\n    } catch (error) {\n      console.error('Error deleting table:', error);\n      alert('Възникна грешка при изтриване на масата');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1279,\n      columnNumber: 14\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0438: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1284,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави нова маса'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1287,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1286,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на маса' : 'Нова маса'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1300,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1303,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"table_number\",\n            value: formData.table_number,\n            onChange: handleInputChange,\n            required: true,\n            min: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1304,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1302,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041A\\u0430\\u043F\\u0430\\u0446\\u0438\\u0442\\u0435\\u0442 (\\u0431\\u0440\\u043E\\u0439 \\u043C\\u0435\\u0441\\u0442\\u0430)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1315,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"capacity\",\n            value: formData.capacity,\n            onChange: handleInputChange,\n            required: true,\n            min: \"1\",\n            max: \"20\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1316,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1314,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F X (\\u0432 \\u043F\\u0438\\u043A\\u0441\\u0435\\u043B\\u0438)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1328,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            name: \"position_x\",\n            value: formData.position_x,\n            onChange: handleInputChange,\n            min: \"0\",\n            max: \"600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1329,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [formData.position_x, \"px\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1337,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1327,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041F\\u043E\\u0437\\u0438\\u0446\\u0438\\u044F Y (\\u0432 \\u043F\\u0438\\u043A\\u0441\\u0435\\u043B\\u0438)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1341,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            name: \"position_y\",\n            value: formData.position_y,\n            onChange: handleInputChange,\n            min: \"0\",\n            max: \"400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1342,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [formData.position_y, \"px\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1350,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1340,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"available\",\n              checked: formData.available,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1355,\n              columnNumber: 19\n            }, this), \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430 \\u043C\\u0430\\u0441\\u0430\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1354,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1353,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0411\\u0435\\u043B\\u0435\\u0436\\u043A\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1366,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"notes\",\n            value: formData.notes,\n            onChange: handleInputChange,\n            placeholder: \"\\u0414\\u043E\\u043F\\u044A\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u043D\\u0430 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u0437\\u0430 \\u043C\\u0430\\u0441\\u0430\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1367,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1365,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1376,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави маса'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1379,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1375,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1301,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1299,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"restaurant-layout-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0418\\u0437\\u0433\\u043B\\u0435\\u0434 \\u043D\\u0430 \\u043F\\u043E\\u0434\\u0440\\u0435\\u0434\\u0431\\u0430\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1388,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"restaurant-layout-preview\",\n        children: tables.map(table => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `table-preview ${table.available ? 'available' : 'unavailable'}`,\n          style: {\n            top: `${table.position_y}px`,\n            left: `${table.position_x}px`,\n            width: `${table.capacity > 2 ? 80 : 60}px`,\n            height: `${table.capacity > 2 ? 80 : 60}px`\n          },\n          onClick: () => handleEdit(table),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"table-number\",\n            children: table.table_number\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1402,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"table-capacity\",\n            children: [table.capacity, \" \\u043C\\u0435\\u0441\\u0442\\u0430\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1403,\n            columnNumber: 17\n          }, this)]\n        }, table.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1391,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1389,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1387,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041D\\u043E\\u043C\\u0435\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1413,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u0430\\u043F\\u0430\\u0446\\u0438\\u0442\\u0435\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1414,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0411\\u0435\\u043B\\u0435\\u0436\\u043A\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1416,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1417,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1412,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1411,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: tables.map(table => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: table.table_number\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1423,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [table.capacity, \" \\u043C\\u0435\\u0441\\u0442\\u0430\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1424,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `status-badge ${table.available ? 'active' : 'inactive'}`,\n                children: table.available ? 'Активна' : 'Неактивна'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1426,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1425,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: table.notes || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1430,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-action-btn edit\",\n                onClick: () => handleEdit(table),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1436,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1432,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-action-btn delete\",\n                onClick: () => handleDelete(table.id),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1442,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1438,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1431,\n              columnNumber: 19\n            }, this)]\n          }, table.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1422,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1420,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1410,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1409,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1283,\n    columnNumber: 7\n  }, this);\n}\n// Подсекция Меню\n_s5(AdminTablesSection, \"3cuvnFZhCQ4WS9CSnHWt6r/Xxo0=\");\n_c5 = AdminTablesSection;\nfunction AdminMenuSection({\n  restaurant,\n  supabase\n}) {\n  _s6();\n  const [categories, setCategories] = useState([]);\n  const [menuItems, setMenuItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    description: '',\n    price: '',\n    category_id: '',\n    is_available: true,\n    image_url: '',\n    allergens: '',\n    recommended: false\n  });\n  const [showCategoryForm, setShowCategoryForm] = useState(false);\n  const [categoryFormData, setCategoryFormData] = useState({\n    name: '',\n    order: 0\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [editingCategoryId, setEditingCategoryId] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchMenuData = async () => {\n      try {\n        setLoading(true);\n\n        // Зареждане на категории\n        const {\n          data: categoriesData,\n          error: categoriesError\n        } = await supabase.from('menu_categories').select('*').eq('restaurant_id', restaurant.id).order('order', {\n          ascending: true\n        });\n        if (categoriesError) throw categoriesError;\n        setCategories(categoriesData || []);\n\n        // Зареждане на продукти от менюто\n        let query = supabase.from('menu_items').select(`\n              *,\n              menu_categories:category_id (id, name)\n            `).eq('restaurant_id', restaurant.id);\n        if (selectedCategory !== 'all') {\n          query = query.eq('category_id', selectedCategory);\n        }\n        const {\n          data: menuData,\n          error: menuError\n        } = await query.order('name', {\n          ascending: true\n        });\n        if (menuError) throw menuError;\n        setMenuItems(menuData || []);\n      } catch (error) {\n        console.error('Error fetching menu data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchMenuData();\n  }, [restaurant, supabase, selectedCategory]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : type === 'number' ? parseFloat(value) : value\n    });\n  };\n  const handleCategoryInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setCategoryFormData({\n      ...categoryFormData,\n      [name]: type === 'checkbox' ? checked : name === 'order' ? parseInt(value, 10) : value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      description: '',\n      price: '',\n      category_id: '',\n      is_available: true,\n      image_url: '',\n      allergens: '',\n      recommended: false\n    });\n    setEditingId(null);\n  };\n  const resetCategoryForm = () => {\n    setCategoryFormData({\n      name: '',\n      order: categories.length > 0 ? Math.max(...categories.map(c => c.order)) + 1 : 0\n    });\n    setEditingCategoryId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id,\n        price: parseFloat(formData.price)\n      };\n      let result;\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('menu_items').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък\n        setMenuItems(menuItems.map(item => item.id === editingId ? {\n          ...item,\n          ...result\n        } : item));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('menu_items').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне към локалния списък\n        setMenuItems([...menuItems, result]);\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving menu item:', error);\n      alert('Възникна грешка при запазване на продукта');\n    }\n  };\n  const handleCategorySubmit = async e => {\n    e.preventDefault();\n    try {\n      const fullData = {\n        ...categoryFormData,\n        restaurant_id: restaurant.id\n      };\n      let result;\n      if (editingCategoryId) {\n        const {\n          data,\n          error\n        } = await supabase.from('menu_categories').update(fullData).eq('id', editingCategoryId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък\n        setCategories(categories.map(cat => cat.id === editingCategoryId ? {\n          ...cat,\n          ...result\n        } : cat));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('menu_categories').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне към локалния списък\n        setCategories([...categories, result]);\n      }\n      resetCategoryForm();\n      setShowCategoryForm(false);\n    } catch (error) {\n      console.error('Error saving category:', error);\n      alert('Възникна грешка при запазване на категорията');\n    }\n  };\n  const handleEdit = item => {\n    setFormData({\n      name: item.name,\n      description: item.description || '',\n      price: item.price.toString(),\n      category_id: item.category_id,\n      is_available: item.is_available,\n      image_url: item.image_url || '',\n      allergens: item.allergens || '',\n      recommended: item.recommended || false\n    });\n    setEditingId(item.id);\n    setShowForm(true);\n  };\n  const handleEditCategory = category => {\n    setCategoryFormData({\n      name: category.name,\n      order: category.order\n    });\n    setEditingCategoryId(category.id);\n    setShowCategoryForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете този продукт?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('menu_items').delete().eq('id', id);\n      if (error) throw error;\n\n      // Премахване от локалния списък\n      setMenuItems(menuItems.filter(item => item.id !== id));\n    } catch (error) {\n      console.error('Error deleting menu item:', error);\n      alert('Възникна грешка при изтриване на продукта');\n    }\n  };\n  const handleDeleteCategory = async id => {\n    // Проверка дали категорията се използва в продукти\n    const itemsInCategory = menuItems.filter(item => item.category_id === id);\n    if (itemsInCategory.length > 0) {\n      alert(`Не можете да изтриете тази категория, защото има ${itemsInCategory.length} продукта в нея.`);\n      return;\n    }\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази категория?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('menu_categories').delete().eq('id', id);\n      if (error) throw error;\n\n      // Премахване от локалния списък\n      setCategories(categories.filter(cat => cat.id !== id));\n\n      // Ако текущо избраната категория е изтрита, връщаме се към \"всички\"\n      if (selectedCategory === id) {\n        setSelectedCategory('all');\n      }\n    } catch (error) {\n      console.error('Error deleting category:', error);\n      alert('Възникна грешка при изтриване на категорията');\n    }\n  };\n  const handleCategoryChange = categoryId => {\n    setSelectedCategory(categoryId);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043C\\u0435\\u043D\\u044E...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1739,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u041C\\u0435\\u043D\\u044E: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1743,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls menu-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filter-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0424\\u0438\\u043B\\u0442\\u0440\\u0438\\u0440\\u0430\\u043D\\u0435 \\u043F\\u043E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1747,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category-filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `admin-filter-btn ${selectedCategory === 'all' ? 'active' : ''}`,\n            onClick: () => handleCategoryChange('all'),\n            children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1749,\n            columnNumber: 17\n          }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `admin-filter-btn ${selectedCategory === category.id ? 'active' : ''}`,\n            onClick: () => handleCategoryChange(category.id),\n            children: category.name\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1756,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1748,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1746,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-button-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-add-btn\",\n          onClick: () => {\n            resetCategoryForm();\n            setShowCategoryForm(!showCategoryForm);\n            if (showForm) setShowForm(false);\n          },\n          children: showCategoryForm ? 'Отказ' : 'Добави категория'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1768,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-add-btn\",\n          onClick: () => {\n            resetForm();\n            setShowForm(!showForm);\n            if (showCategoryForm) setShowCategoryForm(false);\n          },\n          children: showForm ? 'Отказ' : 'Добави продукт'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1779,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1767,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1745,\n      columnNumber: 11\n    }, this), showCategoryForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingCategoryId ? 'Редактиране на категория' : 'Нова категория'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1795,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleCategorySubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1798,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: categoryFormData.name,\n            onChange: handleCategoryInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1799,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1797,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0420\\u0435\\u0434 \\u043D\\u0430 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0432\\u0430\\u043D\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1809,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"order\",\n            value: categoryFormData.order,\n            onChange: handleCategoryInputChange,\n            required: true,\n            min: \"0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1810,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1808,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowCategoryForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1821,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingCategoryId ? 'Запази промените' : 'Добави категория'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1824,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1820,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1796,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1794,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-categories-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1834,\n        columnNumber: 13\n      }, this), categories.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438. \\u0414\\u043E\\u0431\\u0430\\u0432\\u0435\\u0442\\u0435 \\u043F\\u044A\\u0440\\u0432\\u0430\\u0442\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1837,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1836,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0418\\u043C\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1843,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0420\\u0435\\u0434\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1844,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0411\\u0440\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1845,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1846,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1842,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1841,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: categories.map(category => {\n            const itemCount = menuItems.filter(item => item.category_id === category.id).length;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1854,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: category.order\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1855,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: itemCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1856,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn edit\",\n                  onClick: () => handleEditCategory(category),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1862,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1858,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn delete\",\n                  onClick: () => handleDeleteCategory(category.id),\n                  disabled: itemCount > 0,\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1869,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1864,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1857,\n                columnNumber: 25\n              }, this)]\n            }, category.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1853,\n              columnNumber: 23\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1849,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1840,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1833,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на продукт' : 'Нов продукт'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1882,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1885,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: formData.name,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1886,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1884,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1896,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"category_id\",\n            value: formData.category_id,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1903,\n              columnNumber: 17\n            }, this), categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category.id,\n              children: category.name\n            }, category.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1905,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1897,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1895,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0426\\u0435\\u043D\\u0430 (\\u0432 \\u043B\\u0432.)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1913,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"price\",\n            value: formData.price,\n            onChange: handleInputChange,\n            required: true,\n            min: \"0\",\n            step: \"0.01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1914,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1912,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1926,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: formData.description,\n            onChange: handleInputChange,\n            placeholder: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1927,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1925,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"URL \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1936,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"url\",\n            name: \"image_url\",\n            value: formData.image_url,\n            onChange: handleInputChange,\n            placeholder: \"http://example.com/image.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1937,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1935,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0410\\u043B\\u0435\\u0440\\u0433\\u0435\\u043D\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1947,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"allergens\",\n            value: formData.allergens,\n            onChange: handleInputChange,\n            placeholder: \"\\u041D\\u0430\\u043F\\u0440.: \\u0433\\u043B\\u0443\\u0442\\u0435\\u043D, \\u043C\\u043B\\u0435\\u0447\\u043D\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438, \\u044F\\u0434\\u043A\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1948,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1946,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"is_available\",\n              checked: formData.is_available,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1959,\n              columnNumber: 17\n            }, this), \"\\u041D\\u0430\\u043B\\u0438\\u0447\\u0435\\u043D \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1958,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1957,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"recommended\",\n              checked: formData.recommended,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1971,\n              columnNumber: 17\n            }, this), \"\\u041F\\u0440\\u0435\\u043F\\u043E\\u0440\\u044A\\u0447\\u0430\\u043D \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1970,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1969,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1982,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави продукт'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1985,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1981,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1883,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1881,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 \\u0432 \\u043C\\u0435\\u043D\\u044E\\u0442\\u043E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1995,\n        columnNumber: 9\n      }, this), menuItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 \\u0432 \\u043C\\u0435\\u043D\\u044E\\u0442\\u043E.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1998,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1997,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2004,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0418\\u043C\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2005,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2006,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0426\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2007,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2008,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041F\\u0440\\u0435\\u043F\\u043E\\u0440\\u044A\\u0447\\u0430\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2009,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2010,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2003,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2002,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: menuItems.map(item => {\n            var _item$menu_categories, _item$price;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.image_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image_url,\n                  alt: item.name,\n                  className: \"menu-item-thumbnail\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2018,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"menu-item-no-image\",\n                  children: \"\\u041D\\u044F\\u043C\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2020,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2016,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2024,\n                  columnNumber: 21\n                }, this), item.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"menu-item-description\",\n                  children: item.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2025,\n                  columnNumber: 42\n                }, this), item.allergens && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"menu-item-allergens\",\n                  children: [\"\\u0410\\u043B\\u0435\\u0440\\u0433\\u0435\\u043D\\u0438: \", item.allergens]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2026,\n                  columnNumber: 40\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2023,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_item$menu_categories = item.menu_categories) === null || _item$menu_categories === void 0 ? void 0 : _item$menu_categories.name) || 'Без категория'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2028,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [(_item$price = item.price) === null || _item$price === void 0 ? void 0 : _item$price.toFixed(2), \" \\u043B\\u0432.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2029,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-badge ${item.is_available ? 'active' : 'inactive'}`,\n                  children: item.is_available ? 'Наличен' : 'Неналичен'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2031,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2030,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: item.recommended ? /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-star recommended-star\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2036,\n                  columnNumber: 41\n                }, this) : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2035,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn edit\",\n                  onClick: () => handleEdit(item),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2043,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2039,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn delete\",\n                  onClick: () => handleDelete(item.id),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2049,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2045,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2038,\n                columnNumber: 19\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2015,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2013,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2001,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1994,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1742,\n    columnNumber: 9\n  }, this);\n}\n// Подсекция за събития\n_s6(AdminMenuSection, \"NqDoJXV7bVHBIEJUkyJYyzxh7tw=\");\n_c6 = AdminMenuSection;\nfunction AdminEventsSection({\n  restaurant,\n  supabase\n}) {\n  _s7();\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    date: '',\n    time: '',\n    end_time: '',\n    image_url: '',\n    seats_available: 0,\n    price: '',\n    is_published: false,\n    is_private: false\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [view, setView] = useState('upcoming');\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchEvents = async () => {\n      try {\n        setLoading(true);\n\n        // Получаване на днешната дата\n        const today = new Date().toISOString().split('T')[0];\n\n        // Съставяне на заявката според изгледа\n        let query = supabase.from('events').select('*').eq('restaurant_id', restaurant.id);\n        if (view === 'upcoming') {\n          query = query.gte('date', today);\n        } else if (view === 'past') {\n          query = query.lt('date', today);\n        }\n        const {\n          data,\n          error\n        } = await query.order('date', {\n          ascending: view === 'upcoming'\n        });\n        if (error) throw error;\n        setEvents(data || []);\n      } catch (error) {\n        console.error('Error fetching events:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchEvents();\n  }, [restaurant, view, supabase]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : type === 'number' ? parseInt(value, 10) : name === 'price' ? parseFloat(value) || '' : value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      description: '',\n      date: '',\n      time: '',\n      end_time: '',\n      image_url: '',\n      seats_available: 0,\n      price: '',\n      is_published: false,\n      is_private: false\n    });\n    setEditingId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      // Валидация\n      if (formData.price && parseFloat(formData.price) < 0) {\n        alert('Цената не може да бъде отрицателна');\n        return;\n      }\n      if (formData.seats_available < 0) {\n        alert('Броят на местата не може да бъде отрицателен');\n        return;\n      }\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id,\n        price: formData.price === '' ? null : parseFloat(formData.price)\n      };\n      let result;\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('events').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък\n        setEvents(events.map(event => event.id === editingId ? {\n          ...event,\n          ...result\n        } : event));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('events').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне към локалния списък, ако съответства на текущия изглед\n        const today = new Date().toISOString().split('T')[0];\n        const isUpcoming = result.date >= today;\n        if (view === 'upcoming' && isUpcoming || view === 'past' && !isUpcoming || view === 'all') {\n          setEvents([...events, result]);\n        }\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving event:', error);\n      alert('Възникна грешка при запазване на събитието');\n    }\n  };\n  const handleEdit = event => {\n    setFormData({\n      title: event.title,\n      description: event.description || '',\n      date: event.date,\n      time: event.time,\n      end_time: event.end_time || '',\n      image_url: event.image_url || '',\n      seats_available: event.seats_available || 0,\n      price: event.price !== null ? event.price.toString() : '',\n      is_published: event.is_published || false,\n      is_private: event.is_private || false\n    });\n    setEditingId(event.id);\n    setShowForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това събитие?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('events').delete().eq('id', id);\n      if (error) throw error;\n\n      // Премахване от локалния списък\n      setEvents(events.filter(event => event.id !== id));\n    } catch (error) {\n      console.error('Error deleting event:', error);\n      alert('Възникна грешка при изтриване на събитието');\n    }\n  };\n  const togglePublish = async (id, currentStatus) => {\n    try {\n      const {\n        error\n      } = await supabase.from('events').update({\n        is_published: !currentStatus\n      }).eq('id', id);\n      if (error) throw error;\n\n      // Актуализиране на локалния списък\n      setEvents(events.map(event => event.id === id ? {\n        ...event,\n        is_published: !currentStatus\n      } : event));\n    } catch (error) {\n      console.error('Error updating event publish status:', error);\n      alert('Възникна грешка при промяна на статуса на събитието');\n    }\n  };\n  const handleViewChange = newView => {\n    setView(newView);\n  };\n  const formatDate = dateStr => {\n    const parts = dateStr.split('-');\n    return `${parts[2]}.${parts[1]}.${parts[0]}`;\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2276,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2280,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${view === 'upcoming' ? 'active' : ''}`,\n          onClick: () => handleViewChange('upcoming'),\n          children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2284,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${view === 'past' ? 'active' : ''}`,\n          onClick: () => handleViewChange('past'),\n          children: \"\\u041C\\u0438\\u043D\\u0430\\u043B\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2290,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${view === 'all' ? 'active' : ''}`,\n          onClick: () => handleViewChange('all'),\n          children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2296,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2283,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави събитие'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2304,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2282,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на събитие' : 'Ново събитие'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2318,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0417\\u0430\\u0433\\u043B\\u0430\\u0432\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2321,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"title\",\n            value: formData.title,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2322,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2320,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2332,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: formData.description,\n            onChange: handleInputChange,\n            rows: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2333,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2331,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0414\\u0430\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2343,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"date\",\n              value: formData.date,\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2344,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2342,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u0435\\u043D \\u0447\\u0430\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2354,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              name: \"time\",\n              value: formData.time,\n              onChange: handleInputChange,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2355,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2353,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041A\\u0440\\u0430\\u0435\\u043D \\u0447\\u0430\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2365,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              name: \"end_time\",\n              value: formData.end_time,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2366,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2364,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2341,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"URL \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2376,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"url\",\n            name: \"image_url\",\n            value: formData.image_url,\n            onChange: handleInputChange,\n            placeholder: \"http://example.com/image.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2377,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2375,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0411\\u0440\\u043E\\u0439 \\u043C\\u0435\\u0441\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2388,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"seats_available\",\n              value: formData.seats_available,\n              onChange: handleInputChange,\n              min: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2389,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2387,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0426\\u0435\\u043D\\u0430 (\\u0432 \\u043B\\u0432., \\u0430\\u043A\\u043E \\u0435 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0438\\u043C\\u043E)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2399,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"price\",\n              value: formData.price,\n              onChange: handleInputChange,\n              min: \"0\",\n              step: \"0.01\",\n              placeholder: \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0435\\u0442\\u0435 \\u043F\\u0440\\u0430\\u0437\\u043D\\u043E, \\u0430\\u043A\\u043E \\u0435 \\u0431\\u0435\\u0437\\u043F\\u043B\\u0430\\u0442\\u043D\\u043E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2400,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2398,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2386,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row checkboxes\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group checkbox-group\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                name: \"is_published\",\n                checked: formData.is_published,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2415,\n                columnNumber: 23\n              }, this), \"\\u041F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0443\\u0432\\u0430\\u043D\\u043E (\\u0432\\u0438\\u0434\\u0438\\u043C\\u043E \\u0437\\u0430 \\u043A\\u043B\\u0438\\u0435\\u043D\\u0442\\u0438)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2414,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2413,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group checkbox-group\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                name: \"is_private\",\n                checked: formData.is_private,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2427,\n                columnNumber: 23\n              }, this), \"\\u0427\\u0430\\u0441\\u0442\\u043D\\u043E \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u0435 (\\u0441\\u0430\\u043C\\u043E \\u0441 \\u043F\\u043E\\u043A\\u0430\\u043D\\u0430)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2426,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2425,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2412,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2439,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави събитие'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2442,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2438,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2319,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2317,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: events.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u041D\\u044F\\u043C\\u0430 \", view === 'upcoming' ? 'предстоящи' : view === 'past' ? 'минали' : '', \" \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2453,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2452,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"events-grid\",\n        children: events.map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"event-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-image\",\n            children: event.image_url ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: event.image_url,\n              alt: event.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2461,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-placeholder\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-calendar-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2464,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2463,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2459,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"event-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: event.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2470,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"event-status\",\n                children: [event.is_published ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-badge active\",\n                  children: \"\\u041F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0443\\u0432\\u0430\\u043D\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2473,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-badge inactive\",\n                  children: \"\\u0427\\u0435\\u0440\\u043D\\u043E\\u0432\\u0430\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2475,\n                  columnNumber: 25\n                }, this), event.is_private && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-badge private\",\n                  children: \"\\u0427\\u0430\\u0441\\u0442\\u043D\\u043E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2478,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2471,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2469,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-date-time\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-calendar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2485,\n                  columnNumber: 23\n                }, this), \" \", formatDate(event.date)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2484,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-clock\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2488,\n                  columnNumber: 23\n                }, this), \" \", event.time, event.end_time && ` - ${event.end_time}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2487,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2483,\n              columnNumber: 19\n            }, this), event.description && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-description\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: event.description.length > 100 ? event.description.slice(0, 100) + '...' : event.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2495,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2494,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-details\",\n              children: [event.seats_available > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-chair\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2505,\n                  columnNumber: 25\n                }, this), \" \", event.seats_available, \" \\u043C\\u0435\\u0441\\u0442\\u0430\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2504,\n                columnNumber: 23\n              }, this), event.price !== null && event.price > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-ticket-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2510,\n                  columnNumber: 25\n                }, this), \" \", event.price.toFixed(2), \" \\u043B\\u0432.\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2509,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-ticket-alt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2514,\n                  columnNumber: 25\n                }, this), \" \\u0411\\u0435\\u0437\\u043F\\u043B\\u0430\\u0442\\u043D\\u043E\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2513,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2502,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"event-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-action-btn toggle-publish\",\n                onClick: () => togglePublish(event.id, event.is_published),\n                title: event.is_published ? 'Скрий от клиенти' : 'Публикувай',\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fas fa-${event.is_published ? 'eye-slash' : 'eye'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2525,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2520,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-action-btn edit\",\n                onClick: () => handleEdit(event),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2531,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2527,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"admin-action-btn delete\",\n                onClick: () => handleDelete(event.id),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2537,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2533,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2519,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2468,\n            columnNumber: 17\n          }, this)]\n        }, event.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2458,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2456,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2450,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2279,\n    columnNumber: 9\n  }, this);\n}\n// Експорт на основния компонент\n_s7(AdminEventsSection, \"kd+8L0vePpAEo0676bKoW6XLbmg=\");\n_c7 = AdminEventsSection;\nexport default AdminDashboard;\n\n// Подсекция за специални предложения\nfunction AdminSpecialOffersSection({\n  restaurant,\n  supabase\n}) {\n  _s8();\n  const [offers, setOffers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    discount_type: 'percentage',\n    // 'percentage', 'fixed', 'free_item'\n    discount_value: '',\n    start_date: '',\n    end_date: '',\n    days_of_week: [],\n    // ['monday', 'tuesday', etc.]\n    start_time: '',\n    end_time: '',\n    min_order: '',\n    max_uses: '',\n    image_url: '',\n    active: true,\n    applies_to: 'all',\n    // 'all', 'category', 'item'\n    applies_to_id: ''\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [menuCategories, setMenuCategories] = useState([]);\n  const [menuItems, setMenuItems] = useState([]);\n  const [filter, setFilter] = useState('active');\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n\n        // Получаване на днешната дата\n        const today = new Date().toISOString().split('T')[0];\n\n        // Зареждане на специални предложения\n        let query = supabase.from('special_offers').select('*').eq('restaurant_id', restaurant.id);\n        if (filter === 'active') {\n          query = query.eq('active', true).lte('start_date', today).or(`end_date.gt.${today},end_date.is.null`);\n        } else if (filter === 'upcoming') {\n          query = query.gt('start_date', today);\n        } else if (filter === 'expired') {\n          query = query.lt('end_date', today).not('end_date', 'is', null);\n        } else if (filter === 'inactive') {\n          query = query.eq('active', false);\n        }\n        const {\n          data: offersData,\n          error: offersError\n        } = await query.order('start_date', {\n          ascending: false\n        });\n        if (offersError) throw offersError;\n        setOffers(offersData || []);\n\n        // Зареждане на категории от менюто\n        const {\n          data: categoriesData,\n          error: categoriesError\n        } = await supabase.from('menu_categories').select('*').eq('restaurant_id', restaurant.id).order('order', {\n          ascending: true\n        });\n        if (categoriesError) throw categoriesError;\n        setMenuCategories(categoriesData || []);\n\n        // Зареждане на продукти от менюто\n        const {\n          data: itemsData,\n          error: itemsError\n        } = await supabase.from('menu_items').select(`\n              id,\n              name,\n              category_id,\n              price,\n              menu_categories:category_id (name)\n            `).eq('restaurant_id', restaurant.id).order('name', {\n          ascending: true\n        });\n        if (itemsError) throw itemsError;\n        setMenuItems(itemsData || []);\n      } catch (error) {\n        console.error('Error fetching special offers data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [restaurant, filter, supabase]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : name === 'discount_value' || name === 'min_order' || name === 'max_uses' ? value === '' ? '' : parseFloat(value) : value\n    });\n  };\n  const handleDaysOfWeekChange = day => {\n    const updatedDays = [...formData.days_of_week];\n    const index = updatedDays.indexOf(day);\n    if (index > -1) {\n      updatedDays.splice(index, 1);\n    } else {\n      updatedDays.push(day);\n    }\n    setFormData({\n      ...formData,\n      days_of_week: updatedDays\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      description: '',\n      discount_type: 'percentage',\n      discount_value: '',\n      start_date: '',\n      end_date: '',\n      days_of_week: [],\n      start_time: '',\n      end_time: '',\n      min_order: '',\n      max_uses: '',\n      image_url: '',\n      active: true,\n      applies_to: 'all',\n      applies_to_id: ''\n    });\n    setEditingId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      // Валидация\n      if (formData.discount_type !== 'free_item' && (formData.discount_value === '' || parseFloat(formData.discount_value) <= 0)) {\n        alert('Моля, въведете валидна стойност на отстъпката');\n        return;\n      }\n      if (formData.discount_type === 'percentage' && parseFloat(formData.discount_value) > 100) {\n        alert('Процентната отстъпка не може да бъде по-голяма от 100%');\n        return;\n      }\n      if (formData.start_date && formData.end_date && formData.start_date > formData.end_date) {\n        alert('Крайната дата трябва да бъде след началната дата');\n        return;\n      }\n      if (formData.applies_to !== 'all' && !formData.applies_to_id) {\n        alert('Моля, изберете за какво се отнася специалното предложение');\n        return;\n      }\n\n      // Подготовка на данните\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id\n      };\n\n      // Конвертиране на празни стрингове към null\n      for (const key in fullData) {\n        if (fullData[key] === '') {\n          fullData[key] = null;\n        }\n      }\n      let result;\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('special_offers').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък\n        setOffers(offers.map(offer => offer.id === editingId ? {\n          ...offer,\n          ...result\n        } : offer));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('special_offers').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне към локалния списък, ако съответства на текущия филтър\n        const today = new Date().toISOString().split('T')[0];\n        const isActive = result.active && (!result.start_date || result.start_date <= today) && (!result.end_date || result.end_date >= today);\n        const isUpcoming = result.start_date > today;\n        const isExpired = result.end_date && result.end_date < today;\n        if (filter === 'active' && isActive || filter === 'upcoming' && isUpcoming || filter === 'expired' && isExpired || filter === 'inactive' && !result.active || filter === 'all') {\n          setOffers([result, ...offers]);\n        }\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving special offer:', error);\n      alert('Възникна грешка при запазване на специалното предложение');\n    }\n  };\n  const handleEdit = offer => {\n    setFormData({\n      title: offer.title,\n      description: offer.description || '',\n      discount_type: offer.discount_type,\n      discount_value: offer.discount_value !== null ? offer.discount_value.toString() : '',\n      start_date: offer.start_date || '',\n      end_date: offer.end_date || '',\n      days_of_week: offer.days_of_week || [],\n      start_time: offer.start_time || '',\n      end_time: offer.end_time || '',\n      min_order: offer.min_order !== null ? offer.min_order.toString() : '',\n      max_uses: offer.max_uses !== null ? offer.max_uses.toString() : '',\n      image_url: offer.image_url || '',\n      active: offer.active,\n      applies_to: offer.applies_to || 'all',\n      applies_to_id: offer.applies_to_id || ''\n    });\n    setEditingId(offer.id);\n    setShowForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това специално предложение?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('special_offers').delete().eq('id', id);\n      if (error) throw error;\n\n      // Премахване от локалния списък\n      setOffers(offers.filter(offer => offer.id !== id));\n    } catch (error) {\n      console.error('Error deleting special offer:', error);\n      alert('Възникна грешка при изтриване на специалното предложение');\n    }\n  };\n  const toggleActive = async (id, currentStatus) => {\n    try {\n      const {\n        error\n      } = await supabase.from('special_offers').update({\n        active: !currentStatus\n      }).eq('id', id);\n      if (error) throw error;\n\n      // Актуализиране на локалния списък\n      setOffers(offers.map(offer => offer.id === id ? {\n        ...offer,\n        active: !currentStatus\n      } : offer));\n    } catch (error) {\n      console.error('Error updating offer status:', error);\n      alert('Възникна грешка при промяна на статуса');\n    }\n  };\n  const handleFilterChange = newFilter => {\n    setFilter(newFilter);\n  };\n  const getAppliesText = offer => {\n    if (offer.applies_to === 'all') {\n      return 'Всички продукти';\n    } else if (offer.applies_to === 'category') {\n      const category = menuCategories.find(c => c.id === offer.applies_to_id);\n      return category ? `Категория: ${category.name}` : 'Неизвестна категория';\n    } else if (offer.applies_to === 'item') {\n      const item = menuItems.find(i => i.id === offer.applies_to_id);\n      return item ? `Продукт: ${item.name}` : 'Неизвестен продукт';\n    }\n    return '';\n  };\n  const formatDate = dateStr => {\n    if (!dateStr) return '';\n    const parts = dateStr.split('-');\n    return `${parts[2]}.${parts[1]}.${parts[0]}`;\n  };\n  const getDiscountText = offer => {\n    if (offer.discount_type === 'percentage') {\n      return `${offer.discount_value}% отстъпка`;\n    } else if (offer.discount_type === 'fixed') {\n      return `${offer.discount_value.toFixed(2)} лв. отстъпка`;\n    } else if (offer.discount_type === 'free_item') {\n      return 'Безплатен продукт';\n    }\n    return '';\n  };\n  const isOfferActive = offer => {\n    const today = new Date().toISOString().split('T')[0];\n    return offer.active && (!offer.start_date || offer.start_date <= today) && (!offer.end_date || offer.end_date >= today);\n  };\n  const getDaysOfWeekLabels = days => {\n    if (!days || days.length === 0) return 'Всички дни';\n    const dayMap = {\n      'monday': 'Пн',\n      'tuesday': 'Вт',\n      'wednesday': 'Ср',\n      'thursday': 'Чт',\n      'friday': 'Пт',\n      'saturday': 'Сб',\n      'sunday': 'Нд'\n    };\n    return days.map(day => dayMap[day]).join(', ');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2909,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2913,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'active' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('active'),\n          children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2917,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'upcoming' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('upcoming'),\n          children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2923,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'expired' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('expired'),\n          children: \"\\u0418\\u0437\\u0442\\u0435\\u043A\\u043B\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2929,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'inactive' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('inactive'),\n          children: \"\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2935,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'all' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('all'),\n          children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2941,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2916,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави специално предложение'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2949,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2915,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на специално предложение' : 'Ново специално предложение'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2963,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0417\\u0430\\u0433\\u043B\\u0430\\u0432\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2966,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"title\",\n            value: formData.title,\n            onChange: handleInputChange,\n            required: true,\n            placeholder: \"\\u041D\\u0430\\u043F\\u0440.: \\u0429\\u0430\\u0441\\u0442\\u043B\\u0438\\u0432 \\u0447\\u0430\\u0441, 2+1 \\u0431\\u0435\\u0437\\u043F\\u043B\\u0430\\u0442\\u043D\\u043E \\u0438 \\u0442.\\u043D.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2967,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2965,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2978,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: formData.description,\n            onChange: handleInputChange,\n            rows: \"3\",\n            placeholder: \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u043E \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u043E\\u0442\\u043E \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2979,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2977,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0422\\u0438\\u043F \\u043E\\u0442\\u0441\\u0442\\u044A\\u043F\\u043A\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2990,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"discount_type\",\n              value: formData.discount_type,\n              onChange: handleInputChange,\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"percentage\",\n                children: \"\\u041F\\u0440\\u043E\\u0446\\u0435\\u043D\\u0442 (%)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2997,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"fixed\",\n                children: \"\\u0424\\u0438\\u043A\\u0441\\u0438\\u0440\\u0430\\u043D\\u0430 \\u0441\\u0443\\u043C\\u0430 (\\u043B\\u0432.)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2998,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"free_item\",\n                children: \"\\u0411\\u0435\\u0437\\u043F\\u043B\\u0430\\u0442\\u0435\\u043D \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2999,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2991,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2989,\n            columnNumber: 19\n          }, this), formData.discount_type !== 'free_item' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0421\\u0442\\u043E\\u0439\\u043D\\u043E\\u0441\\u0442 \\u043D\\u0430 \\u043E\\u0442\\u0441\\u0442\\u044A\\u043F\\u043A\\u0430\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3005,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"discount_value\",\n              value: formData.discount_value,\n              onChange: handleInputChange,\n              min: formData.discount_type === 'percentage' ? 1 : 0.01,\n              max: formData.discount_type === 'percentage' ? 100 : undefined,\n              step: formData.discount_type === 'percentage' ? 1 : 0.01,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3006,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3004,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2988,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043D\\u0430 \\u0434\\u0430\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3022,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"start_date\",\n              value: formData.start_date,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3023,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3021,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041A\\u0440\\u0430\\u0439\\u043D\\u0430 \\u0434\\u0430\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3032,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"end_date\",\n              value: formData.end_date,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3033,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3031,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3020,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0412 \\u043A\\u043E\\u0438 \\u0434\\u043D\\u0438 \\u043E\\u0442 \\u0441\\u0435\\u0434\\u043C\\u0438\\u0446\\u0430\\u0442\\u0430 \\u0432\\u0430\\u0436\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3043,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"days-of-week-container\",\n            children: ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'].map(day => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"day-checkbox\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: formData.days_of_week.includes(day),\n                onChange: () => handleDaysOfWeekChange(day)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3047,\n                columnNumber: 25\n              }, this), day === 'monday' ? 'Пн' : day === 'tuesday' ? 'Вт' : day === 'wednesday' ? 'Ср' : day === 'thursday' ? 'Чт' : day === 'friday' ? 'Пт' : day === 'saturday' ? 'Сб' : 'Нд']\n            }, day, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3046,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3044,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0435\\u0442\\u0435 \\u0432\\u0441\\u0438\\u0447\\u043A\\u0438 \\u043F\\u0440\\u0430\\u0437\\u043D\\u0438, \\u0437\\u0430 \\u0434\\u0430 \\u0432\\u0430\\u0436\\u0438 \\u0432\\u0441\\u0435\\u043A\\u0438 \\u0434\\u0435\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3061,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3042,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041D\\u0430\\u0447\\u0430\\u043B\\u0435\\u043D \\u0447\\u0430\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3065,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              name: \"start_time\",\n              value: formData.start_time,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3066,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3064,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041A\\u0440\\u0430\\u0435\\u043D \\u0447\\u0430\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3075,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"time\",\n              name: \"end_time\",\n              value: formData.end_time,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3076,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3074,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3063,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u043D\\u0430 \\u043F\\u043E\\u0440\\u044A\\u0447\\u043A\\u0430 (\\u043B\\u0432.)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3087,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"min_order\",\n              value: formData.min_order,\n              onChange: handleInputChange,\n              min: \"0\",\n              step: \"0.01\",\n              placeholder: \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0435\\u0442\\u0435 \\u043F\\u0440\\u0430\\u0437\\u043D\\u043E, \\u0430\\u043A\\u043E \\u043D\\u044F\\u043C\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3088,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3086,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u0435\\u043D \\u0431\\u0440\\u043E\\u0439 \\u0438\\u0437\\u043F\\u043E\\u043B\\u0437\\u0432\\u0430\\u043D\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3100,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"max_uses\",\n              value: formData.max_uses,\n              onChange: handleInputChange,\n              min: \"1\",\n              placeholder: \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0435\\u0442\\u0435 \\u043F\\u0440\\u0430\\u0437\\u043D\\u043E, \\u0430\\u043A\\u043E \\u043D\\u044F\\u043C\\u0430 \\u043B\\u0438\\u043C\\u0438\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3101,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3099,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3085,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"URL \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"url\",\n            name: \"image_url\",\n            value: formData.image_url,\n            onChange: handleInputChange,\n            placeholder: \"http://example.com/image.jpg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0417\\u0430 \\u043A\\u0430\\u043A\\u0432\\u043E \\u0441\\u0435 \\u043E\\u0442\\u043D\\u0430\\u0441\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"applies_to\",\n            value: formData.applies_to,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3131,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"category\",\n              children: \"\\u041A\\u043E\\u043D\\u043A\\u0440\\u0435\\u0442\\u043D\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3132,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"item\",\n              children: \"\\u041A\\u043E\\u043D\\u043A\\u0440\\u0435\\u0442\\u0435\\u043D \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3133,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3125,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3123,\n          columnNumber: 13\n        }, this), formData.applies_to === 'category' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3139,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"applies_to_id\",\n            value: formData.applies_to_id,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3146,\n              columnNumber: 19\n            }, this), menuCategories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: category.id,\n              children: category.name\n            }, category.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3148,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3140,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3138,\n          columnNumber: 15\n        }, this), formData.applies_to === 'item' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3158,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"applies_to_id\",\n            value: formData.applies_to_id,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3165,\n              columnNumber: 19\n            }, this), menuItems.map(item => {\n              var _item$menu_categories2, _item$price2;\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.id,\n                children: [item.name, \" (\", ((_item$menu_categories2 = item.menu_categories) === null || _item$menu_categories2 === void 0 ? void 0 : _item$menu_categories2.name) || 'Без категория', \") - \", (_item$price2 = item.price) === null || _item$price2 === void 0 ? void 0 : _item$price2.toFixed(2), \" \\u043B\\u0432.\"]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3167,\n                columnNumber: 21\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3159,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3157,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group checkbox-group\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              name: \"active\",\n              checked: formData.active,\n              onChange: handleInputChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3177,\n              columnNumber: 17\n            }, this), \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3176,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави специално предложение'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3191,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2964,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2962,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: offers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u043D\\u0430\\u043C\\u0435\\u0440\\u0435\\u043D\\u0438 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3202,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3201,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"special-offers-grid\",\n        children: offers.map(offer => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `special-offer-card ${isOfferActive(offer) ? 'active' : 'inactive'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"special-offer-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: offer.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3209,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"special-offer-status\",\n              children: isOfferActive(offer) ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-badge active\",\n                children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3212,\n                columnNumber: 23\n              }, this) : offer.active ? offer.start_date && new Date(offer.start_date) > new Date() ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-badge upcoming\",\n                children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3216,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-badge expired\",\n                children: \"\\u0418\\u0437\\u0442\\u0435\\u043A\\u043B\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3218,\n                columnNumber: 27\n              }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-badge inactive\",\n                children: \"\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3221,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3210,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"special-offer-content\",\n            children: [offer.image_url && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"special-offer-image\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: offer.image_url,\n                alt: offer.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3230,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3229,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"special-offer-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"special-offer-discount\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-tag\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3236,\n                  columnNumber: 23\n                }, this), \" \", getDiscountText(offer)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3235,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"special-offer-applies-to\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-shopping-basket\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3240,\n                  columnNumber: 23\n                }, this), \" \", getAppliesText(offer)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3239,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"special-offer-period\",\n                children: [(offer.start_date || offer.end_date) && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-calendar-alt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3246,\n                    columnNumber: 27\n                  }, this), offer.start_date ? formatDate(offer.start_date) : 'Без начална дата', \" -\", offer.end_date ? formatDate(offer.end_date) : 'Без крайна дата']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3245,\n                  columnNumber: 25\n                }, this), offer.days_of_week && offer.days_of_week.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-calendar-week\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3254,\n                    columnNumber: 27\n                  }, this), \" \", getDaysOfWeekLabels(offer.days_of_week)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3253,\n                  columnNumber: 25\n                }, this), (offer.start_time || offer.end_time) && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-clock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3260,\n                    columnNumber: 27\n                  }, this), offer.start_time || '00:00', \" - \", offer.end_time || '23:59']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3259,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3243,\n                columnNumber: 21\n              }, this), offer.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"special-offer-description\",\n                children: offer.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3267,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"special-offer-conditions\",\n                children: [offer.min_order > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-shopping-cart\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3273,\n                    columnNumber: 27\n                  }, this), \" \\u041C\\u0438\\u043D\\u0438\\u043C\\u0430\\u043B\\u043D\\u0430 \\u043F\\u043E\\u0440\\u044A\\u0447\\u043A\\u0430: \", offer.min_order.toFixed(2), \" \\u043B\\u0432.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3272,\n                  columnNumber: 25\n                }, this), offer.max_uses > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-ticket-alt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3279,\n                    columnNumber: 27\n                  }, this), \" \\u041C\\u0430\\u043A\\u0441\\u0438\\u043C\\u0430\\u043B\\u0435\\u043D \\u0431\\u0440\\u043E\\u0439 \\u0438\\u0437\\u043F\\u043E\\u043B\\u0437\\u0432\\u0430\\u043D\\u0438\\u044F: \", offer.max_uses]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3278,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3270,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3234,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3227,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"special-offer-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-action-btn toggle-active\",\n              onClick: () => toggleActive(offer.id, offer.active),\n              title: offer.active ? 'Деактивирай' : 'Активирай',\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: `fas fa-${offer.active ? 'toggle-off' : 'toggle-on'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3292,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3287,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-action-btn edit\",\n              onClick: () => handleEdit(offer),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3298,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3294,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"admin-action-btn delete\",\n              onClick: () => handleDelete(offer.id),\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3304,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3300,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3286,\n            columnNumber: 17\n          }, this)]\n        }, offer.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3207,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3205,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2912,\n    columnNumber: 9\n  }, this);\n}\n// Подсекция Галерия\n_s8(AdminSpecialOffersSection, \"eWJoPwtmXSgAd9L3t5ImeaP6lUI=\");\n_c8 = AdminSpecialOffersSection;\nfunction AdminGallerySection({\n  restaurant,\n  supabase\n}) {\n  _s9();\n  const [galleryItems, setGalleryItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    image_url: '',\n    type: 'general',\n    // 'general', 'food', 'interior', 'exterior', 'events'\n    order: 0,\n    is_featured: false\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [filter, setFilter] = useState('all');\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchGallery = async () => {\n      try {\n        setLoading(true);\n        let query = supabase.from('gallery').select('*').eq('restaurant_id', restaurant.id);\n        if (filter !== 'all') {\n          query = query.eq('type', filter);\n        }\n        const {\n          data,\n          error\n        } = await query.order('is_featured', {\n          ascending: false\n        }).order('order', {\n          ascending: true\n        });\n        if (error) throw error;\n        setGalleryItems(data || []);\n      } catch (error) {\n        console.error('Error fetching gallery:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchGallery();\n  }, [restaurant, filter, supabase]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : name === 'order' ? parseInt(value, 10) : value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      description: '',\n      image_url: '',\n      type: 'general',\n      order: galleryItems.length > 0 ? Math.max(...galleryItems.map(item => item.order || 0)) + 1 : 0,\n      is_featured: false\n    });\n    setEditingId(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Проверка на типа файл\n    if (!['image/jpeg', 'image/png', 'image/webp', 'image/gif'].includes(file.type)) {\n      alert('Моля, качете изображение (JPEG, PNG, WEBP, GIF)');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      return;\n    }\n\n    // Проверка на размера (максимум 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      alert('Размерът на файла не може да надвишава 5MB');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      return;\n    }\n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n\n      // Генериране на уникално име на файла\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${restaurant.id}/${Date.now()}.${fileExt}`;\n\n      // Качване на файла в Supabase Storage\n      const {\n        data,\n        error\n      } = await supabase.storage.from('gallery_images').upload(fileName, file, {\n        cacheControl: '3600',\n        upsert: false,\n        onUploadProgress: progress => {\n          setUploadProgress(Math.round(progress.loaded / progress.total * 100));\n        }\n      });\n      if (error) throw error;\n\n      // Получаване на публичен URL на качения файл\n      const {\n        data: urlData\n      } = supabase.storage.from('gallery_images').getPublicUrl(data.path);\n\n      // Актуализиране на формата с URL-а на изображението\n      setFormData({\n        ...formData,\n        image_url: urlData.publicUrl\n      });\n      setIsUploading(false);\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      alert('Възникна грешка при качване на изображението');\n      setIsUploading(false);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.image_url) {\n      alert('Моля, качете или въведете URL на изображение');\n      return;\n    }\n    try {\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id\n      };\n      let result;\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('gallery').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък\n        setGalleryItems(galleryItems.map(item => item.id === editingId ? {\n          ...item,\n          ...result\n        } : item));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('gallery').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне към локалния списък, ако съответства на текущия филтър\n        if (filter === 'all' || filter === result.type) {\n          setGalleryItems([...galleryItems, result]);\n        }\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving gallery item:', error);\n      alert('Възникна грешка при запазване на изображението');\n    }\n  };\n  const handleEdit = item => {\n    setFormData({\n      title: item.title || '',\n      description: item.description || '',\n      image_url: item.image_url,\n      type: item.type || 'general',\n      order: item.order || 0,\n      is_featured: item.is_featured || false\n    });\n    setEditingId(item.id);\n    setShowForm(true);\n  };\n  const handleDelete = async (id, imageUrl) => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това изображение?\")) {\n      return;\n    }\n    try {\n      // Изтриване на записа от базата данни\n      const {\n        error\n      } = await supabase.from('gallery').delete().eq('id', id);\n      if (error) throw error;\n\n      // Опит за изтриване на файла от Storage (ако е в нашия Storage)\n      if (imageUrl.includes('supabase') && imageUrl.includes('/storage/v1/object/public/gallery_images/')) {\n        try {\n          const path = imageUrl.split('/gallery_images/')[1];\n          if (path) {\n            await supabase.storage.from('gallery_images').remove([path]);\n          }\n        } catch (storageError) {\n          console.error('Error deleting file from storage:', storageError);\n          // Не прекъсваме процеса, ако изтриването от storage се провали\n        }\n      }\n\n      // Премахване от локалния списък\n      setGalleryItems(galleryItems.filter(item => item.id !== id));\n    } catch (error) {\n      console.error('Error deleting gallery item:', error);\n      alert('Възникна грешка при изтриване на изображението');\n    }\n  };\n  const toggleFeatured = async (id, currentStatus) => {\n    try {\n      const {\n        error\n      } = await supabase.from('gallery').update({\n        is_featured: !currentStatus\n      }).eq('id', id);\n      if (error) throw error;\n\n      // Актуализиране на локалния списък\n      setGalleryItems(galleryItems.map(item => item.id === id ? {\n        ...item,\n        is_featured: !currentStatus\n      } : item));\n    } catch (error) {\n      console.error('Error updating featured status:', error);\n      alert('Възникна грешка при промяна на статуса');\n    }\n  };\n  const handleFilterChange = newFilter => {\n    setFilter(newFilter);\n  };\n  const getTypeLabel = type => {\n    switch (type) {\n      case 'food':\n        return 'Храна';\n      case 'interior':\n        return 'Интериор';\n      case 'exterior':\n        return 'Екстериор';\n      case 'events':\n        return 'Събития';\n      default:\n        return 'Общи';\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0433\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3588,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0413\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3592,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'all' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('all'),\n          children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3596,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'general' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('general'),\n          children: \"\\u041E\\u0431\\u0449\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3602,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'food' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('food'),\n          children: \"\\u0425\\u0440\\u0430\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3608,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'interior' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('interior'),\n          children: \"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3614,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'exterior' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('exterior'),\n          children: \"\\u0415\\u043A\\u0441\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3620,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'events' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('events'),\n          children: \"\\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3626,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3595,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави изображение'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3634,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3594,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на изображение' : 'Ново изображение'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3648,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0417\\u0430\\u0433\\u043B\\u0430\\u0432\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3651,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"title\",\n            value: formData.title,\n            onChange: handleInputChange,\n            placeholder: \"\\u0417\\u0430\\u0433\\u043B\\u0430\\u0432\\u0438\\u0435 \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\\u0442\\u043E (\\u043D\\u0435\\u0437\\u0430\\u0434\\u044A\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u043D\\u043E)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3652,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3650,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3662,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: formData.description,\n            onChange: handleInputChange,\n            rows: \"2\",\n            placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 (\\u043D\\u0435\\u0437\\u0430\\u0434\\u044A\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u043D\\u043E)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3663,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3661,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3673,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"type\",\n            value: formData.type,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"general\",\n              children: \"\\u041E\\u0431\\u0449\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3680,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"food\",\n              children: \"\\u0425\\u0440\\u0430\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3681,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"interior\",\n              children: \"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3682,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"exterior\",\n              children: \"\\u0415\\u043A\\u0441\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3683,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"events\",\n              children: \"\\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3684,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3674,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3672,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0420\\u0435\\u0434 \\u043D\\u0430 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0432\\u0430\\u043D\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3690,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"order\",\n              value: formData.order,\n              onChange: handleInputChange,\n              min: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3691,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3689,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group checkbox-group\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                name: \"is_featured\",\n                checked: formData.is_featured,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3702,\n                columnNumber: 23\n              }, this), \"Featured \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 (\\u043F\\u043E\\u043A\\u0430\\u0437\\u0432\\u0430 \\u0441\\u0435 \\u043D\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u043D\\u0430\\u0442\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3701,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3700,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3688,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3714,\n            columnNumber: 19\n          }, this), formData.image_url ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: formData.image_url,\n              alt: \"\\u041F\\u0440\\u0435\\u0434\\u0432\\u0430\\u0440\\u0438\\u0442\\u0435\\u043B\\u0435\\u043D \\u043F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3717,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setFormData({\n                ...formData,\n                image_url: ''\n              }),\n              className: \"remove-image-btn\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3723,\n                columnNumber: 25\n              }, this), \" \\u041F\\u0440\\u0435\\u043C\\u0430\\u0445\\u043D\\u0438\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3718,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3716,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleFileChange,\n              disabled: isUploading,\n              ref: fileInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3728,\n              columnNumber: 23\n            }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-progress\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-bar\",\n                style: {\n                  width: `${uploadProgress}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3737,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [uploadProgress, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3741,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3736,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-separator\",\n              children: \"\\u0438\\u043B\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3744,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"url\",\n              name: \"image_url\",\n              value: formData.image_url,\n              onChange: handleInputChange,\n              placeholder: \"\\u0412\\u044A\\u0432\\u0435\\u0434\\u0435\\u0442\\u0435 URL \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\",\n              disabled: isUploading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3745,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3727,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3713,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3758,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            disabled: isUploading,\n            children: editingId ? 'Запази промените' : 'Добави изображение'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3761,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3757,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3649,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3647,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-gallery-container\",\n      children: galleryItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F \\u0432 \\u0442\\u0430\\u0437\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3776,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3775,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-gallery-grid\",\n        children: galleryItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `gallery-item ${item.is_featured ? 'featured' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gallery-image\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image_url,\n              alt: item.title || 'Изображение на галерия'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3783,\n              columnNumber: 19\n            }, this), item.is_featured && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"featured-badge\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3786,\n                columnNumber: 23\n              }, this), \" Featured\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3785,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gallery-overlay\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn view\",\n                onClick: () => window.open(item.image_url, '_blank'),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-search-plus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3794,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3790,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn star\",\n                onClick: () => toggleFeatured(item.id, item.is_featured),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fas fa-${item.is_featured ? 'star' : 'star'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3800,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3796,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn edit\",\n                onClick: () => handleEdit(item),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3806,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3802,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn delete\",\n                onClick: () => handleDelete(item.id, item.image_url),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3812,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3808,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3789,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3782,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gallery-info\",\n            children: [item.title && /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3817,\n              columnNumber: 34\n            }, this), item.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3818,\n              columnNumber: 40\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gallery-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"gallery-type\",\n                children: getTypeLabel(item.type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3820,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"gallery-order\",\n                children: [\"\\u0420\\u0435\\u0434: \", item.order]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3821,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3819,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3816,\n            columnNumber: 17\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3781,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3779,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3773,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3591,\n    columnNumber: 9\n  }, this);\n}\n_s9(AdminGallerySection, \"/yZ0tyXKetUSXmewEiqqcag378w=\");\n_c9 = AdminGallerySection;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"AdminDashboard\");\n$RefreshReg$(_c2, \"AdminAdminsSection\");\n$RefreshReg$(_c3, \"AdminDashboardSection\");\n$RefreshReg$(_c4, \"AdminReservationsSection\");\n$RefreshReg$(_c5, \"AdminTablesSection\");\n$RefreshReg$(_c6, \"AdminMenuSection\");\n$RefreshReg$(_c7, \"AdminEventsSection\");\n$RefreshReg$(_c8, \"AdminSpecialOffersSection\");\n$RefreshReg$(_c9, \"AdminGallerySection\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useParams","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","_s","user","userRole","isSuperAdmin","isRestaurantAdmin","supabase","signOut","section","setSection","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","loading","setLoading","navigate","urlSection","restaurantId","fetchData","restaurantsQuery","from","select","eq","restaurant_id","data","restaurantsData","error","restaurantsError","restaurant","find","r","id","length","console","handleSignOut","changeSection","newSection","changeRestaurant","selected","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","map","name","onClick","AdminDashboardSection","AdminReservationsSection","AdminMenuSection","AdminEventsSection","AdminSpecialOffersSection","AdminTablesSection","AdminGallerySection","AdminAdminsSection","_c","_s2","admins","setAdmins","showForm","setShowForm","formData","setFormData","email","role","phone","editingId","setEditingId","adminRolesData","adminRolesError","in","userIds","admin","user_id","usersData","usersError","log","substring","combinedData","userData","handleInputChange","resetForm","handleSubmit","preventDefault","adminToUpdate","Error","updateRoleError","update","userUpdateError","_restaurants$find","alert","handleEdit","handleDelete","window","confirm","adminToDelete","delete","filter","onSubmit","type","required","disabled","_admin$restaurants","_c2","_s3","stats","setStats","reservationsToday","activeTables","totalTables","upcomingEvents","fetchStats","today","Date","toISOString","split","reservations","reservationsError","tables","tablesError","events","eventsError","gte","reservedTableIds","table_id","Set","size","location","href","address","hours","description","_c3","_s4","setReservations","setFilter","date","time","guests_count","status","setTables","fetchReservations","query","lt","order","ascending","tablesData","handleFilterChange","newFilter","fullData","result","res","insert","reservation","table","table_number","capacity","min","_reservation$tables","_c4","_s5","position_x","position_y","available","notes","fetchTables","checked","parseInt","max","placeholder","style","top","left","width","height","_c5","_s6","categories","setCategories","menuItems","setMenuItems","price","category_id","is_available","image_url","allergens","recommended","showCategoryForm","setShowCategoryForm","categoryFormData","setCategoryFormData","editingCategoryId","setEditingCategoryId","selectedCategory","setSelectedCategory","fetchMenuData","categoriesData","categoriesError","menuData","menuError","parseFloat","handleCategoryInputChange","resetCategoryForm","Math","c","item","handleCategorySubmit","cat","toString","handleEditCategory","category","handleDeleteCategory","itemsInCategory","handleCategoryChange","categoryId","itemCount","step","_item$menu_categories","_item$price","src","alt","menu_categories","toFixed","_c6","_s7","setEvents","title","end_time","seats_available","is_published","is_private","view","setView","fetchEvents","event","isUpcoming","togglePublish","currentStatus","handleViewChange","newView","formatDate","dateStr","parts","rows","slice","_c7","_s8","offers","setOffers","discount_type","discount_value","start_date","end_date","days_of_week","start_time","min_order","max_uses","active","applies_to","applies_to_id","menuCategories","setMenuCategories","lte","or","gt","not","offersData","offersError","itemsData","itemsError","handleDaysOfWeekChange","day","updatedDays","index","indexOf","splice","push","key","offer","isActive","isExpired","toggleActive","getAppliesText","i","getDiscountText","isOfferActive","getDaysOfWeekLabels","days","dayMap","join","undefined","includes","_item$menu_categories2","_item$price2","_c8","_s9","galleryItems","setGalleryItems","is_featured","isUploading","setIsUploading","uploadProgress","setUploadProgress","fileInputRef","fetchGallery","current","handleFileChange","file","files","fileExt","pop","now","storage","upload","cacheControl","upsert","onUploadProgress","progress","round","loaded","total","urlData","getPublicUrl","path","publicUrl","imageUrl","remove","storageError","toggleFeatured","getTypeLabel","accept","ref","open","_c9","$RefreshReg$"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport '../styles/Admin.css';\r\n\r\nfunction AdminDashboard() {\r\n  const { user, userRole, isSuperAdmin, isRestaurantAdmin, supabase, signOut } = useAuth();\r\n  const [section, setSection] = useState('dashboard');\r\n  const [restaurants, setRestaurants] = useState([]);\r\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n  const { section: urlSection, restaurantId } = useParams();\r\n\r\n  // Установяваме секцията от URL параметъра, ако е наличен\r\n  useEffect(() => {\r\n    if (urlSection) {\r\n      setSection(urlSection);\r\n    }\r\n  }, [urlSection]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        if (!user) {\r\n          navigate('/login');\r\n          return;\r\n        }\r\n        \r\n        // Проверка дали потребителят има админ права\r\n        if (!isSuperAdmin() && !isRestaurantAdmin()) {\r\n          navigate('/');\r\n          return;\r\n        }\r\n        \r\n        // Зареждане на ресторантите\r\n        let restaurantsQuery = supabase.from('restaurants').select('*');\r\n        \r\n        // Ако е ресторантски админ, филтрираме само за неговия ресторант\r\n        if (isRestaurantAdmin()) {\r\n          restaurantsQuery = restaurantsQuery.eq('id', userRole.restaurant_id);\r\n        }\r\n        \r\n        const { data: restaurantsData, error: restaurantsError } = await restaurantsQuery;\r\n        \r\n        if (restaurantsError) throw restaurantsError;\r\n        \r\n        setRestaurants(restaurantsData);\r\n        \r\n        // Избиране на ресторант от URL параметъра или по подразбиране\r\n        if (restaurantId) {\r\n          const restaurant = restaurantsData.find(r => r.id === restaurantId);\r\n          if (restaurant) {\r\n            setSelectedRestaurant(restaurant);\r\n          } else if (restaurantsData.length > 0) {\r\n            // Ако не намерим ресторанта от URL, избираме първия наличен\r\n            setSelectedRestaurant(restaurantsData[0]);\r\n          }\r\n        } else if (restaurantsData.length > 0) {\r\n          if (isRestaurantAdmin()) {\r\n            setSelectedRestaurant(restaurantsData[0]);\r\n          } else if (isSuperAdmin()) {\r\n            setSelectedRestaurant(restaurantsData[0]);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading admin data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchData();\r\n  }, [user, userRole, isSuperAdmin, isRestaurantAdmin, navigate, restaurantId, supabase]);\r\n\r\n  const handleSignOut = async () => {\r\n    await signOut();\r\n    navigate('/login');\r\n  };\r\n\r\n  // Функция за смяна на секцията и обновяване на URL\r\n  const changeSection = (newSection) => {\r\n    setSection(newSection);\r\n    if (selectedRestaurant) {\r\n      navigate(`/admin/restaurant/${selectedRestaurant.id}/${newSection}`);\r\n    } else {\r\n      navigate(`/admin/${newSection}`);\r\n    }\r\n  };\r\n\r\n  // Функция за смяна на избрания ресторант и обновяване на URL\r\n  const changeRestaurant = (restaurantId) => {\r\n    const selected = restaurants.find(r => r.id === restaurantId);\r\n    setSelectedRestaurant(selected);\r\n    navigate(`/admin/restaurant/${restaurantId}/${section}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"admin-loading\">Зареждане на администраторски панел...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-container\">\r\n      <div className=\"admin-sidebar\">\r\n        <div className=\"admin-sidebar-header\">\r\n          <h2>Админ панел</h2>\r\n          <p>{isSuperAdmin() ? 'Главен администратор' : 'Ресторантски администратор'}</p>\r\n          \r\n          {isSuperAdmin() && restaurants.length > 0 && (\r\n            <div className=\"restaurant-selector\">\r\n              <label>Избран ресторант:</label>\r\n              <select \r\n                value={selectedRestaurant?.id || ''} \r\n                onChange={(e) => changeRestaurant(e.target.value)}\r\n              >\r\n                {restaurants.map((restaurant) => (\r\n                  <option key={restaurant.id} value={restaurant.id}>\r\n                    {restaurant.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <ul className=\"admin-menu\">\r\n          <li \r\n            className={section === 'dashboard' ? 'active' : ''}\r\n            onClick={() => changeSection('dashboard')}\r\n          >\r\n            <i className=\"fas fa-tachometer-alt\"></i> Табло\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'reservations' ? 'active' : ''}\r\n            onClick={() => changeSection('reservations')}\r\n          >\r\n            <i className=\"fas fa-calendar-check\"></i> Резервации\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'menu' ? 'active' : ''}\r\n            onClick={() => changeSection('menu')}\r\n          >\r\n            <i className=\"fas fa-utensils\"></i> Меню\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'events' ? 'active' : ''}\r\n            onClick={() => changeSection('events')}\r\n          >\r\n            <i className=\"fas fa-calendar-alt\"></i> Събития\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'special_offers' ? 'active' : ''}\r\n            onClick={() => changeSection('special_offers')}\r\n          >\r\n            <i className=\"fas fa-percentage\"></i> Специални предложения\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'tables' ? 'active' : ''}\r\n            onClick={() => changeSection('tables')}\r\n          >\r\n            <i className=\"fas fa-chair\"></i> Управление на маси\r\n          </li>\r\n\r\n          <li \r\n            className={section === 'gallery' ? 'active' : ''}\r\n            onClick={() => changeSection('gallery')}\r\n          >\r\n            <i className=\"fas fa-images\"></i> Галерия и изображения\r\n          </li>\r\n          \r\n          {isSuperAdmin() && (\r\n            <>\r\n              <li \r\n                className={section === 'restaurants' ? 'active' : ''}\r\n                onClick={() => changeSection('restaurants')}\r\n              >\r\n                <i className=\"fas fa-store\"></i> Управление на ресторанти\r\n              </li>\r\n              <li \r\n                className={section === 'admins' ? 'active' : ''}\r\n                onClick={() => changeSection('admins')}\r\n              >\r\n                <i className=\"fas fa-users-cog\"></i> Администратори\r\n              </li>\r\n              <li \r\n                className={section === 'reports' ? 'active' : ''}\r\n                onClick={() => changeSection('reports')}\r\n              >\r\n                <i className=\"fas fa-chart-bar\"></i> Отчети и статистика\r\n              </li>\r\n            </>\r\n          )}\r\n          \r\n          <li onClick={handleSignOut}>\r\n            <i className=\"fas fa-sign-out-alt\"></i> Изход\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      \r\n      <div className=\"admin-content\">\r\n        {section === 'dashboard' && (\r\n          <AdminDashboardSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'reservations' && (\r\n          <AdminReservationsSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'menu' && (\r\n          <AdminMenuSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'events' && (\r\n          <AdminEventsSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'special_offers' && (\r\n          <AdminSpecialOffersSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'tables' && (\r\n          <AdminTablesSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'gallery' && (\r\n          <AdminGallerySection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'restaurants' && isSuperAdmin() && (\r\n          <div>\r\n            <h1>Управление на ресторанти</h1>\r\n            <p>Тук ще бъде секцията за управление на ресторанти</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'admins' && isSuperAdmin() && (\r\n  <AdminAdminsSection supabase={supabase} />\r\n)}\r\n\r\n        {section === 'reports' && isSuperAdmin() && (\r\n          <div>\r\n            <h1>Отчети и статистика</h1>\r\n            <p>Тук ще бъде секцията за отчети и статистика</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// В AdminDashboard.jsx след другите секционни компоненти (AdminGallerySection и т.н.) \r\n// и преди export default AdminDashboard\r\n\r\nfunction AdminAdminsSection({ supabase }) {\r\n  const [admins, setAdmins] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    role: 'restaurant_admin',\r\n    restaurant_id: '',\r\n    name: '',\r\n    phone: ''\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [restaurants, setRestaurants] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [supabase]);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Зареждане на администратори\r\n      const { data: adminRolesData, error: adminRolesError } = await supabase\r\n        .from('user_roles')\r\n        .select(`\r\n          id,\r\n          user_id,\r\n          role,\r\n          restaurant_id,\r\n          restaurants:restaurant_id (id, name)\r\n        `)\r\n        .in('role', ['super_admin', 'restaurant_admin']);\r\n      \r\n      if (adminRolesError) throw adminRolesError;\r\n      \r\n      // Зареждане на потребителски данни за всеки администратор\r\n      const userIds = adminRolesData.map(admin => admin.user_id);\r\n      \r\n      const { data: usersData, error: usersError } = await supabase\r\n        .from('users') // Или друга таблица, където съхранявате допълнителна информация за потребителите\r\n        .select('id, email, name, phone')\r\n        .in('id', userIds);\r\n      \r\n      if (usersError) {\r\n        // Ако няма таблица users, използваме данните от auth.users\r\n        console.log('Грешка при зареждане от users, опитваме от auth.users');\r\n        \r\n        // Комбиниране на данните без допълнителна информация\r\n        setAdmins(adminRolesData.map(admin => ({\r\n          ...admin,\r\n          email: 'Потребител ' + admin.user_id.substring(0, 8), // Просто примерен заместител\r\n          name: '',\r\n          phone: ''\r\n        })));\r\n      } else {\r\n        // Комбиниране на данните от двете заявки\r\n        const combinedData = adminRolesData.map(admin => {\r\n          const userData = usersData.find(user => user.id === admin.user_id) || {};\r\n          return {\r\n            ...admin,\r\n            email: userData.email || '',\r\n            name: userData.name || '',\r\n            phone: userData.phone || ''\r\n          };\r\n        });\r\n        \r\n        setAdmins(combinedData);\r\n      }\r\n      \r\n      // Зареждане на всички ресторанти за формата\r\n      const { data: restaurantsData, error: restaurantsError } = await supabase\r\n        .from('restaurants')\r\n        .select('id, name');\r\n      \r\n      if (restaurantsError) throw restaurantsError;\r\n      \r\n      setRestaurants(restaurantsData || []);\r\n    } catch (error) {\r\n      console.error('Error fetching admin data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      email: '',\r\n      role: 'restaurant_admin',\r\n      restaurant_id: '',\r\n      name: '',\r\n      phone: ''\r\n    });\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      if (editingId) {\r\n        // Редактиране на съществуващ администратор\r\n        const adminToUpdate = admins.find(admin => admin.id === editingId);\r\n        if (!adminToUpdate) throw new Error('Администраторът не е намерен');\r\n        \r\n        // Обновяване на ролята и ресторанта в user_roles\r\n        const { error: updateRoleError } = await supabase\r\n          .from('user_roles')\r\n          .update({\r\n            role: formData.role,\r\n            restaurant_id: formData.role === 'restaurant_admin' ? formData.restaurant_id : null\r\n          })\r\n          .eq('id', editingId);\r\n        \r\n        if (updateRoleError) throw updateRoleError;\r\n        \r\n        // Обновяване на потребителската информация, ако има таблица users\r\n        try {\r\n          await supabase\r\n            .from('users')\r\n            .update({\r\n              name: formData.name,\r\n              phone: formData.phone\r\n            })\r\n            .eq('id', adminToUpdate.user_id);\r\n        } catch (userUpdateError) {\r\n          console.log('Не може да се обнови потребителската информация:', userUpdateError);\r\n        }\r\n        \r\n        // Обновяване на локалния списък\r\n        setAdmins(admins.map(admin => {\r\n          if (admin.id === editingId) {\r\n            return {\r\n              ...admin,\r\n              role: formData.role,\r\n              restaurant_id: formData.role === 'restaurant_admin' ? formData.restaurant_id : null,\r\n              name: formData.name,\r\n              phone: formData.phone,\r\n              restaurants: formData.role === 'restaurant_admin' \r\n                ? { id: formData.restaurant_id, name: restaurants.find(r => r.id === formData.restaurant_id)?.name } \r\n                : null\r\n            };\r\n          }\r\n          return admin;\r\n        }));\r\n      } else {\r\n        // Създаване на нов администратор (по-сложен процес, изисква създаване на потребител)\r\n        alert('Функционалността за добавяне на нови администратори е в процес на разработка. Моля, създайте потребител първо и след това задайте роля от таблицата.');\r\n        return;\r\n      }\r\n      \r\n      resetForm();\r\n      setShowForm(false);\r\n    } catch (error) {\r\n      console.error('Error saving admin:', error);\r\n      alert('Възникна грешка при запазване на администратора');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (admin) => {\r\n    setFormData({\r\n      email: admin.email || '',\r\n      role: admin.role || 'restaurant_admin',\r\n      restaurant_id: admin.restaurant_id || '',\r\n      name: admin.name || '',\r\n      phone: admin.phone || ''\r\n    });\r\n    setEditingId(admin.id);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Сигурни ли сте, че искате да премахнете администраторските права на този потребител?\")) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const adminToDelete = admins.find(admin => admin.id === id);\r\n      if (!adminToDelete) throw new Error('Администраторът не е намерен');\r\n      \r\n      // Премахване на администраторската роля\r\n      const { error } = await supabase\r\n        .from('user_roles')\r\n        .delete()\r\n        .eq('id', id);\r\n      \r\n      if (error) throw error;\r\n      \r\n      // Обновяване на локалния списък\r\n      setAdmins(admins.filter(admin => admin.id !== id));\r\n    } catch (error) {\r\n      console.error('Error deleting admin:', error);\r\n      alert('Възникна грешка при премахване на администратора');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Зареждане на администратори...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Управление на администратори</h1>\r\n      \r\n      <div className=\"admin-controls\">\r\n        <button \r\n          className=\"admin-add-btn\"\r\n          onClick={() => {\r\n            resetForm();\r\n            setShowForm(!showForm);\r\n          }}\r\n        >\r\n          {showForm ? 'Отказ' : 'Редактирай администратор'}\r\n        </button>\r\n      </div>\r\n      \r\n      {showForm && (\r\n        <div className=\"admin-form-container\">\r\n          <h2>{editingId ? 'Редактиране на администратор' : 'Нов администратор'}</h2>\r\n          <form onSubmit={handleSubmit} className=\"admin-form\">\r\n            <div className=\"form-group\">\r\n              <label>Имейл</label>\r\n              <input \r\n                type=\"email\" \r\n                name=\"email\" \r\n                value={formData.email} \r\n                onChange={handleInputChange} \r\n                required \r\n                disabled={editingId} // Не позволяваме промяна на имейла при редактиране\r\n              />\r\n              {editingId && <small>Имейлът не може да бъде променен</small>}\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Име</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={formData.name} \r\n                onChange={handleInputChange} \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Телефон</label>\r\n              <input \r\n                type=\"tel\" \r\n                name=\"phone\" \r\n                value={formData.phone} \r\n                onChange={handleInputChange} \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Роля</label>\r\n              <select \r\n                name=\"role\" \r\n                value={formData.role} \r\n                onChange={handleInputChange} \r\n                required\r\n              >\r\n                <option value=\"super_admin\">Главен администратор</option>\r\n                <option value=\"restaurant_admin\">Ресторантски администратор</option>\r\n              </select>\r\n            </div>\r\n            \r\n            {formData.role === 'restaurant_admin' && (\r\n              <div className=\"form-group\">\r\n                <label>Ресторант</label>\r\n                <select \r\n                  name=\"restaurant_id\" \r\n                  value={formData.restaurant_id} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"\">Изберете ресторант</option>\r\n                  {restaurants.map(restaurant => (\r\n                    <option key={restaurant.id} value={restaurant.id}>\r\n                      {restaurant.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"form-buttons\">\r\n              <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                Отказ\r\n              </button>\r\n              <button type=\"submit\" className=\"admin-submit-btn\">\r\n                {editingId ? 'Запази промените' : 'Добави администратор'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"admin-table-container\">\r\n        <h2>Списък с администратори</h2>\r\n        {admins.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма намерени администратори.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Имейл</th>\r\n                <th>Име</th>\r\n                <th>Телефон</th>\r\n                <th>Роля</th>\r\n                <th>Ресторант</th>\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {admins.map(admin => (\r\n                <tr key={admin.id}>\r\n                  <td>{admin.email}</td>\r\n                  <td>{admin.name || '-'}</td>\r\n                  <td>{admin.phone || '-'}</td>\r\n                  <td>\r\n                    <span className={`role-badge ${admin.role}`}>\r\n                      {admin.role === 'super_admin' ? 'Главен администратор' : 'Ресторантски администратор'}\r\n                    </span>\r\n                  </td>\r\n                  <td>{admin.restaurants?.name || '-'}</td>\r\n                  <td>\r\n                    <button \r\n                      className=\"admin-action-btn edit\"\r\n                      onClick={() => handleEdit(admin)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"admin-action-btn delete\"\r\n                      onClick={() => handleDelete(admin.id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Подсекция Табло\r\nfunction AdminDashboardSection({ restaurant, supabase }) {\r\n  const [stats, setStats] = useState({\r\n    reservationsToday: 0,\r\n    activeTables: 0,\r\n    totalTables: 0,\r\n    upcomingEvents: 0\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (!restaurant) return;\r\n    \r\n    const fetchStats = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Получаване на днешната дата във формат YYYY-MM-DD\r\n        const today = new Date().toISOString().split('T')[0];\r\n        \r\n        // Заявка за резервации днес\r\n        const { data: reservations, error: reservationsError } = await supabase\r\n          .from('reservations')\r\n          .select('*')\r\n          .eq('restaurant_id', restaurant.id)\r\n          .eq('date', today)\r\n          .in('status', ['confirmed', 'pending']);\r\n        \r\n        if (reservationsError) throw reservationsError;\r\n        \r\n        // Заявка за всички маси в ресторанта\r\n        const { data: tables, error: tablesError } = await supabase\r\n          .from('tables')\r\n          .select('*')\r\n          .eq('restaurant_id', restaurant.id);\r\n        \r\n        if (tablesError) throw tablesError;\r\n        \r\n        // Заявка за предстоящи събития\r\n        const { data: events, error: eventsError } = await supabase\r\n          .from('events')\r\n          .select('*')\r\n          .eq('restaurant_id', restaurant.id)\r\n          .gte('date', today);\r\n        \r\n        if (eventsError) throw eventsError;\r\n        \r\n        // Изчисляване на заетите маси\r\n        const reservedTableIds = reservations.map(r => r.table_id);\r\n        const activeTables = new Set(reservedTableIds).size;\r\n        \r\n        setStats({\r\n          reservationsToday: reservations.length,\r\n          activeTables,\r\n          totalTables: tables.length,\r\n          upcomingEvents: events ? events.length : 0\r\n        });\r\n      } catch (error) {\r\n        console.error('Error fetching dashboard stats:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchStats();\r\n  }, [restaurant, supabase]);\r\n\r\n  if (loading) {\r\n    return <div>Зареждане на статистика...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Табло: {restaurant?.name}</h1>\r\n      <div className=\"admin-stats-grid\">\r\n        <div className=\"admin-stat-card\">\r\n          <h3>Резервации днес</h3>\r\n          <p className=\"stat\">{stats.reservationsToday}</p>\r\n        </div>\r\n        \r\n        <div className=\"admin-stat-card\">\r\n          <h3>Активни маси</h3>\r\n          <p className=\"stat\">{stats.activeTables}/{stats.totalTables}</p>\r\n        </div>\r\n        \r\n        <div className=\"admin-stat-card\">\r\n          <h3>Предстоящи събития</h3>\r\n          <p className=\"stat\">{stats.upcomingEvents}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"quick-actions\">\r\n        <h2>Бързи действия</h2>\r\n        <div className=\"admin-buttons-grid\">\r\n          <button className=\"admin-action-btn\" onClick={() => window.location.href = `/admin/restaurant/${restaurant?.id}/reservations`}>\r\n            <i className=\"fas fa-plus\"></i> Нова резервация\r\n          </button>\r\n          <button className=\"admin-action-btn\" onClick={() => window.location.href = `/admin/restaurant/${restaurant?.id}/events`}>\r\n            <i className=\"fas fa-calendar-plus\"></i> Добави събитие\r\n          </button>\r\n          <button className=\"admin-action-btn\" onClick={() => window.location.href = `/admin/restaurant/${restaurant?.id}/menu`}>\r\n            <i className=\"fas fa-utensils\"></i> Управление на меню\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"admin-info-section\">\r\n        <h2>Информация за ресторанта</h2>\r\n        {restaurant ? (\r\n          <div className=\"restaurant-details\">\r\n            <p><strong>Име:</strong> {restaurant.name}</p>\r\n            <p><strong>Адрес:</strong> {restaurant.address || 'Не е зададен'}</p>\r\n            <p><strong>Телефон:</strong> {restaurant.phone || 'Не е зададен'}</p>\r\n            <p><strong>Работно време:</strong> {restaurant.hours || 'Не е зададено'}</p>\r\n            {restaurant.description && (\r\n              <p><strong>Описание:</strong> {restaurant.description}</p>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <p>Няма избран ресторант</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n// Подсекция Резервации\r\nfunction AdminReservationsSection({ restaurant, supabase }) {\r\n    const [reservations, setReservations] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('upcoming');\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      date: '',\r\n      time: '',\r\n      table_id: '',\r\n      name: '',\r\n      phone: '',\r\n      email: '',\r\n      guests_count: 2,\r\n      status: 'confirmed'\r\n    });\r\n    const [tables, setTables] = useState([]);\r\n    const [editingId, setEditingId] = useState(null);\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchReservations = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Получаване на днешната дата\r\n          const today = new Date().toISOString().split('T')[0];\r\n          \r\n          // Съставяне на заявката според филтъра\r\n          let query = supabase\r\n            .from('reservations')\r\n            .select(`\r\n              *,\r\n              tables:table_id (table_number, capacity)\r\n            `)\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (filter === 'upcoming') {\r\n            query = query.gte('date', today);\r\n          } else if (filter === 'past') {\r\n            query = query.lt('date', today);\r\n          }\r\n          \r\n          // Изпълнение на заявката\r\n          const { data, error } = await query.order('date', { ascending: true });\r\n          \r\n          if (error) throw error;\r\n          \r\n          setReservations(data || []);\r\n          \r\n          // Зареждане на масите за формата\r\n          const { data: tablesData, error: tablesError } = await supabase\r\n            .from('tables')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (tablesError) throw tablesError;\r\n          \r\n          setTables(tablesData || []);\r\n        } catch (error) {\r\n          console.error('Error fetching reservations:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchReservations();\r\n    }, [restaurant, filter, supabase]);\r\n  \r\n    const handleFilterChange = (newFilter) => {\r\n      setFilter(newFilter);\r\n    };\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        date: '',\r\n        time: '',\r\n        table_id: '',\r\n        name: '',\r\n        phone: '',\r\n        email: '',\r\n        guests_count: 2,\r\n        status: 'confirmed'\r\n      });\r\n      setEditingId(null);\r\n    };\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      try {\r\n        const fullData = {\r\n          ...formData,\r\n          restaurant_id: restaurant.id\r\n        };\r\n        \r\n        let result;\r\n        \r\n        // Актуализиране на съществуваща резервация или създаване на нова\r\n        if (editingId) {\r\n          const { data, error } = await supabase\r\n            .from('reservations')\r\n            .update(fullData)\r\n            .eq('id', editingId)\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          // Актуализиране на локалния списък с резервации\r\n          setReservations(reservations.map(res => \r\n            res.id === editingId ? { ...res, ...result } : res\r\n          ));\r\n        } else {\r\n          const { data, error } = await supabase\r\n            .from('reservations')\r\n            .insert([fullData])\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          // Добавяне на новата резервация към локалния списък\r\n          setReservations([...reservations, result]);\r\n        }\r\n        \r\n        resetForm();\r\n        setShowForm(false);\r\n      } catch (error) {\r\n        console.error('Error saving reservation:', error);\r\n        alert('Възникна грешка при запазване на резервацията');\r\n      }\r\n    };\r\n  \r\n    const handleEdit = (reservation) => {\r\n      // Зареждане на формата с данните от избраната резервация\r\n      setFormData({\r\n        date: reservation.date,\r\n        time: reservation.time,\r\n        table_id: reservation.table_id,\r\n        name: reservation.name,\r\n        phone: reservation.phone,\r\n        email: reservation.email,\r\n        guests_count: reservation.guests_count,\r\n        status: reservation.status\r\n      });\r\n      setEditingId(reservation.id);\r\n      setShowForm(true);\r\n    };\r\n  \r\n    const handleDelete = async (id) => {\r\n      if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази резервация?\")) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        const { error } = await supabase\r\n          .from('reservations')\r\n          .delete()\r\n          .eq('id', id);\r\n        \r\n        if (error) throw error;\r\n        \r\n        // Премахване на изтритата резервация от локалния списък\r\n        setReservations(reservations.filter(res => res.id !== id));\r\n      } catch (error) {\r\n        console.error('Error deleting reservation:', error);\r\n        alert('Възникна грешка при изтриване на резервацията');\r\n      }\r\n    };\r\n  \r\n    if (loading) {\r\n      return <div>Зареждане на резервации...</div>;\r\n    }\r\n  \r\n    return (\r\n      <div>\r\n        <h1>Резервации: {restaurant?.name}</h1>\r\n        \r\n        <div className=\"admin-controls\">\r\n          <div className=\"admin-filters\">\r\n            <button \r\n              className={`admin-filter-btn ${filter === 'upcoming' ? 'active' : ''}`} \r\n              onClick={() => handleFilterChange('upcoming')}\r\n            >\r\n              Предстоящи\r\n            </button>\r\n            <button \r\n              className={`admin-filter-btn ${filter === 'past' ? 'active' : ''}`} \r\n              onClick={() => handleFilterChange('past')}\r\n            >\r\n              Минали\r\n            </button>\r\n            <button \r\n              className={`admin-filter-btn ${filter === 'all' ? 'active' : ''}`} \r\n              onClick={() => handleFilterChange('all')}\r\n            >\r\n              Всички\r\n            </button>\r\n          </div>\r\n          \r\n          <button \r\n            className=\"admin-add-btn\"\r\n            onClick={() => {\r\n              resetForm();\r\n              setShowForm(!showForm);\r\n            }}\r\n          >\r\n            {showForm ? 'Отказ' : 'Добави резервация'}\r\n          </button>\r\n        </div>\r\n        \r\n        {showForm && (\r\n          <div className=\"admin-form-container\">\r\n            <h2>{editingId ? 'Редактиране на резервация' : 'Нова резервация'}</h2>\r\n            <form onSubmit={handleSubmit} className=\"admin-form\">\r\n              <div className=\"form-group\">\r\n                <label>Дата</label>\r\n                <input \r\n                  type=\"date\" \r\n                  name=\"date\" \r\n                  value={formData.date} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Час</label>\r\n                <input \r\n                  type=\"time\" \r\n                  name=\"time\" \r\n                  value={formData.time} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Маса</label>\r\n                <select \r\n                  name=\"table_id\" \r\n                  value={formData.table_id} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"\">Изберете маса</option>\r\n                  {tables.map(table => (\r\n                    <option key={table.id} value={table.id}>\r\n                      Маса {table.table_number} ({table.capacity} места)\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Име</label>\r\n                <input \r\n                  type=\"text\" \r\n                  name=\"name\" \r\n                  value={formData.name} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Телефон</label>\r\n                <input \r\n                  type=\"tel\" \r\n                  name=\"phone\" \r\n                  value={formData.phone} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Email</label>\r\n                <input \r\n                  type=\"email\" \r\n                  name=\"email\" \r\n                  value={formData.email} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Брой гости</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"guests_count\" \r\n                  value={formData.guests_count} \r\n                  onChange={handleInputChange} \r\n                  min=\"1\" \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Статус</label>\r\n                <select \r\n                  name=\"status\" \r\n                  value={formData.status} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"confirmed\">Потвърдена</option>\r\n                  <option value=\"pending\">Чакаща</option>\r\n                  <option value=\"cancelled\">Отказана</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-buttons\">\r\n                <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                  Отказ\r\n                </button>\r\n                <button type=\"submit\" className=\"admin-submit-btn\">\r\n                  {editingId ? 'Запази промените' : 'Добави резервация'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"admin-table-container\">\r\n          {reservations.length === 0 ? (\r\n            <div className=\"admin-no-data\">\r\n              <p>Няма намерени резервации.</p>\r\n            </div>\r\n          ) : (\r\n            <table className=\"admin-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Дата</th>\r\n                  <th>Час</th>\r\n                  <th>Маса</th>\r\n                  <th>Клиент</th>\r\n                  <th>Телефон</th>\r\n                  <th>Гости</th>\r\n                  <th>Статус</th>\r\n                  <th>Действия</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {reservations.map(reservation => (\r\n                  <tr key={reservation.id} className={`status-${reservation.status}`}>\r\n                    <td>{reservation.date}</td>\r\n                    <td>{reservation.time}</td>\r\n                    <td>\r\n                      {reservation.tables?.table_number || 'Неизвестно'}\r\n                    </td>\r\n                    <td>{reservation.name}</td>\r\n                    <td>{reservation.phone}</td>\r\n                    <td>{reservation.guests_count}</td>\r\n                    <td>\r\n                      <span className={`status-badge ${reservation.status}`}>\r\n                        {reservation.status === 'confirmed' ? 'Потвърдена' : \r\n                         reservation.status === 'pending' ? 'Чакаща' : 'Отказана'}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <button \r\n                        className=\"admin-action-btn edit\"\r\n                        onClick={() => handleEdit(reservation)}\r\n                      >\r\n                        <i className=\"fas fa-edit\"></i>\r\n                      </button>\r\n                      <button \r\n                        className=\"admin-action-btn delete\"\r\n                        onClick={() => handleDelete(reservation.id)}\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  // Подсекция управление на маси\r\nfunction AdminTablesSection({ restaurant, supabase }) {\r\n    const [tables, setTables] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [formData, setFormData] = useState({\r\n      table_number: '',\r\n      capacity: 2,\r\n      position_x: 50,\r\n      position_y: 50,\r\n      available: true,\r\n      notes: ''\r\n    });\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchTables = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          const { data, error } = await supabase\r\n            .from('tables')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id)\r\n            .order('table_number', { ascending: true });\r\n          \r\n          if (error) throw error;\r\n          \r\n          setTables(data || []);\r\n        } catch (error) {\r\n          console.error('Error fetching tables:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchTables();\r\n    }, [restaurant, supabase]);\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                type === 'number' ? parseInt(value, 10) : value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        table_number: '',\r\n        capacity: 2,\r\n        position_x: 50,\r\n        position_y: 50,\r\n        available: true,\r\n        notes: ''\r\n      });\r\n      setEditingId(null);\r\n    };\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      try {\r\n        const fullData = {\r\n          ...formData,\r\n          restaurant_id: restaurant.id\r\n        };\r\n        \r\n        let result;\r\n        \r\n        if (editingId) {\r\n          const { data, error } = await supabase\r\n            .from('tables')\r\n            .update(fullData)\r\n            .eq('id', editingId)\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          setTables(tables.map(table => \r\n            table.id === editingId ? { ...table, ...result } : table\r\n          ));\r\n        } else {\r\n          const { data, error } = await supabase\r\n            .from('tables')\r\n            .insert([fullData])\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          setTables([...tables, result]);\r\n        }\r\n        \r\n        resetForm();\r\n        setShowForm(false);\r\n      } catch (error) {\r\n        console.error('Error saving table:', error);\r\n        alert('Възникна грешка при запазване на масата');\r\n      }\r\n    };\r\n  \r\n    const handleEdit = (table) => {\r\n      setFormData({\r\n        table_number: table.table_number,\r\n        capacity: table.capacity,\r\n        position_x: table.position_x,\r\n        position_y: table.position_y,\r\n        available: table.available,\r\n        notes: table.notes || ''\r\n      });\r\n      setEditingId(table.id);\r\n      setShowForm(true);\r\n    };\r\n  \r\n    const handleDelete = async (id) => {\r\n      if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази маса?\")) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        const { error } = await supabase\r\n          .from('tables')\r\n          .delete()\r\n          .eq('id', id);\r\n        \r\n        if (error) throw error;\r\n        \r\n        setTables(tables.filter(table => table.id !== id));\r\n      } catch (error) {\r\n        console.error('Error deleting table:', error);\r\n        alert('Възникна грешка при изтриване на масата');\r\n      }\r\n    };\r\n  \r\n    if (loading) {\r\n      return <div>Зареждане на маси...</div>;\r\n    }\r\n  \r\n    return (\r\n      <div>\r\n        <h1>Управление на маси: {restaurant?.name}</h1>\r\n        \r\n        <div className=\"admin-controls\">\r\n          <button \r\n            className=\"admin-add-btn\"\r\n            onClick={() => {\r\n              resetForm();\r\n              setShowForm(!showForm);\r\n            }}\r\n          >\r\n            {showForm ? 'Отказ' : 'Добави нова маса'}\r\n          </button>\r\n        </div>\r\n        \r\n        {showForm && (\r\n          <div className=\"admin-form-container\">\r\n            <h2>{editingId ? 'Редактиране на маса' : 'Нова маса'}</h2>\r\n            <form onSubmit={handleSubmit} className=\"admin-form\">\r\n              <div className=\"form-group\">\r\n                <label>Номер на маса</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"table_number\" \r\n                  value={formData.table_number} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                  min=\"1\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Капацитет (брой места)</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"capacity\" \r\n                  value={formData.capacity} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                  min=\"1\"\r\n                  max=\"20\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Позиция X (в пиксели)</label>\r\n                <input \r\n                  type=\"range\" \r\n                  name=\"position_x\" \r\n                  value={formData.position_x} \r\n                  onChange={handleInputChange} \r\n                  min=\"0\" \r\n                  max=\"600\" \r\n                />\r\n                <span>{formData.position_x}px</span>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Позиция Y (в пиксели)</label>\r\n                <input \r\n                  type=\"range\" \r\n                  name=\"position_y\" \r\n                  value={formData.position_y} \r\n                  onChange={handleInputChange} \r\n                  min=\"0\" \r\n                  max=\"400\" \r\n                />\r\n                <span>{formData.position_y}px</span>\r\n              </div>\r\n              \r\n              <div className=\"form-group checkbox-group\">\r\n                <label>\r\n                  <input \r\n                    type=\"checkbox\" \r\n                    name=\"available\" \r\n                    checked={formData.available} \r\n                    onChange={handleInputChange} \r\n                  />\r\n                  Активна маса\r\n                </label>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Бележки</label>\r\n                <textarea \r\n                  name=\"notes\" \r\n                  value={formData.notes} \r\n                  onChange={handleInputChange} \r\n                  placeholder=\"Допълнителна информация за масата\" \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-buttons\">\r\n                <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                  Отказ\r\n                </button>\r\n                <button type=\"submit\" className=\"admin-submit-btn\">\r\n                  {editingId ? 'Запази промените' : 'Добави маса'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"restaurant-layout-container\">\r\n          <h3>Изглед на подредбата</h3>\r\n          <div className=\"restaurant-layout-preview\">\r\n            {tables.map(table => (\r\n              <div\r\n                key={table.id}\r\n                className={`table-preview ${table.available ? 'available' : 'unavailable'}`}\r\n                style={{\r\n                  top: `${table.position_y}px`,\r\n                  left: `${table.position_x}px`,\r\n                  width: `${table.capacity > 2 ? 80 : 60}px`,\r\n                  height: `${table.capacity > 2 ? 80 : 60}px`,\r\n                }}\r\n                onClick={() => handleEdit(table)}\r\n              >\r\n                <span className=\"table-number\">{table.table_number}</span>\r\n                <span className=\"table-capacity\">{table.capacity} места</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"admin-table-container\">\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Номер</th>\r\n                <th>Капацитет</th>\r\n                <th>Статус</th>\r\n                <th>Бележки</th>\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {tables.map(table => (\r\n                <tr key={table.id}>\r\n                  <td>{table.table_number}</td>\r\n                  <td>{table.capacity} места</td>\r\n                  <td>\r\n                    <span className={`status-badge ${table.available ? 'active' : 'inactive'}`}>\r\n                      {table.available ? 'Активна' : 'Неактивна'}\r\n                    </span>\r\n                  </td>\r\n                  <td>{table.notes || '-'}</td>\r\n                  <td>\r\n                    <button \r\n                      className=\"admin-action-btn edit\"\r\n                      onClick={() => handleEdit(table)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"admin-action-btn delete\"\r\n                      onClick={() => handleDelete(table.id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  // Подсекция Меню\r\nfunction AdminMenuSection({ restaurant, supabase }) {\r\n    const [categories, setCategories] = useState([]);\r\n    const [menuItems, setMenuItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      name: '',\r\n      description: '',\r\n      price: '',\r\n      category_id: '',\r\n      is_available: true,\r\n      image_url: '',\r\n      allergens: '',\r\n      recommended: false\r\n    });\r\n    const [showCategoryForm, setShowCategoryForm] = useState(false);\r\n    const [categoryFormData, setCategoryFormData] = useState({\r\n      name: '',\r\n      order: 0\r\n    });\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [editingCategoryId, setEditingCategoryId] = useState(null);\r\n    const [selectedCategory, setSelectedCategory] = useState('all');\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchMenuData = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Зареждане на категории\r\n          const { data: categoriesData, error: categoriesError } = await supabase\r\n            .from('menu_categories')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id)\r\n            .order('order', { ascending: true });\r\n          \r\n          if (categoriesError) throw categoriesError;\r\n          setCategories(categoriesData || []);\r\n          \r\n          // Зареждане на продукти от менюто\r\n          let query = supabase\r\n            .from('menu_items')\r\n            .select(`\r\n              *,\r\n              menu_categories:category_id (id, name)\r\n            `)\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (selectedCategory !== 'all') {\r\n            query = query.eq('category_id', selectedCategory);\r\n          }\r\n          \r\n          const { data: menuData, error: menuError } = await query\r\n            .order('name', { ascending: true });\r\n          \r\n          if (menuError) throw menuError;\r\n          setMenuItems(menuData || []);\r\n        } catch (error) {\r\n          console.error('Error fetching menu data:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchMenuData();\r\n    }, [restaurant, supabase, selectedCategory]);\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                type === 'number' ? parseFloat(value) : value\r\n      });\r\n    };\r\n  \r\n    const handleCategoryInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setCategoryFormData({\r\n        ...categoryFormData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                name === 'order' ? parseInt(value, 10) : value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        category_id: '',\r\n        is_available: true,\r\n        image_url: '',\r\n        allergens: '',\r\n        recommended: false\r\n      });\r\n      setEditingId(null);\r\n    };\r\n  \r\n    const resetCategoryForm = () => {\r\n      setCategoryFormData({\r\n        name: '',\r\n        order: categories.length > 0 ? Math.max(...categories.map(c => c.order)) + 1 : 0\r\n      });\r\n      setEditingCategoryId(null);\r\n    };\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      try {\r\n        const fullData = {\r\n          ...formData,\r\n          restaurant_id: restaurant.id,\r\n          price: parseFloat(formData.price)\r\n        };\r\n        \r\n        let result;\r\n        \r\n        if (editingId) {\r\n          const { data, error } = await supabase\r\n            .from('menu_items')\r\n            .update(fullData)\r\n            .eq('id', editingId)\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          // Актуализиране на локалния списък\r\n          setMenuItems(menuItems.map(item => \r\n            item.id === editingId ? { ...item, ...result } : item\r\n          ));\r\n        } else {\r\n          const { data, error } = await supabase\r\n            .from('menu_items')\r\n            .insert([fullData])\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          // Добавяне към локалния списък\r\n          setMenuItems([...menuItems, result]);\r\n        }\r\n        \r\n        resetForm();\r\n        setShowForm(false);\r\n      } catch (error) {\r\n        console.error('Error saving menu item:', error);\r\n        alert('Възникна грешка при запазване на продукта');\r\n      }\r\n    };\r\n    const handleCategorySubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n          const fullData = {\r\n            ...categoryFormData,\r\n            restaurant_id: restaurant.id\r\n          };\r\n          \r\n          let result;\r\n          \r\n          if (editingCategoryId) {\r\n            const { data, error } = await supabase\r\n              .from('menu_categories')\r\n              .update(fullData)\r\n              .eq('id', editingCategoryId)\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Актуализиране на локалния списък\r\n            setCategories(categories.map(cat => \r\n              cat.id === editingCategoryId ? { ...cat, ...result } : cat\r\n            ));\r\n          } else {\r\n            const { data, error } = await supabase\r\n              .from('menu_categories')\r\n              .insert([fullData])\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Добавяне към локалния списък\r\n            setCategories([...categories, result]);\r\n          }\r\n          \r\n          resetCategoryForm();\r\n          setShowCategoryForm(false);\r\n        } catch (error) {\r\n          console.error('Error saving category:', error);\r\n          alert('Възникна грешка при запазване на категорията');\r\n        }\r\n      };\r\n    \r\n      const handleEdit = (item) => {\r\n        setFormData({\r\n          name: item.name,\r\n          description: item.description || '',\r\n          price: item.price.toString(),\r\n          category_id: item.category_id,\r\n          is_available: item.is_available,\r\n          image_url: item.image_url || '',\r\n          allergens: item.allergens || '',\r\n          recommended: item.recommended || false\r\n        });\r\n        setEditingId(item.id);\r\n        setShowForm(true);\r\n      };\r\n    \r\n      const handleEditCategory = (category) => {\r\n        setCategoryFormData({\r\n          name: category.name,\r\n          order: category.order\r\n        });\r\n        setEditingCategoryId(category.id);\r\n        setShowCategoryForm(true);\r\n      };\r\n    \r\n      const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Сигурни ли сте, че искате да изтриете този продукт?\")) {\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const { error } = await supabase\r\n            .from('menu_items')\r\n            .delete()\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Премахване от локалния списък\r\n          setMenuItems(menuItems.filter(item => item.id !== id));\r\n        } catch (error) {\r\n          console.error('Error deleting menu item:', error);\r\n          alert('Възникна грешка при изтриване на продукта');\r\n        }\r\n      };\r\n    \r\n      const handleDeleteCategory = async (id) => {\r\n        // Проверка дали категорията се използва в продукти\r\n        const itemsInCategory = menuItems.filter(item => item.category_id === id);\r\n        \r\n        if (itemsInCategory.length > 0) {\r\n          alert(`Не можете да изтриете тази категория, защото има ${itemsInCategory.length} продукта в нея.`);\r\n          return;\r\n        }\r\n        \r\n        if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази категория?\")) {\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const { error } = await supabase\r\n            .from('menu_categories')\r\n            .delete()\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Премахване от локалния списък\r\n          setCategories(categories.filter(cat => cat.id !== id));\r\n          \r\n          // Ако текущо избраната категория е изтрита, връщаме се към \"всички\"\r\n          if (selectedCategory === id) {\r\n            setSelectedCategory('all');\r\n          }\r\n        } catch (error) {\r\n          console.error('Error deleting category:', error);\r\n          alert('Възникна грешка при изтриване на категорията');\r\n        }\r\n      };\r\n    \r\n      const handleCategoryChange = (categoryId) => {\r\n        setSelectedCategory(categoryId);\r\n      };\r\n    \r\n      if (loading) {\r\n        return <div>Зареждане на меню...</div>;\r\n      }\r\n      return (\r\n        <div>\r\n          <h1>Меню: {restaurant?.name}</h1>\r\n          \r\n          <div className=\"admin-controls menu-controls\">\r\n            <div className=\"admin-filter-container\">\r\n              <h3>Филтриране по категория:</h3>\r\n              <div className=\"category-filters\">\r\n                <button \r\n                  className={`admin-filter-btn ${selectedCategory === 'all' ? 'active' : ''}`} \r\n                  onClick={() => handleCategoryChange('all')}\r\n                >\r\n                  Всички категории\r\n                </button>\r\n                {categories.map(category => (\r\n                  <button \r\n                    key={category.id} \r\n                    className={`admin-filter-btn ${selectedCategory === category.id ? 'active' : ''}`}\r\n                    onClick={() => handleCategoryChange(category.id)}\r\n                  >\r\n                    {category.name}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"admin-button-group\">\r\n              <button \r\n                className=\"admin-add-btn\"\r\n                onClick={() => {\r\n                  resetCategoryForm();\r\n                  setShowCategoryForm(!showCategoryForm);\r\n                  if (showForm) setShowForm(false);\r\n                }}\r\n              >\r\n                {showCategoryForm ? 'Отказ' : 'Добави категория'}\r\n              </button>\r\n              \r\n              <button \r\n                className=\"admin-add-btn\"\r\n                onClick={() => {\r\n                  resetForm();\r\n                  setShowForm(!showForm);\r\n                  if (showCategoryForm) setShowCategoryForm(false);\r\n                }}\r\n              >\r\n                {showForm ? 'Отказ' : 'Добави продукт'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Форма за категории */}\r\n          {showCategoryForm && (\r\n            <div className=\"admin-form-container\">\r\n              <h2>{editingCategoryId ? 'Редактиране на категория' : 'Нова категория'}</h2>\r\n              <form onSubmit={handleCategorySubmit} className=\"admin-form\">\r\n                <div className=\"form-group\">\r\n                  <label>Име на категория</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    name=\"name\" \r\n                    value={categoryFormData.name} \r\n                    onChange={handleCategoryInputChange} \r\n                    required \r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Ред на показване</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    name=\"order\" \r\n                    value={categoryFormData.order} \r\n                    onChange={handleCategoryInputChange} \r\n                    required \r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-buttons\">\r\n                  <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowCategoryForm(false)}>\r\n                    Отказ\r\n                  </button>\r\n                  <button type=\"submit\" className=\"admin-submit-btn\">\r\n                    {editingCategoryId ? 'Запази промените' : 'Добави категория'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Управление на категории */}\r\n          <div className=\"admin-categories-section\">\r\n            <h2>Управление на категории</h2>\r\n            {categories.length === 0 ? (\r\n              <div className=\"admin-no-data\">\r\n                <p>Няма добавени категории. Добавете първата категория.</p>\r\n              </div>\r\n            ) : (\r\n              <table className=\"admin-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Име</th>\r\n                    <th>Ред</th>\r\n                    <th>Брой продукти</th>\r\n                    <th>Действия</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {categories.map(category => {\r\n                    const itemCount = menuItems.filter(item => item.category_id === category.id).length;\r\n                    return (\r\n                      <tr key={category.id}>\r\n                        <td>{category.name}</td>\r\n                        <td>{category.order}</td>\r\n                        <td>{itemCount}</td>\r\n                        <td>\r\n                          <button \r\n                            className=\"admin-action-btn edit\"\r\n                            onClick={() => handleEditCategory(category)}\r\n                          >\r\n                            <i className=\"fas fa-edit\"></i>\r\n                          </button>\r\n                          <button \r\n                            className=\"admin-action-btn delete\"\r\n                            onClick={() => handleDeleteCategory(category.id)}\r\n                            disabled={itemCount > 0}\r\n                          >\r\n                            <i className=\"fas fa-trash\"></i>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </div>\r\n          {/* Форма за добавяне/редактиране на продукт */}\r\n      {showForm && (\r\n        <div className=\"admin-form-container\">\r\n          <h2>{editingId ? 'Редактиране на продукт' : 'Нов продукт'}</h2>\r\n          <form onSubmit={handleSubmit} className=\"admin-form\">\r\n            <div className=\"form-group\">\r\n              <label>Име на продукт</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={formData.name} \r\n                onChange={handleInputChange} \r\n                required \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Категория</label>\r\n              <select \r\n                name=\"category_id\" \r\n                value={formData.category_id} \r\n                onChange={handleInputChange} \r\n                required\r\n              >\r\n                <option value=\"\">Изберете категория</option>\r\n                {categories.map(category => (\r\n                  <option key={category.id} value={category.id}>\r\n                    {category.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Цена (в лв.)</label>\r\n              <input \r\n                type=\"number\" \r\n                name=\"price\" \r\n                value={formData.price} \r\n                onChange={handleInputChange} \r\n                required \r\n                min=\"0\"\r\n                step=\"0.01\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Описание</label>\r\n              <textarea \r\n                name=\"description\" \r\n                value={formData.description} \r\n                onChange={handleInputChange} \r\n                placeholder=\"Описание на продукта\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>URL на изображение</label>\r\n              <input \r\n                type=\"url\" \r\n                name=\"image_url\" \r\n                value={formData.image_url} \r\n                onChange={handleInputChange} \r\n                placeholder=\"http://example.com/image.jpg\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Алергени</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"allergens\" \r\n                value={formData.allergens} \r\n                onChange={handleInputChange} \r\n                placeholder=\"Напр.: глутен, млечни продукти, ядки\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input \r\n                  type=\"checkbox\" \r\n                  name=\"is_available\" \r\n                  checked={formData.is_available} \r\n                  onChange={handleInputChange} \r\n                />\r\n                Наличен продукт\r\n              </label>\r\n            </div>\r\n            \r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input \r\n                  type=\"checkbox\" \r\n                  name=\"recommended\" \r\n                  checked={formData.recommended} \r\n                  onChange={handleInputChange} \r\n                />\r\n                Препоръчан продукт\r\n              </label>\r\n            </div>\r\n            \r\n            <div className=\"form-buttons\">\r\n              <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                Отказ\r\n              </button>\r\n              <button type=\"submit\" className=\"admin-submit-btn\">\r\n                {editingId ? 'Запази промените' : 'Добави продукт'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Списък с продукти */}\r\n      <div className=\"admin-table-container\">\r\n        <h2>Продукти в менюто</h2>\r\n        {menuItems.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма добавени продукти в менюто.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Изображение</th>\r\n                <th>Име</th>\r\n                <th>Категория</th>\r\n                <th>Цена</th>\r\n                <th>Статус</th>\r\n                <th>Препоръчан</th>\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {menuItems.map(item => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    {item.image_url ? (\r\n                      <img src={item.image_url} alt={item.name} className=\"menu-item-thumbnail\" />\r\n                    ) : (\r\n                      <div className=\"menu-item-no-image\">Няма изображение</div>\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <strong>{item.name}</strong>\r\n                    {item.description && <p className=\"menu-item-description\">{item.description}</p>}\r\n                    {item.allergens && <p className=\"menu-item-allergens\">Алергени: {item.allergens}</p>}\r\n                  </td>\r\n                  <td>{item.menu_categories?.name || 'Без категория'}</td>\r\n                  <td>{item.price?.toFixed(2)} лв.</td>\r\n                  <td>\r\n                    <span className={`status-badge ${item.is_available ? 'active' : 'inactive'}`}>\r\n                      {item.is_available ? 'Наличен' : 'Неналичен'}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {item.recommended ? <i className=\"fas fa-star recommended-star\"></i> : '-'}\r\n                  </td>\r\n                  <td>\r\n                    <button \r\n                      className=\"admin-action-btn edit\"\r\n                      onClick={() => handleEdit(item)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"admin-action-btn delete\"\r\n                      onClick={() => handleDelete(item.id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n// Подсекция за събития\r\nfunction AdminEventsSection({ restaurant, supabase }) {\r\n    const [events, setEvents] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      title: '',\r\n      description: '',\r\n      date: '',\r\n      time: '',\r\n      end_time: '',\r\n      image_url: '',\r\n      seats_available: 0,\r\n      price: '',\r\n      is_published: false,\r\n      is_private: false\r\n    });\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [view, setView] = useState('upcoming');\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchEvents = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Получаване на днешната дата\r\n          const today = new Date().toISOString().split('T')[0];\r\n          \r\n          // Съставяне на заявката според изгледа\r\n          let query = supabase\r\n            .from('events')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (view === 'upcoming') {\r\n            query = query.gte('date', today);\r\n          } else if (view === 'past') {\r\n            query = query.lt('date', today);\r\n          }\r\n          \r\n          const { data, error } = await query\r\n            .order('date', { ascending: view === 'upcoming' });\r\n          \r\n          if (error) throw error;\r\n          \r\n          setEvents(data || []);\r\n        } catch (error) {\r\n          console.error('Error fetching events:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchEvents();\r\n    }, [restaurant, view, supabase]);\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                type === 'number' ? parseInt(value, 10) : \r\n                name === 'price' ? parseFloat(value) || '' : value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        title: '',\r\n        description: '',\r\n        date: '',\r\n        time: '',\r\n        end_time: '',\r\n        image_url: '',\r\n        seats_available: 0,\r\n        price: '',\r\n        is_published: false,\r\n        is_private: false\r\n      });\r\n      setEditingId(null);\r\n    };\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n          // Валидация\r\n          if (formData.price && parseFloat(formData.price) < 0) {\r\n            alert('Цената не може да бъде отрицателна');\r\n            return;\r\n          }\r\n          \r\n          if (formData.seats_available < 0) {\r\n            alert('Броят на местата не може да бъде отрицателен');\r\n            return;\r\n          }\r\n          \r\n          const fullData = {\r\n            ...formData,\r\n            restaurant_id: restaurant.id,\r\n            price: formData.price === '' ? null : parseFloat(formData.price)\r\n          };\r\n          \r\n          let result;\r\n          \r\n          if (editingId) {\r\n            const { data, error } = await supabase\r\n              .from('events')\r\n              .update(fullData)\r\n              .eq('id', editingId)\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Актуализиране на локалния списък\r\n            setEvents(events.map(event => \r\n              event.id === editingId ? { ...event, ...result } : event\r\n            ));\r\n          } else {\r\n            const { data, error } = await supabase\r\n              .from('events')\r\n              .insert([fullData])\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Добавяне към локалния списък, ако съответства на текущия изглед\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const isUpcoming = result.date >= today;\r\n            \r\n            if ((view === 'upcoming' && isUpcoming) || \r\n                (view === 'past' && !isUpcoming) || \r\n                view === 'all') {\r\n              setEvents([...events, result]);\r\n            }\r\n          }\r\n          \r\n          resetForm();\r\n          setShowForm(false);\r\n        } catch (error) {\r\n          console.error('Error saving event:', error);\r\n          alert('Възникна грешка при запазване на събитието');\r\n        }\r\n      };\r\n    \r\n      const handleEdit = (event) => {\r\n        setFormData({\r\n          title: event.title,\r\n          description: event.description || '',\r\n          date: event.date,\r\n          time: event.time,\r\n          end_time: event.end_time || '',\r\n          image_url: event.image_url || '',\r\n          seats_available: event.seats_available || 0,\r\n          price: event.price !== null ? event.price.toString() : '',\r\n          is_published: event.is_published || false,\r\n          is_private: event.is_private || false\r\n        });\r\n        setEditingId(event.id);\r\n        setShowForm(true);\r\n      };\r\n    \r\n      const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това събитие?\")) {\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const { error } = await supabase\r\n            .from('events')\r\n            .delete()\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Премахване от локалния списък\r\n          setEvents(events.filter(event => event.id !== id));\r\n        } catch (error) {\r\n          console.error('Error deleting event:', error);\r\n          alert('Възникна грешка при изтриване на събитието');\r\n        }\r\n      };\r\n    \r\n      const togglePublish = async (id, currentStatus) => {\r\n        try {\r\n          const { error } = await supabase\r\n            .from('events')\r\n            .update({ is_published: !currentStatus })\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Актуализиране на локалния списък\r\n          setEvents(events.map(event => \r\n            event.id === id ? { ...event, is_published: !currentStatus } : event\r\n          ));\r\n        } catch (error) {\r\n          console.error('Error updating event publish status:', error);\r\n          alert('Възникна грешка при промяна на статуса на събитието');\r\n        }\r\n      };\r\n    \r\n      const handleViewChange = (newView) => {\r\n        setView(newView);\r\n      };\r\n    \r\n      const formatDate = (dateStr) => {\r\n        const parts = dateStr.split('-');\r\n        return `${parts[2]}.${parts[1]}.${parts[0]}`;\r\n      };\r\n    \r\n      if (loading) {\r\n        return <div>Зареждане на събития...</div>;\r\n      }\r\n      return (\r\n        <div>\r\n          <h1>Събития: {restaurant?.name}</h1>\r\n          \r\n          <div className=\"admin-controls\">\r\n            <div className=\"admin-filters\">\r\n              <button \r\n                className={`admin-filter-btn ${view === 'upcoming' ? 'active' : ''}`} \r\n                onClick={() => handleViewChange('upcoming')}\r\n              >\r\n                Предстоящи събития\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${view === 'past' ? 'active' : ''}`} \r\n                onClick={() => handleViewChange('past')}\r\n              >\r\n                Минали събития\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${view === 'all' ? 'active' : ''}`} \r\n                onClick={() => handleViewChange('all')}\r\n              >\r\n                Всички събития\r\n              </button>\r\n            </div>\r\n            \r\n            <button \r\n              className=\"admin-add-btn\"\r\n              onClick={() => {\r\n                resetForm();\r\n                setShowForm(!showForm);\r\n              }}\r\n            >\r\n              {showForm ? 'Отказ' : 'Добави събитие'}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Форма за добавяне/редактиране на събитие */}\r\n          {showForm && (\r\n            <div className=\"admin-form-container\">\r\n              <h2>{editingId ? 'Редактиране на събитие' : 'Ново събитие'}</h2>\r\n              <form onSubmit={handleSubmit} className=\"admin-form\">\r\n                <div className=\"form-group\">\r\n                  <label>Заглавие</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    name=\"title\" \r\n                    value={formData.title} \r\n                    onChange={handleInputChange} \r\n                    required \r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Описание</label>\r\n                  <textarea \r\n                    name=\"description\" \r\n                    value={formData.description} \r\n                    onChange={handleInputChange} \r\n                    rows=\"4\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Дата</label>\r\n                    <input \r\n                      type=\"date\" \r\n                      name=\"date\" \r\n                      value={formData.date} \r\n                      onChange={handleInputChange} \r\n                      required \r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label>Начален час</label>\r\n                    <input \r\n                      type=\"time\" \r\n                      name=\"time\" \r\n                      value={formData.time} \r\n                      onChange={handleInputChange} \r\n                      required \r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label>Краен час</label>\r\n                    <input \r\n                      type=\"time\" \r\n                      name=\"end_time\" \r\n                      value={formData.end_time} \r\n                      onChange={handleInputChange} \r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>URL на изображение</label>\r\n                  <input \r\n                    type=\"url\" \r\n                    name=\"image_url\" \r\n                    value={formData.image_url} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"http://example.com/image.jpg\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Брой места</label>\r\n                    <input \r\n                      type=\"number\" \r\n                      name=\"seats_available\" \r\n                      value={formData.seats_available} \r\n                      onChange={handleInputChange} \r\n                      min=\"0\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label>Цена (в лв., ако е приложимо)</label>\r\n                    <input \r\n                      type=\"number\" \r\n                      name=\"price\" \r\n                      value={formData.price} \r\n                      onChange={handleInputChange} \r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      placeholder=\"Оставете празно, ако е безплатно\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-row checkboxes\">\r\n                  <div className=\"form-group checkbox-group\">\r\n                    <label>\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        name=\"is_published\" \r\n                        checked={formData.is_published} \r\n                        onChange={handleInputChange} \r\n                      />\r\n                      Публикувано (видимо за клиенти)\r\n                    </label>\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group checkbox-group\">\r\n                    <label>\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        name=\"is_private\" \r\n                        checked={formData.is_private} \r\n                        onChange={handleInputChange} \r\n                      />\r\n                      Частно събитие (само с покана)\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-buttons\">\r\n                  <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                    Отказ\r\n                  </button>\r\n                  <button type=\"submit\" className=\"admin-submit-btn\">\r\n                    {editingId ? 'Запази промените' : 'Добави събитие'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {/* Списък със събития */}\r\n      <div className=\"admin-table-container\">\r\n        {events.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма {view === 'upcoming' ? 'предстоящи' : view === 'past' ? 'минали' : ''} събития.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"events-grid\">\r\n            {events.map(event => (\r\n              <div key={event.id} className=\"event-card\">\r\n                <div className=\"event-image\">\r\n                  {event.image_url ? (\r\n                    <img src={event.image_url} alt={event.title} />\r\n                  ) : (\r\n                    <div className=\"event-placeholder\">\r\n                      <i className=\"fas fa-calendar-alt\"></i>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div className=\"event-content\">\r\n                  <div className=\"event-header\">\r\n                    <h3>{event.title}</h3>\r\n                    <div className=\"event-status\">\r\n                      {event.is_published ? (\r\n                        <span className=\"status-badge active\">Публикувано</span>\r\n                      ) : (\r\n                        <span className=\"status-badge inactive\">Чернова</span>\r\n                      )}\r\n                      {event.is_private && (\r\n                        <span className=\"status-badge private\">Частно</span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"event-date-time\">\r\n                    <p>\r\n                      <i className=\"fas fa-calendar\"></i> {formatDate(event.date)}\r\n                    </p>\r\n                    <p>\r\n                      <i className=\"fas fa-clock\"></i> {event.time}\r\n                      {event.end_time && ` - ${event.end_time}`}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  {event.description && (\r\n                    <div className=\"event-description\">\r\n                      <p>{event.description.length > 100 \r\n                        ? event.description.slice(0, 100) + '...' \r\n                        : event.description}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"event-details\">\r\n                    {event.seats_available > 0 && (\r\n                      <p>\r\n                        <i className=\"fas fa-chair\"></i> {event.seats_available} места\r\n                      </p>\r\n                    )}\r\n                    {event.price !== null && event.price > 0 ? (\r\n                      <p>\r\n                        <i className=\"fas fa-ticket-alt\"></i> {event.price.toFixed(2)} лв.\r\n                      </p>\r\n                    ) : (\r\n                      <p>\r\n                        <i className=\"fas fa-ticket-alt\"></i> Безплатно\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"event-actions\">\r\n                    <button \r\n                      className=\"admin-action-btn toggle-publish\"\r\n                      onClick={() => togglePublish(event.id, event.is_published)}\r\n                      title={event.is_published ? 'Скрий от клиенти' : 'Публикувай'}\r\n                    >\r\n                      <i className={`fas fa-${event.is_published ? 'eye-slash' : 'eye'}`}></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"admin-action-btn edit\"\r\n                      onClick={() => handleEdit(event)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"admin-action-btn delete\"\r\n                      onClick={() => handleDelete(event.id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n// Експорт на основния компонент\r\nexport default AdminDashboard;\r\n\r\n// Подсекция за специални предложения\r\nfunction AdminSpecialOffersSection({ restaurant, supabase }) {\r\n    const [offers, setOffers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      title: '',\r\n      description: '',\r\n      discount_type: 'percentage', // 'percentage', 'fixed', 'free_item'\r\n      discount_value: '',\r\n      start_date: '',\r\n      end_date: '',\r\n      days_of_week: [], // ['monday', 'tuesday', etc.]\r\n      start_time: '',\r\n      end_time: '',\r\n      min_order: '',\r\n      max_uses: '',\r\n      image_url: '',\r\n      active: true,\r\n      applies_to: 'all', // 'all', 'category', 'item'\r\n      applies_to_id: ''\r\n    });\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [menuCategories, setMenuCategories] = useState([]);\r\n    const [menuItems, setMenuItems] = useState([]);\r\n    const [filter, setFilter] = useState('active');\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchData = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Получаване на днешната дата\r\n          const today = new Date().toISOString().split('T')[0];\r\n          \r\n          // Зареждане на специални предложения\r\n          let query = supabase\r\n            .from('special_offers')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (filter === 'active') {\r\n            query = query\r\n              .eq('active', true)\r\n              .lte('start_date', today)\r\n              .or(`end_date.gt.${today},end_date.is.null`);\r\n          } else if (filter === 'upcoming') {\r\n            query = query.gt('start_date', today);\r\n          } else if (filter === 'expired') {\r\n            query = query\r\n              .lt('end_date', today)\r\n              .not('end_date', 'is', null);\r\n          } else if (filter === 'inactive') {\r\n            query = query.eq('active', false);\r\n          }\r\n          \r\n          const { data: offersData, error: offersError } = await query\r\n            .order('start_date', { ascending: false });\r\n          \r\n          if (offersError) throw offersError;\r\n          \r\n          setOffers(offersData || []);\r\n          \r\n          // Зареждане на категории от менюто\r\n          const { data: categoriesData, error: categoriesError } = await supabase\r\n            .from('menu_categories')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id)\r\n            .order('order', { ascending: true });\r\n          \r\n          if (categoriesError) throw categoriesError;\r\n          \r\n          setMenuCategories(categoriesData || []);\r\n          \r\n          // Зареждане на продукти от менюто\r\n          const { data: itemsData, error: itemsError } = await supabase\r\n            .from('menu_items')\r\n            .select(`\r\n              id,\r\n              name,\r\n              category_id,\r\n              price,\r\n              menu_categories:category_id (name)\r\n            `)\r\n            .eq('restaurant_id', restaurant.id)\r\n            .order('name', { ascending: true });\r\n          \r\n          if (itemsError) throw itemsError;\r\n          \r\n          setMenuItems(itemsData || []);\r\n        } catch (error) {\r\n          console.error('Error fetching special offers data:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchData();\r\n    }, [restaurant, filter, supabase]);\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                (name === 'discount_value' || name === 'min_order' || name === 'max_uses') ? \r\n                  (value === '' ? '' : parseFloat(value)) : \r\n                  value\r\n      });\r\n    };\r\n  \r\n    const handleDaysOfWeekChange = (day) => {\r\n      const updatedDays = [...formData.days_of_week];\r\n      const index = updatedDays.indexOf(day);\r\n      \r\n      if (index > -1) {\r\n        updatedDays.splice(index, 1);\r\n      } else {\r\n        updatedDays.push(day);\r\n      }\r\n      \r\n      setFormData({\r\n        ...formData,\r\n        days_of_week: updatedDays\r\n      });\r\n    };\r\n    const resetForm = () => {\r\n        setFormData({\r\n          title: '',\r\n          description: '',\r\n          discount_type: 'percentage',\r\n          discount_value: '',\r\n          start_date: '',\r\n          end_date: '',\r\n          days_of_week: [],\r\n          start_time: '',\r\n          end_time: '',\r\n          min_order: '',\r\n          max_uses: '',\r\n          image_url: '',\r\n          active: true,\r\n          applies_to: 'all',\r\n          applies_to_id: ''\r\n        });\r\n        setEditingId(null);\r\n      };\r\n    \r\n      const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        try {\r\n          // Валидация\r\n          if (formData.discount_type !== 'free_item' && \r\n              (formData.discount_value === '' || parseFloat(formData.discount_value) <= 0)) {\r\n            alert('Моля, въведете валидна стойност на отстъпката');\r\n            return;\r\n          }\r\n          \r\n          if (formData.discount_type === 'percentage' && parseFloat(formData.discount_value) > 100) {\r\n            alert('Процентната отстъпка не може да бъде по-голяма от 100%');\r\n            return;\r\n          }\r\n          \r\n          if (formData.start_date && formData.end_date && formData.start_date > formData.end_date) {\r\n            alert('Крайната дата трябва да бъде след началната дата');\r\n            return;\r\n          }\r\n          \r\n          if (formData.applies_to !== 'all' && !formData.applies_to_id) {\r\n            alert('Моля, изберете за какво се отнася специалното предложение');\r\n            return;\r\n          }\r\n          \r\n          // Подготовка на данните\r\n          const fullData = {\r\n            ...formData,\r\n            restaurant_id: restaurant.id\r\n          };\r\n          \r\n          // Конвертиране на празни стрингове към null\r\n          for (const key in fullData) {\r\n            if (fullData[key] === '') {\r\n              fullData[key] = null;\r\n            }\r\n          }\r\n          \r\n          let result;\r\n          \r\n          if (editingId) {\r\n            const { data, error } = await supabase\r\n              .from('special_offers')\r\n              .update(fullData)\r\n              .eq('id', editingId)\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Актуализиране на локалния списък\r\n            setOffers(offers.map(offer => \r\n              offer.id === editingId ? { ...offer, ...result } : offer\r\n            ));\r\n          } else {\r\n            const { data, error } = await supabase\r\n              .from('special_offers')\r\n              .insert([fullData])\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Добавяне към локалния списък, ако съответства на текущия филтър\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const isActive = result.active && \r\n                             (!result.start_date || result.start_date <= today) && \r\n                             (!result.end_date || result.end_date >= today);\r\n            const isUpcoming = result.start_date > today;\r\n            const isExpired = result.end_date && result.end_date < today;\r\n            \r\n            if ((filter === 'active' && isActive) ||\r\n                (filter === 'upcoming' && isUpcoming) ||\r\n                (filter === 'expired' && isExpired) ||\r\n                (filter === 'inactive' && !result.active) ||\r\n                filter === 'all') {\r\n              setOffers([result, ...offers]);\r\n            }\r\n          }\r\n          \r\n          resetForm();\r\n          setShowForm(false);\r\n        } catch (error) {\r\n          console.error('Error saving special offer:', error);\r\n          alert('Възникна грешка при запазване на специалното предложение');\r\n        }\r\n      };\r\n    \r\n      const handleEdit = (offer) => {\r\n        setFormData({\r\n          title: offer.title,\r\n          description: offer.description || '',\r\n          discount_type: offer.discount_type,\r\n          discount_value: offer.discount_value !== null ? offer.discount_value.toString() : '',\r\n          start_date: offer.start_date || '',\r\n          end_date: offer.end_date || '',\r\n          days_of_week: offer.days_of_week || [],\r\n          start_time: offer.start_time || '',\r\n          end_time: offer.end_time || '',\r\n          min_order: offer.min_order !== null ? offer.min_order.toString() : '',\r\n          max_uses: offer.max_uses !== null ? offer.max_uses.toString() : '',\r\n          image_url: offer.image_url || '',\r\n          active: offer.active,\r\n          applies_to: offer.applies_to || 'all',\r\n          applies_to_id: offer.applies_to_id || ''\r\n        });\r\n        setEditingId(offer.id);\r\n        setShowForm(true);\r\n      };\r\n      const handleDelete = async (id) => {\r\n        if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това специално предложение?\")) {\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const { error } = await supabase\r\n            .from('special_offers')\r\n            .delete()\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Премахване от локалния списък\r\n          setOffers(offers.filter(offer => offer.id !== id));\r\n        } catch (error) {\r\n          console.error('Error deleting special offer:', error);\r\n          alert('Възникна грешка при изтриване на специалното предложение');\r\n        }\r\n      };\r\n    \r\n      const toggleActive = async (id, currentStatus) => {\r\n        try {\r\n          const { error } = await supabase\r\n            .from('special_offers')\r\n            .update({ active: !currentStatus })\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Актуализиране на локалния списък\r\n          setOffers(offers.map(offer => \r\n            offer.id === id ? { ...offer, active: !currentStatus } : offer\r\n          ));\r\n        } catch (error) {\r\n          console.error('Error updating offer status:', error);\r\n          alert('Възникна грешка при промяна на статуса');\r\n        }\r\n      };\r\n    \r\n      const handleFilterChange = (newFilter) => {\r\n        setFilter(newFilter);\r\n      };\r\n    \r\n      const getAppliesText = (offer) => {\r\n        if (offer.applies_to === 'all') {\r\n          return 'Всички продукти';\r\n        } else if (offer.applies_to === 'category') {\r\n          const category = menuCategories.find(c => c.id === offer.applies_to_id);\r\n          return category ? `Категория: ${category.name}` : 'Неизвестна категория';\r\n        } else if (offer.applies_to === 'item') {\r\n          const item = menuItems.find(i => i.id === offer.applies_to_id);\r\n          return item ? `Продукт: ${item.name}` : 'Неизвестен продукт';\r\n        }\r\n        return '';\r\n      };\r\n    \r\n      const formatDate = (dateStr) => {\r\n        if (!dateStr) return '';\r\n        const parts = dateStr.split('-');\r\n        return `${parts[2]}.${parts[1]}.${parts[0]}`;\r\n      };\r\n    \r\n      const getDiscountText = (offer) => {\r\n        if (offer.discount_type === 'percentage') {\r\n          return `${offer.discount_value}% отстъпка`;\r\n        } else if (offer.discount_type === 'fixed') {\r\n          return `${offer.discount_value.toFixed(2)} лв. отстъпка`;\r\n        } else if (offer.discount_type === 'free_item') {\r\n          return 'Безплатен продукт';\r\n        }\r\n        return '';\r\n      };\r\n    \r\n      const isOfferActive = (offer) => {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        return offer.active && \r\n               (!offer.start_date || offer.start_date <= today) && \r\n               (!offer.end_date || offer.end_date >= today);\r\n      };\r\n    \r\n      const getDaysOfWeekLabels = (days) => {\r\n        if (!days || days.length === 0) return 'Всички дни';\r\n        \r\n        const dayMap = {\r\n          'monday': 'Пн',\r\n          'tuesday': 'Вт',\r\n          'wednesday': 'Ср',\r\n          'thursday': 'Чт',\r\n          'friday': 'Пт',\r\n          'saturday': 'Сб',\r\n          'sunday': 'Нд'\r\n        };\r\n        \r\n        return days.map(day => dayMap[day]).join(', ');\r\n      };\r\n    \r\n      if (loading) {\r\n        return <div>Зареждане на специални предложения...</div>;\r\n      }\r\n      return (\r\n        <div>\r\n          <h1>Специални предложения: {restaurant?.name}</h1>\r\n          \r\n          <div className=\"admin-controls\">\r\n            <div className=\"admin-filters\">\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'active' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('active')}\r\n              >\r\n                Активни\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'upcoming' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('upcoming')}\r\n              >\r\n                Предстоящи\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'expired' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('expired')}\r\n              >\r\n                Изтекли\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'inactive' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('inactive')}\r\n              >\r\n                Неактивни\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'all' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('all')}\r\n              >\r\n                Всички\r\n              </button>\r\n            </div>\r\n            \r\n            <button \r\n              className=\"admin-add-btn\"\r\n              onClick={() => {\r\n                resetForm();\r\n                setShowForm(!showForm);\r\n              }}\r\n            >\r\n              {showForm ? 'Отказ' : 'Добави специално предложение'}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Форма за добавяне/редактиране на специално предложение */}\r\n          {showForm && (\r\n            <div className=\"admin-form-container\">\r\n              <h2>{editingId ? 'Редактиране на специално предложение' : 'Ново специално предложение'}</h2>\r\n              <form onSubmit={handleSubmit} className=\"admin-form\">\r\n                <div className=\"form-group\">\r\n                  <label>Заглавие</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    name=\"title\" \r\n                    value={formData.title} \r\n                    onChange={handleInputChange} \r\n                    required \r\n                    placeholder=\"Напр.: Щастлив час, 2+1 безплатно и т.н.\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Описание</label>\r\n                  <textarea \r\n                    name=\"description\" \r\n                    value={formData.description} \r\n                    onChange={handleInputChange} \r\n                    rows=\"3\"\r\n                    placeholder=\"Подробно описание на специалното предложение\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Тип отстъпка</label>\r\n                    <select \r\n                      name=\"discount_type\" \r\n                      value={formData.discount_type} \r\n                      onChange={handleInputChange} \r\n                      required\r\n                    >\r\n                      <option value=\"percentage\">Процент (%)</option>\r\n                      <option value=\"fixed\">Фиксирана сума (лв.)</option>\r\n                      <option value=\"free_item\">Безплатен продукт</option>\r\n                    </select>\r\n                  </div>\r\n                  \r\n                  {formData.discount_type !== 'free_item' && (\r\n                    <div className=\"form-group\">\r\n                      <label>Стойност на отстъпката</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        name=\"discount_value\" \r\n                        value={formData.discount_value} \r\n                        onChange={handleInputChange} \r\n                        min={formData.discount_type === 'percentage' ? 1 : 0.01}\r\n                        max={formData.discount_type === 'percentage' ? 100 : undefined}\r\n                        step={formData.discount_type === 'percentage' ? 1 : 0.01}\r\n                        required\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Начална дата</label>\r\n                    <input \r\n                      type=\"date\" \r\n                      name=\"start_date\" \r\n                      value={formData.start_date} \r\n                      onChange={handleInputChange} \r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group\">\r\n                    <label>Крайна дата</label>\r\n                    <input \r\n                      type=\"date\" \r\n                      name=\"end_date\" \r\n                      value={formData.end_date} \r\n                      onChange={handleInputChange} \r\n                    />\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>В кои дни от седмицата важи</label>\r\n                  <div className=\"days-of-week-container\">\r\n                    {['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'].map(day => (\r\n                      <label key={day} className=\"day-checkbox\">\r\n                        <input \r\n                          type=\"checkbox\" \r\n                          checked={formData.days_of_week.includes(day)} \r\n                          onChange={() => handleDaysOfWeekChange(day)} \r\n                        />\r\n                        {day === 'monday' ? 'Пн' : \r\n                         day === 'tuesday' ? 'Вт' : \r\n                         day === 'wednesday' ? 'Ср' : \r\n                         day === 'thursday' ? 'Чт' : \r\n                         day === 'friday' ? 'Пт' : \r\n                         day === 'saturday' ? 'Сб' : 'Нд'}\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                  <small>Оставете всички празни, за да важи всеки ден</small>\r\n                </div>\r\n                <div className=\"form-row\">\r\n              <div className=\"form-group\">\r\n                <label>Начален час</label>\r\n                <input \r\n                  type=\"time\" \r\n                  name=\"start_time\" \r\n                  value={formData.start_time} \r\n                  onChange={handleInputChange} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Краен час</label>\r\n                <input \r\n                  type=\"time\" \r\n                  name=\"end_time\" \r\n                  value={formData.end_time} \r\n                  onChange={handleInputChange} \r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"form-row\">\r\n              <div className=\"form-group\">\r\n                <label>Минимална поръчка (лв.)</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"min_order\" \r\n                  value={formData.min_order} \r\n                  onChange={handleInputChange} \r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"Оставете празно, ако няма\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Максимален брой използвания</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"max_uses\" \r\n                  value={formData.max_uses} \r\n                  onChange={handleInputChange} \r\n                  min=\"1\"\r\n                  placeholder=\"Оставете празно, ако няма лимит\"\r\n                />\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>URL на изображение</label>\r\n              <input \r\n                type=\"url\" \r\n                name=\"image_url\" \r\n                value={formData.image_url} \r\n                onChange={handleInputChange} \r\n                placeholder=\"http://example.com/image.jpg\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>За какво се отнася</label>\r\n              <select \r\n                name=\"applies_to\" \r\n                value={formData.applies_to} \r\n                onChange={handleInputChange} \r\n                required\r\n              >\r\n                <option value=\"all\">Всички продукти</option>\r\n                <option value=\"category\">Конкретна категория</option>\r\n                <option value=\"item\">Конкретен продукт</option>\r\n              </select>\r\n            </div>\r\n            \r\n            {formData.applies_to === 'category' && (\r\n              <div className=\"form-group\">\r\n                <label>Изберете категория</label>\r\n                <select \r\n                  name=\"applies_to_id\" \r\n                  value={formData.applies_to_id} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"\">Изберете категория</option>\r\n                  {menuCategories.map(category => (\r\n                    <option key={category.id} value={category.id}>\r\n                      {category.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n            \r\n            {formData.applies_to === 'item' && (\r\n              <div className=\"form-group\">\r\n                <label>Изберете продукт</label>\r\n                <select \r\n                  name=\"applies_to_id\" \r\n                  value={formData.applies_to_id} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"\">Изберете продукт</option>\r\n                  {menuItems.map(item => (\r\n                    <option key={item.id} value={item.id}>\r\n                      {item.name} ({item.menu_categories?.name || 'Без категория'}) - {item.price?.toFixed(2)} лв.\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input \r\n                  type=\"checkbox\" \r\n                  name=\"active\" \r\n                  checked={formData.active} \r\n                  onChange={handleInputChange} \r\n                />\r\n                Активно\r\n              </label>\r\n            </div>\r\n            \r\n            <div className=\"form-buttons\">\r\n              <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                Отказ\r\n              </button>\r\n              <button type=\"submit\" className=\"admin-submit-btn\">\r\n                {editingId ? 'Запази промените' : 'Добави специално предложение'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n      {/* Списък със специални предложения */}\r\n      <div className=\"admin-table-container\">\r\n        {offers.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма намерени специални предложения.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"special-offers-grid\">\r\n            {offers.map(offer => (\r\n              <div key={offer.id} className={`special-offer-card ${isOfferActive(offer) ? 'active' : 'inactive'}`}>\r\n                <div className=\"special-offer-header\">\r\n                  <h3>{offer.title}</h3>\r\n                  <div className=\"special-offer-status\">\r\n                    {isOfferActive(offer) ? (\r\n                      <span className=\"status-badge active\">Активно</span>\r\n                    ) : (\r\n                      offer.active ? (\r\n                        offer.start_date && new Date(offer.start_date) > new Date() ? (\r\n                          <span className=\"status-badge upcoming\">Предстоящо</span>\r\n                        ) : (\r\n                          <span className=\"status-badge expired\">Изтекло</span>\r\n                        )\r\n                      ) : (\r\n                        <span className=\"status-badge inactive\">Неактивно</span>\r\n                      )\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"special-offer-content\">\r\n                  {offer.image_url && (\r\n                    <div className=\"special-offer-image\">\r\n                      <img src={offer.image_url} alt={offer.title} />\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"special-offer-details\">\r\n                    <p className=\"special-offer-discount\">\r\n                      <i className=\"fas fa-tag\"></i> {getDiscountText(offer)}\r\n                    </p>\r\n                    \r\n                    <p className=\"special-offer-applies-to\">\r\n                      <i className=\"fas fa-shopping-basket\"></i> {getAppliesText(offer)}\r\n                    </p>\r\n                    \r\n                    <div className=\"special-offer-period\">\r\n                      {(offer.start_date || offer.end_date) && (\r\n                        <p>\r\n                          <i className=\"fas fa-calendar-alt\"></i> \r\n                          {offer.start_date ? formatDate(offer.start_date) : 'Без начална дата'} - \r\n                          {offer.end_date ? formatDate(offer.end_date) : 'Без крайна дата'}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      {offer.days_of_week && offer.days_of_week.length > 0 && (\r\n                        <p>\r\n                          <i className=\"fas fa-calendar-week\"></i> {getDaysOfWeekLabels(offer.days_of_week)}\r\n                        </p>\r\n                      )}\r\n                      \r\n                      {(offer.start_time || offer.end_time) && (\r\n                        <p>\r\n                          <i className=\"fas fa-clock\"></i> \r\n                          {offer.start_time || '00:00'} - {offer.end_time || '23:59'}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    \r\n                    {offer.description && (\r\n                      <p className=\"special-offer-description\">{offer.description}</p>\r\n                    )}\r\n                    \r\n                    <div className=\"special-offer-conditions\">\r\n                      {offer.min_order > 0 && (\r\n                        <p>\r\n                          <i className=\"fas fa-shopping-cart\"></i> Минимална поръчка: {offer.min_order.toFixed(2)} лв.\r\n                        </p>\r\n                      )}\r\n                      \r\n                      {offer.max_uses > 0 && (\r\n                        <p>\r\n                          <i className=\"fas fa-ticket-alt\"></i> Максимален брой използвания: {offer.max_uses}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"special-offer-actions\">\r\n                  <button \r\n                    className=\"admin-action-btn toggle-active\"\r\n                    onClick={() => toggleActive(offer.id, offer.active)}\r\n                    title={offer.active ? 'Деактивирай' : 'Активирай'}\r\n                  >\r\n                    <i className={`fas fa-${offer.active ? 'toggle-off' : 'toggle-on'}`}></i>\r\n                  </button>\r\n                  <button \r\n                    className=\"admin-action-btn edit\"\r\n                    onClick={() => handleEdit(offer)}\r\n                  >\r\n                    <i className=\"fas fa-edit\"></i>\r\n                  </button>\r\n                  <button \r\n                    className=\"admin-action-btn delete\"\r\n                    onClick={() => handleDelete(offer.id)}\r\n                  >\r\n                    <i className=\"fas fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n// Подсекция Галерия\r\nfunction AdminGallerySection({ restaurant, supabase }) {\r\n    const [galleryItems, setGalleryItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      title: '',\r\n      description: '',\r\n      image_url: '',\r\n      type: 'general', // 'general', 'food', 'interior', 'exterior', 'events'\r\n      order: 0,\r\n      is_featured: false\r\n    });\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [filter, setFilter] = useState('all');\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n    const fileInputRef = useRef(null);\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchGallery = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          let query = supabase\r\n            .from('gallery')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (filter !== 'all') {\r\n            query = query.eq('type', filter);\r\n          }\r\n          \r\n          const { data, error } = await query\r\n            .order('is_featured', { ascending: false })\r\n            .order('order', { ascending: true });\r\n          \r\n          if (error) throw error;\r\n          \r\n          setGalleryItems(data || []);\r\n        } catch (error) {\r\n          console.error('Error fetching gallery:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchGallery();\r\n    }, [restaurant, filter, supabase]);\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                name === 'order' ? parseInt(value, 10) : value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        title: '',\r\n        description: '',\r\n        image_url: '',\r\n        type: 'general',\r\n        order: galleryItems.length > 0 ? Math.max(...galleryItems.map(item => item.order || 0)) + 1 : 0,\r\n        is_featured: false\r\n      });\r\n      setEditingId(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    };\r\n    const handleFileChange = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        \r\n        // Проверка на типа файл\r\n        if (!['image/jpeg', 'image/png', 'image/webp', 'image/gif'].includes(file.type)) {\r\n          alert('Моля, качете изображение (JPEG, PNG, WEBP, GIF)');\r\n          if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n          }\r\n          return;\r\n        }\r\n        \r\n        // Проверка на размера (максимум 5MB)\r\n        if (file.size > 5 * 1024 * 1024) {\r\n          alert('Размерът на файла не може да надвишава 5MB');\r\n          if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n          }\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          setIsUploading(true);\r\n          setUploadProgress(0);\r\n          \r\n          // Генериране на уникално име на файла\r\n          const fileExt = file.name.split('.').pop();\r\n          const fileName = `${restaurant.id}/${Date.now()}.${fileExt}`;\r\n          \r\n          // Качване на файла в Supabase Storage\r\n          const { data, error } = await supabase.storage\r\n            .from('gallery_images')\r\n            .upload(fileName, file, {\r\n              cacheControl: '3600',\r\n              upsert: false,\r\n              onUploadProgress: (progress) => {\r\n                setUploadProgress(Math.round((progress.loaded / progress.total) * 100));\r\n              }\r\n            });\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Получаване на публичен URL на качения файл\r\n          const { data: urlData } = supabase.storage\r\n            .from('gallery_images')\r\n            .getPublicUrl(data.path);\r\n          \r\n          // Актуализиране на формата с URL-а на изображението\r\n          setFormData({\r\n            ...formData,\r\n            image_url: urlData.publicUrl\r\n          });\r\n          \r\n          setIsUploading(false);\r\n        } catch (error) {\r\n          console.error('Error uploading image:', error);\r\n          alert('Възникна грешка при качване на изображението');\r\n          setIsUploading(false);\r\n        }\r\n      };\r\n    \r\n      const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!formData.image_url) {\r\n          alert('Моля, качете или въведете URL на изображение');\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const fullData = {\r\n            ...formData,\r\n            restaurant_id: restaurant.id\r\n          };\r\n          \r\n          let result;\r\n          \r\n          if (editingId) {\r\n            const { data, error } = await supabase\r\n              .from('gallery')\r\n              .update(fullData)\r\n              .eq('id', editingId)\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Актуализиране на локалния списък\r\n            setGalleryItems(galleryItems.map(item => \r\n              item.id === editingId ? { ...item, ...result } : item\r\n            ));\r\n          } else {\r\n            const { data, error } = await supabase\r\n              .from('gallery')\r\n              .insert([fullData])\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Добавяне към локалния списък, ако съответства на текущия филтър\r\n            if (filter === 'all' || filter === result.type) {\r\n              setGalleryItems([...galleryItems, result]);\r\n            }\r\n          }\r\n          \r\n          resetForm();\r\n          setShowForm(false);\r\n        } catch (error) {\r\n          console.error('Error saving gallery item:', error);\r\n          alert('Възникна грешка при запазване на изображението');\r\n        }\r\n      };\r\n      const handleEdit = (item) => {\r\n        setFormData({\r\n          title: item.title || '',\r\n          description: item.description || '',\r\n          image_url: item.image_url,\r\n          type: item.type || 'general',\r\n          order: item.order || 0,\r\n          is_featured: item.is_featured || false\r\n        });\r\n        setEditingId(item.id);\r\n        setShowForm(true);\r\n      };\r\n    \r\n      const handleDelete = async (id, imageUrl) => {\r\n        if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това изображение?\")) {\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          // Изтриване на записа от базата данни\r\n          const { error } = await supabase\r\n            .from('gallery')\r\n            .delete()\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Опит за изтриване на файла от Storage (ако е в нашия Storage)\r\n          if (imageUrl.includes('supabase') && imageUrl.includes('/storage/v1/object/public/gallery_images/')) {\r\n            try {\r\n              const path = imageUrl.split('/gallery_images/')[1];\r\n              if (path) {\r\n                await supabase.storage\r\n                  .from('gallery_images')\r\n                  .remove([path]);\r\n              }\r\n            } catch (storageError) {\r\n              console.error('Error deleting file from storage:', storageError);\r\n              // Не прекъсваме процеса, ако изтриването от storage се провали\r\n            }\r\n          }\r\n          \r\n          // Премахване от локалния списък\r\n          setGalleryItems(galleryItems.filter(item => item.id !== id));\r\n        } catch (error) {\r\n          console.error('Error deleting gallery item:', error);\r\n          alert('Възникна грешка при изтриване на изображението');\r\n        }\r\n      };\r\n    \r\n      const toggleFeatured = async (id, currentStatus) => {\r\n        try {\r\n          const { error } = await supabase\r\n            .from('gallery')\r\n            .update({ is_featured: !currentStatus })\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Актуализиране на локалния списък\r\n          setGalleryItems(galleryItems.map(item => \r\n            item.id === id ? { ...item, is_featured: !currentStatus } : item\r\n          ));\r\n        } catch (error) {\r\n          console.error('Error updating featured status:', error);\r\n          alert('Възникна грешка при промяна на статуса');\r\n        }\r\n      };\r\n    \r\n      const handleFilterChange = (newFilter) => {\r\n        setFilter(newFilter);\r\n      };\r\n    \r\n      const getTypeLabel = (type) => {\r\n        switch (type) {\r\n          case 'food': return 'Храна';\r\n          case 'interior': return 'Интериор';\r\n          case 'exterior': return 'Екстериор';\r\n          case 'events': return 'Събития';\r\n          default: return 'Общи';\r\n        }\r\n      };\r\n    \r\n      if (loading) {\r\n        return <div>Зареждане на галерия...</div>;\r\n      }\r\n      return (\r\n        <div>\r\n          <h1>Галерия и изображения: {restaurant?.name}</h1>\r\n          \r\n          <div className=\"admin-controls\">\r\n            <div className=\"admin-filters\">\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'all' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('all')}\r\n              >\r\n                Всички\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'general' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('general')}\r\n              >\r\n                Общи\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'food' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('food')}\r\n              >\r\n                Храна\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'interior' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('interior')}\r\n              >\r\n                Интериор\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'exterior' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('exterior')}\r\n              >\r\n                Екстериор\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'events' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('events')}\r\n              >\r\n                Събития\r\n              </button>\r\n            </div>\r\n            \r\n            <button \r\n              className=\"admin-add-btn\"\r\n              onClick={() => {\r\n                resetForm();\r\n                setShowForm(!showForm);\r\n              }}\r\n            >\r\n              {showForm ? 'Отказ' : 'Добави изображение'}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Форма за добавяне/редактиране на изображение */}\r\n          {showForm && (\r\n            <div className=\"admin-form-container\">\r\n              <h2>{editingId ? 'Редактиране на изображение' : 'Ново изображение'}</h2>\r\n              <form onSubmit={handleSubmit} className=\"admin-form\">\r\n                <div className=\"form-group\">\r\n                  <label>Заглавие</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    name=\"title\" \r\n                    value={formData.title} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"Заглавие на изображението (незадължително)\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Описание</label>\r\n                  <textarea \r\n                    name=\"description\" \r\n                    value={formData.description} \r\n                    onChange={handleInputChange} \r\n                    rows=\"2\"\r\n                    placeholder=\"Кратко описание (незадължително)\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Категория</label>\r\n                  <select \r\n                    name=\"type\" \r\n                    value={formData.type} \r\n                    onChange={handleInputChange} \r\n                    required\r\n                  >\r\n                    <option value=\"general\">Общи</option>\r\n                    <option value=\"food\">Храна</option>\r\n                    <option value=\"interior\">Интериор</option>\r\n                    <option value=\"exterior\">Екстериор</option>\r\n                    <option value=\"events\">Събития</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Ред на показване</label>\r\n                    <input \r\n                      type=\"number\" \r\n                      name=\"order\" \r\n                      value={formData.order} \r\n                      onChange={handleInputChange} \r\n                      min=\"0\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group checkbox-group\">\r\n                    <label>\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        name=\"is_featured\" \r\n                        checked={formData.is_featured} \r\n                        onChange={handleInputChange} \r\n                      />\r\n                      Featured изображение (показва се на началната страница)\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Изображение</label>\r\n                  {formData.image_url ? (\r\n                    <div className=\"image-preview\">\r\n                      <img src={formData.image_url} alt=\"Предварителен преглед\" />\r\n                      <button \r\n                        type=\"button\" \r\n                        onClick={() => setFormData({...formData, image_url: ''})}\r\n                        className=\"remove-image-btn\"\r\n                      >\r\n                        <i className=\"fas fa-times\"></i> Премахни\r\n                      </button>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"upload-container\">\r\n                      <input \r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={handleFileChange}\r\n                        disabled={isUploading}\r\n                        ref={fileInputRef}\r\n                      />\r\n                      {isUploading && (\r\n                        <div className=\"upload-progress\">\r\n                          <div \r\n                            className=\"progress-bar\" \r\n                            style={{ width: `${uploadProgress}%` }}\r\n                          ></div>\r\n                          <span>{uploadProgress}%</span>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"upload-separator\">или</div>\r\n                      <input \r\n                        type=\"url\" \r\n                        name=\"image_url\" \r\n                        value={formData.image_url} \r\n                        onChange={handleInputChange} \r\n                        placeholder=\"Въведете URL на изображение\"\r\n                        disabled={isUploading}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"form-buttons\">\r\n                  <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                    Отказ\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\" \r\n                    className=\"admin-submit-btn\"\r\n                    disabled={isUploading}\r\n                  >\r\n                    {editingId ? 'Запази промените' : 'Добави изображение'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {/* Галерия с изображения */}\r\n      <div className=\"admin-gallery-container\">\r\n        {galleryItems.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма добавени изображения в тази категория.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"admin-gallery-grid\">\r\n            {galleryItems.map(item => (\r\n              <div key={item.id} className={`gallery-item ${item.is_featured ? 'featured' : ''}`}>\r\n                <div className=\"gallery-image\">\r\n                  <img src={item.image_url} alt={item.title || 'Изображение на галерия'} />\r\n                  {item.is_featured && (\r\n                    <div className=\"featured-badge\">\r\n                      <i className=\"fas fa-star\"></i> Featured\r\n                    </div>\r\n                  )}\r\n                  <div className=\"gallery-overlay\">\r\n                    <button \r\n                      className=\"gallery-action-btn view\"\r\n                      onClick={() => window.open(item.image_url, '_blank')}\r\n                    >\r\n                      <i className=\"fas fa-search-plus\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"gallery-action-btn star\"\r\n                      onClick={() => toggleFeatured(item.id, item.is_featured)}\r\n                    >\r\n                      <i className={`fas fa-${item.is_featured ? 'star' : 'star'}`}></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"gallery-action-btn edit\"\r\n                      onClick={() => handleEdit(item)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"gallery-action-btn delete\"\r\n                      onClick={() => handleDelete(item.id, item.image_url)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"gallery-info\">\r\n                  {item.title && <h4>{item.title}</h4>}\r\n                  {item.description && <p>{item.description}</p>}\r\n                  <div className=\"gallery-meta\">\r\n                    <span className=\"gallery-type\">{getTypeLabel(item.type)}</span>\r\n                    <span className=\"gallery-order\">Ред: {item.order}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}