{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{createClient}from'@supabase/supabase-js';import{useAuth}from'../context/AuthContext';// Останалият код...\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const supabaseUrl='https://lnquyopfvuikhjbjsiqk.supabase.co';const supabaseKey='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';const supabase=createClient(supabaseUrl,supabaseKey);function UserFavorites(){const{user}=useAuth();const[favorites,setFavorites]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchFavorites=async()=>{try{if(!user)return;// Зареждане на любими ресторанти за потребителя\nconst{data,error}=await supabase.from('favorites').select(`\n            *,\n            restaurants:restaurant_id(*)\n          `).eq('user_id',user.id);if(error)throw error;setFavorites(data);}catch(error){console.error('Грешка при зареждане на любими ресторанти:',error);}finally{setLoading(false);}};fetchFavorites();},[user]);const removeFavorite=async id=>{try{const{error}=await supabase.from('favorites').delete().eq('id',id);if(error)throw error;// Обновяване на списъка\nsetFavorites(favorites.filter(fav=>fav.id!==id));}catch(error){console.error('Грешка при премахване от любими:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-favorites-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041C\\u043E\\u0438\\u0442\\u0435 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"}),favorites.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-favorites\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u044F\\u043C\\u0430\\u0442\\u0435 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"favorites-grid\",children:favorites.map(favorite=>/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"favorite-image\",children:/*#__PURE__*/_jsx(\"img\",{src:favorite.restaurants.image_url||'https://via.placeholder.com/300x200?text=Няма+изображение',alt:favorite.restaurants.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:favorite.restaurants.name}),/*#__PURE__*/_jsx(\"p\",{children:favorite.restaurants.address})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"favorite-actions\",children:[/*#__PURE__*/_jsx(Link,{to:`/restaurant/${favorite.restaurant_id}`,className:\"view-restaurant-btn\",children:\"\\u0412\\u0438\\u0436 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-favorite-btn\",onClick:()=>removeFavorite(favorite.id),children:\"\\u041F\\u0440\\u0435\\u043C\\u0430\\u0445\\u043D\\u0438 \\u043E\\u0442 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438\"})]})]},favorite.id))})]});}export default UserFavorites;","map":{"version":3,"names":["React","useEffect","useState","Link","createClient","useAuth","jsx","_jsx","jsxs","_jsxs","supabaseUrl","supabaseKey","supabase","UserFavorites","user","favorites","setFavorites","loading","setLoading","fetchFavorites","data","error","from","select","eq","id","console","removeFavorite","delete","filter","fav","className","children","length","map","favorite","src","restaurants","image_url","alt","name","address","to","restaurant_id","onClick"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/UserFavorites.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n// Останалият код...\r\n\r\nconst supabaseUrl = 'https://lnquyopfvuikhjbjsiqk.supabase.co';\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nfunction UserFavorites() {\r\n  const { user } = useAuth();\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchFavorites = async () => {\r\n      try {\r\n        if (!user) return;\r\n\r\n        // Зареждане на любими ресторанти за потребителя\r\n        const { data, error } = await supabase\r\n          .from('favorites')\r\n          .select(`\r\n            *,\r\n            restaurants:restaurant_id(*)\r\n          `)\r\n          .eq('user_id', user.id);\r\n\r\n        if (error) throw error;\r\n        setFavorites(data);\r\n      } catch (error) {\r\n        console.error('Грешка при зареждане на любими ресторанти:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchFavorites();\r\n  }, [user]);\r\n\r\n  const removeFavorite = async (id) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('favorites')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n      if (error) throw error;\r\n\r\n      // Обновяване на списъка\r\n      setFavorites(favorites.filter(fav => fav.id !== id));\r\n    } catch (error) {\r\n      console.error('Грешка при премахване от любими:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Зареждане на любими ресторанти...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-favorites-container\">\r\n      <h1>Моите любими ресторанти</h1>\r\n      \r\n      {favorites.length === 0 ? (\r\n        <div className=\"no-favorites\">\r\n          <p>Нямате добавени любими ресторанти.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"favorites-grid\">\r\n          {favorites.map(favorite => (\r\n            <div key={favorite.id} className=\"favorite-card\">\r\n              <div className=\"favorite-image\">\r\n                <img \r\n                  src={favorite.restaurants.image_url || 'https://via.placeholder.com/300x200?text=Няма+изображение'} \r\n                  alt={favorite.restaurants.name} \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"favorite-info\">\r\n                <h3>{favorite.restaurants.name}</h3>\r\n                <p>{favorite.restaurants.address}</p>\r\n              </div>\r\n              \r\n              <div className=\"favorite-actions\">\r\n                <Link to={`/restaurant/${favorite.restaurant_id}`} className=\"view-restaurant-btn\">\r\n                  Виж ресторанта\r\n                </Link>\r\n                \r\n                <button \r\n                  className=\"remove-favorite-btn\"\r\n                  onClick={() => removeFavorite(favorite.id)}\r\n                >\r\n                  Премахни от любими\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserFavorites;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}