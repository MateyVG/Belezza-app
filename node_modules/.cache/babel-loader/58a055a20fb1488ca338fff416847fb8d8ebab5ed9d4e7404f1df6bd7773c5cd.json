{"ast":null,"code":"var _jsxFileName = \"D:\\\\Belezza\\\\restaurant-chain-app\\\\src\\\\pages\\\\AdminDashboard.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport '../styles/Admin.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const {\n    user,\n    userRole,\n    isSuperAdmin,\n    isRestaurantAdmin,\n    supabase,\n    signOut\n  } = useAuth();\n  const [section, setSection] = useState('dashboard');\n  const [restaurants, setRestaurants] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const {\n    section: urlSection,\n    restaurantId\n  } = useParams();\n\n  // Установяваме секцията от URL параметъра, ако е наличен\n  useEffect(() => {\n    if (urlSection) {\n      setSection(urlSection);\n    }\n  }, [urlSection]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        if (!user) {\n          navigate('/login');\n          return;\n        }\n\n        // Проверка дали потребителят има админ права\n        if (!isSuperAdmin() && !isRestaurantAdmin()) {\n          navigate('/');\n          return;\n        }\n\n        // Зареждане на ресторантите\n        let restaurantsQuery = supabase.from('restaurants').select('*');\n\n        // Ако е ресторантски админ, филтрираме само за неговия ресторант\n        if (isRestaurantAdmin()) {\n          restaurantsQuery = restaurantsQuery.eq('id', userRole.restaurant_id);\n        }\n        const {\n          data: restaurantsData,\n          error: restaurantsError\n        } = await restaurantsQuery;\n        if (restaurantsError) throw restaurantsError;\n        setRestaurants(restaurantsData);\n\n        // Избиране на ресторант от URL параметъра или по подразбиране\n        if (restaurantId) {\n          const restaurant = restaurantsData.find(r => r.id === restaurantId);\n          if (restaurant) {\n            setSelectedRestaurant(restaurant);\n          } else if (restaurantsData.length > 0) {\n            // Ако не намерим ресторанта от URL, избираме първия наличен\n            setSelectedRestaurant(restaurantsData[0]);\n          }\n        } else if (restaurantsData.length > 0) {\n          if (isRestaurantAdmin()) {\n            setSelectedRestaurant(restaurantsData[0]);\n          } else if (isSuperAdmin()) {\n            setSelectedRestaurant(restaurantsData[0]);\n          }\n        }\n      } catch (error) {\n        console.error('Error loading admin data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [user, userRole, isSuperAdmin, isRestaurantAdmin, navigate, restaurantId, supabase]);\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/login');\n  };\n\n  // Функция за смяна на секцията и обновяване на URL\n  const changeSection = newSection => {\n    setSection(newSection);\n    if (selectedRestaurant) {\n      navigate(`/admin/restaurant/${selectedRestaurant.id}/${newSection}`);\n    } else {\n      navigate(`/admin/${newSection}`);\n    }\n  };\n\n  // Функция за смяна на избрания ресторант и обновяване на URL\n  const changeRestaurant = restaurantId => {\n    const selected = restaurants.find(r => r.id === restaurantId);\n    setSelectedRestaurant(selected);\n    navigate(`/admin/restaurant/${restaurantId}/${section}`);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-loading\",\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0441\\u043A\\u0438 \\u043F\\u0430\\u043D\\u0435\\u043B...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-sidebar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0410\\u0434\\u043C\\u0438\\u043D \\u043F\\u0430\\u043D\\u0435\\u043B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: isSuperAdmin() ? 'Главен администратор' : 'Ресторантски администратор'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), isSuperAdmin() && restaurants.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"restaurant-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u0437\\u0431\\u0440\\u0430\\u043D \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: (selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.id) || '',\n            onChange: e => changeRestaurant(e.target.value),\n            children: restaurants.map(restaurant => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: restaurant.id,\n              children: restaurant.name\n            }, restaurant.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"admin-menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'dashboard' ? 'active' : '',\n          onClick: () => changeSection('dashboard'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-tachometer-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), \" \\u0422\\u0430\\u0431\\u043B\\u043E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'reservations' ? 'active' : '',\n          onClick: () => changeSection('reservations'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-calendar-check\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this), \" \\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'menu' ? 'active' : '',\n          onClick: () => changeSection('menu'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-utensils\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this), \" \\u041C\\u0435\\u043D\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'events' ? 'active' : '',\n          onClick: () => changeSection('events'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-calendar-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), \" \\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'special_offers' ? 'active' : '',\n          onClick: () => changeSection('special_offers'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-percentage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), \" \\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'tables' ? 'active' : '',\n          onClick: () => changeSection('tables'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-chair\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), \" \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0438\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          className: section === 'gallery' ? 'active' : '',\n          onClick: () => changeSection('gallery'),\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), \" \\u0413\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), isSuperAdmin() && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: section === 'restaurants' ? 'active' : '',\n            onClick: () => changeSection('restaurants'),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-store\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), \" \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: section === 'admins' ? 'active' : '',\n            onClick: () => changeSection('admins'),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-users-cog\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), \" \\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: section === 'reports' ? 'active' : '',\n            onClick: () => changeSection('reports'),\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-chart-bar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 17\n            }, this), \" \\u041E\\u0442\\u0447\\u0435\\u0442\\u0438 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: handleSignOut,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-sign-out-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), \" \\u0418\\u0437\\u0445\\u043E\\u0434\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-content\",\n      children: [section === 'dashboard' && /*#__PURE__*/_jsxDEV(DashboardSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this), section === 'reservations' && /*#__PURE__*/_jsxDEV(ReservationsSection, {\n        restaurant: selectedRestaurant,\n        supabase: supabase\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 3\n      }, this), section === 'menu' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u041C\\u0435\\u043D\\u044E: \", selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0435\\u043D\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), section === 'events' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F: \", selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }, this), section === 'special_offers' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F: \", selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u043D\\u0438 \\u043F\\u0440\\u0435\\u0434\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), section === 'tables' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0438: \", selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0430\\u0441\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 11\n      }, this), section === 'gallery' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"\\u0413\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F: \", selectedRestaurant === null || selectedRestaurant === void 0 ? void 0 : selectedRestaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0433\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this), section === 'restaurants' && isSuperAdmin() && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), section === 'admins' && isSuperAdmin() && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u0443\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }, this), section === 'reports' && isSuperAdmin() && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\u041E\\u0442\\u0447\\u0435\\u0442\\u0438 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0422\\u0443\\u043A \\u0449\\u0435 \\u0431\\u044A\\u0434\\u0435 \\u0441\\u0435\\u043A\\u0446\\u0438\\u044F\\u0442\\u0430 \\u0437\\u0430 \\u043E\\u0442\\u0447\\u0435\\u0442\\u0438 \\u0438 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n// Подсекция Табло\n// Подсекция Табло\n_s(AdminDashboard, \"AY3gp1YQGE488XDH7JbLVmaIUUc=\", false, function () {\n  return [useAuth, useNavigate, useParams];\n});\n_c = AdminDashboard;\nfunction DashboardSection({\n  restaurant,\n  supabase\n}) {\n  _s2();\n  const [stats, setStats] = useState({\n    reservationsToday: 0,\n    activeTables: 0,\n    totalTables: 0,\n    upcomingEvents: 0\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchStats = async () => {\n      if (!restaurant) return;\n      try {\n        setLoading(true);\n\n        // Получаване на днешната дата във формат YYYY-MM-DD\n        const today = new Date().toISOString().split('T')[0];\n\n        // Заявка за резервации днес\n        const {\n          data: reservations,\n          error: reservationsError\n        } = await supabase.from('reservations').select('*').eq('restaurant_id', restaurant.id).eq('date', today).in('status', ['confirmed', 'pending']);\n        if (reservationsError) throw reservationsError;\n\n        // Заявка за всички маси в ресторанта\n        const {\n          data: tables,\n          error: tablesError\n        } = await supabase.from('tables').select('*').eq('restaurant_id', restaurant.id);\n        if (tablesError) throw tablesError;\n\n        // Заявка за предстоящи събития\n        const {\n          data: events,\n          error: eventsError\n        } = await supabase.from('events').select('*').eq('restaurant_id', restaurant.id).gte('date', today);\n        if (eventsError) throw eventsError;\n\n        // Изчисляване на заетите маси\n        const reservedTableIds = reservations.map(r => r.table_id);\n        const activeTables = new Set(reservedTableIds).size;\n        setStats({\n          reservationsToday: reservations.length,\n          activeTables,\n          totalTables: tables.length,\n          upcomingEvents: events ? events.length : 0\n        });\n      } catch (error) {\n        console.error('Error fetching dashboard stats:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStats();\n  }, [restaurant, supabase]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0441\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 14\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0422\\u0430\\u0431\\u043B\\u043E: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438 \\u0434\\u043D\\u0435\\u0441\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"stat\",\n          children: stats.reservationsToday\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0438 \\u043C\\u0430\\u0441\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"stat\",\n          children: [stats.activeTables, \"/\", stats.totalTables]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"stat\",\n          children: stats.upcomingEvents\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0411\\u044A\\u0440\\u0437\\u0438 \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-buttons-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-action-btn\",\n          onClick: () => window.location.href = `/admin/restaurant/${restaurant === null || restaurant === void 0 ? void 0 : restaurant.id}/reservations`,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), \" \\u041D\\u043E\\u0432\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-action-btn\",\n          onClick: () => window.location.href = `/admin/restaurant/${restaurant === null || restaurant === void 0 ? void 0 : restaurant.id}/events`,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-calendar-plus\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438 \\u0441\\u044A\\u0431\\u0438\\u0442\\u0438\\u0435\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"admin-action-btn\",\n          onClick: () => window.location.href = `/admin/restaurant/${restaurant === null || restaurant === void 0 ? void 0 : restaurant.id}/menu`,\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-utensils\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), \" \\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043C\\u0435\\u043D\\u044E\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-info-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F \\u0437\\u0430 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this), restaurant ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"restaurant-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0418\\u043C\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 18\n          }, this), \" \", restaurant.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0410\\u0434\\u0440\\u0435\\u0441:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 18\n          }, this), \" \", restaurant.address || 'Не е зададен']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 18\n          }, this), \" \", restaurant.phone || 'Не е зададен']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u043D\\u043E \\u0432\\u0440\\u0435\\u043C\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 18\n          }, this), \" \", restaurant.hours || 'Не е зададено']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 15\n        }, this), restaurant.description && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 20\n          }, this), \" \", restaurant.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u044F\\u043C\\u0430 \\u0438\\u0437\\u0431\\u0440\\u0430\\u043D \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 349,\n    columnNumber: 7\n  }, this);\n}\n// Добавете тази функция преди export default AdminDashboard\n\n// Подсекция Резервации\n// Подсекция Резервации\n_s2(DashboardSection, \"gBRlqE5uAgS2dTr67SV3RGy9mOM=\");\n_c2 = DashboardSection;\nfunction ReservationsSection({\n  restaurant,\n  supabase\n}) {\n  _s3();\n  const [reservations, setReservations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('upcoming');\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    date: '',\n    time: '',\n    table_id: '',\n    name: '',\n    phone: '',\n    email: '',\n    guests_count: 2,\n    status: 'confirmed'\n  });\n  const [tables, setTables] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchReservations = async () => {\n      try {\n        setLoading(true);\n\n        // Получаване на днешната дата\n        const today = new Date().toISOString().split('T')[0];\n\n        // Съставяне на заявката според филтъра\n        let query = supabase.from('reservations').select(`\n              *,\n              tables:table_id (table_number, capacity)\n            `).eq('restaurant_id', restaurant.id);\n        if (filter === 'upcoming') {\n          query = query.gte('date', today);\n        } else if (filter === 'past') {\n          query = query.lt('date', today);\n        }\n\n        // Изпълнение на заявката\n        const {\n          data,\n          error\n        } = await query.order('date', {\n          ascending: true\n        });\n        if (error) throw error;\n        setReservations(data || []);\n\n        // Зареждане на масите за формата\n        const {\n          data: tablesData,\n          error: tablesError\n        } = await supabase.from('tables').select('*').eq('restaurant_id', restaurant.id);\n        if (tablesError) throw tablesError;\n        setTables(tablesData || []);\n      } catch (error) {\n        console.error('Error fetching reservations:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchReservations();\n  }, [restaurant, filter, supabase]);\n  const handleFilterChange = newFilter => {\n    setFilter(newFilter);\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      date: '',\n      time: '',\n      table_id: '',\n      name: '',\n      phone: '',\n      email: '',\n      guests_count: 2,\n      status: 'confirmed'\n    });\n    setEditingId(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id\n      };\n      let result;\n\n      // Актуализиране на съществуваща резервация или създаване на нова\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('reservations').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък с резервации\n        setReservations(reservations.map(res => res.id === editingId ? {\n          ...res,\n          ...result\n        } : res));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('reservations').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне на новата резервация към локалния списък\n        setReservations([...reservations, result]);\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving reservation:', error);\n      alert('Възникна грешка при запазване на резервацията');\n    }\n  };\n  const handleEdit = reservation => {\n    // Зареждане на формата с данните от избраната резервация\n    setFormData({\n      date: reservation.date,\n      time: reservation.time,\n      table_id: reservation.table_id,\n      name: reservation.name,\n      phone: reservation.phone,\n      email: reservation.email,\n      guests_count: reservation.guests_count,\n      status: reservation.status\n    });\n    setEditingId(reservation.id);\n    setShowForm(true);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази резервация?\")) {\n      return;\n    }\n    try {\n      const {\n        error\n      } = await supabase.from('reservations').delete().eq('id', id);\n      if (error) throw error;\n\n      // Премахване на изтритата резервация от локалния списък\n      setReservations(reservations.filter(res => res.id !== id));\n    } catch (error) {\n      console.error('Error deleting reservation:', error);\n      alert('Възникна грешка при изтриване на резервацията');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 14\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0420\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'upcoming' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('upcoming'),\n          children: \"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'past' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('past'),\n          children: \"\\u041C\\u0438\\u043D\\u0430\\u043B\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 601,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'all' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('all'),\n          children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави резервация'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на резервация' : 'Нова резервация'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0414\\u0430\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            name: \"date\",\n            value: formData.date,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0427\\u0430\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            name: \"time\",\n            value: formData.time,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041C\\u0430\\u0441\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 653,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"table_id\",\n            value: formData.table_id,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043C\\u0430\\u0441\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 660,\n              columnNumber: 19\n            }, this), tables.map(table => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: table.id,\n              children: [\"\\u041C\\u0430\\u0441\\u0430 \", table.table_number, \" (\", table.capacity, \" \\u043C\\u0435\\u0441\\u0442\\u0430)\"]\n            }, table.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u043C\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: formData.name,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"tel\",\n            name: \"phone\",\n            value: formData.phone,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            value: formData.email,\n            onChange: handleInputChange,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 691,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0411\\u0440\\u043E\\u0439 \\u0433\\u043E\\u0441\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 703,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"guests_count\",\n            value: formData.guests_count,\n            onChange: handleInputChange,\n            min: \"1\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 702,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"status\",\n            value: formData.status,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"confirmed\",\n              children: \"\\u041F\\u043E\\u0442\\u0432\\u044A\\u0440\\u0434\\u0435\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pending\",\n              children: \"\\u0427\\u0430\\u043A\\u0430\\u0449\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cancelled\",\n              children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            children: editingId ? 'Запази промените' : 'Добави резервация'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-table-container\",\n      children: reservations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u043D\\u0430\\u043C\\u0435\\u0440\\u0435\\u043D\\u0438 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"admin-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0430\\u0442\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 749,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0427\\u0430\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041C\\u0430\\u0441\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u041A\\u043B\\u0438\\u0435\\u043D\\u0442\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 752,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0413\\u043E\\u0441\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 755,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 756,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 748,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: reservations.map(reservation => {\n            var _reservation$tables;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: `status-${reservation.status}`,\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 762,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.time\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_reservation$tables = reservation.tables) === null || _reservation$tables === void 0 ? void 0 : _reservation$tables.table_number) || 'Неизвестно'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 764,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 767,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.phone\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: reservation.guests_count\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-badge ${reservation.status}`,\n                  children: reservation.status === 'confirmed' ? 'Потвърдена' : reservation.status === 'pending' ? 'Чакаща' : 'Отказана'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 771,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn edit\",\n                  onClick: () => handleEdit(reservation),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 781,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 777,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"admin-action-btn delete\",\n                  onClick: () => handleDelete(reservation.id),\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fas fa-trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 787,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 783,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 21\n              }, this)]\n            }, reservation.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 740,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 590,\n    columnNumber: 7\n  }, this);\n}\n_s3(ReservationsSection, \"3uyILGCRjE3cGvyHlsgOCXpejFQ=\");\n_c3 = ReservationsSection;\nexport default AdminDashboard;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AdminDashboard\");\n$RefreshReg$(_c2, \"DashboardSection\");\n$RefreshReg$(_c3, \"ReservationsSection\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","_s","user","userRole","isSuperAdmin","isRestaurantAdmin","supabase","signOut","section","setSection","restaurants","setRestaurants","selectedRestaurant","setSelectedRestaurant","loading","setLoading","navigate","urlSection","restaurantId","fetchData","restaurantsQuery","from","select","eq","restaurant_id","data","restaurantsData","error","restaurantsError","restaurant","find","r","id","length","console","handleSignOut","changeSection","newSection","changeRestaurant","selected","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","map","name","onClick","DashboardSection","ReservationsSection","_c","_s2","stats","setStats","reservationsToday","activeTables","totalTables","upcomingEvents","fetchStats","today","Date","toISOString","split","reservations","reservationsError","in","tables","tablesError","events","eventsError","gte","reservedTableIds","table_id","Set","size","window","location","href","address","phone","hours","description","_c2","_s3","setReservations","filter","setFilter","showForm","setShowForm","formData","setFormData","date","time","email","guests_count","status","setTables","editingId","setEditingId","fetchReservations","query","lt","order","ascending","tablesData","handleFilterChange","newFilter","handleInputChange","resetForm","handleSubmit","preventDefault","fullData","result","update","res","insert","alert","handleEdit","reservation","handleDelete","confirm","delete","onSubmit","type","required","table","table_number","capacity","min","_reservation$tables","_c3","$RefreshReg$"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/AdminDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport '../styles/Admin.css';\r\n\r\nfunction AdminDashboard() {\r\n  const { user, userRole, isSuperAdmin, isRestaurantAdmin, supabase, signOut } = useAuth();\r\n  const [section, setSection] = useState('dashboard');\r\n  const [restaurants, setRestaurants] = useState([]);\r\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n  const { section: urlSection, restaurantId } = useParams();\r\n\r\n  // Установяваме секцията от URL параметъра, ако е наличен\r\n  useEffect(() => {\r\n    if (urlSection) {\r\n      setSection(urlSection);\r\n    }\r\n  }, [urlSection]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        if (!user) {\r\n          navigate('/login');\r\n          return;\r\n        }\r\n        \r\n        // Проверка дали потребителят има админ права\r\n        if (!isSuperAdmin() && !isRestaurantAdmin()) {\r\n          navigate('/');\r\n          return;\r\n        }\r\n        \r\n        // Зареждане на ресторантите\r\n        let restaurantsQuery = supabase.from('restaurants').select('*');\r\n        \r\n        // Ако е ресторантски админ, филтрираме само за неговия ресторант\r\n        if (isRestaurantAdmin()) {\r\n          restaurantsQuery = restaurantsQuery.eq('id', userRole.restaurant_id);\r\n        }\r\n        \r\n        const { data: restaurantsData, error: restaurantsError } = await restaurantsQuery;\r\n        \r\n        if (restaurantsError) throw restaurantsError;\r\n        \r\n        setRestaurants(restaurantsData);\r\n        \r\n        // Избиране на ресторант от URL параметъра или по подразбиране\r\n        if (restaurantId) {\r\n          const restaurant = restaurantsData.find(r => r.id === restaurantId);\r\n          if (restaurant) {\r\n            setSelectedRestaurant(restaurant);\r\n          } else if (restaurantsData.length > 0) {\r\n            // Ако не намерим ресторанта от URL, избираме първия наличен\r\n            setSelectedRestaurant(restaurantsData[0]);\r\n          }\r\n        } else if (restaurantsData.length > 0) {\r\n          if (isRestaurantAdmin()) {\r\n            setSelectedRestaurant(restaurantsData[0]);\r\n          } else if (isSuperAdmin()) {\r\n            setSelectedRestaurant(restaurantsData[0]);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading admin data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchData();\r\n  }, [user, userRole, isSuperAdmin, isRestaurantAdmin, navigate, restaurantId, supabase]);\r\n\r\n  const handleSignOut = async () => {\r\n    await signOut();\r\n    navigate('/login');\r\n  };\r\n\r\n  // Функция за смяна на секцията и обновяване на URL\r\n  const changeSection = (newSection) => {\r\n    setSection(newSection);\r\n    if (selectedRestaurant) {\r\n      navigate(`/admin/restaurant/${selectedRestaurant.id}/${newSection}`);\r\n    } else {\r\n      navigate(`/admin/${newSection}`);\r\n    }\r\n  };\r\n\r\n  // Функция за смяна на избрания ресторант и обновяване на URL\r\n  const changeRestaurant = (restaurantId) => {\r\n    const selected = restaurants.find(r => r.id === restaurantId);\r\n    setSelectedRestaurant(selected);\r\n    navigate(`/admin/restaurant/${restaurantId}/${section}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"admin-loading\">Зареждане на администраторски панел...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"admin-container\">\r\n      <div className=\"admin-sidebar\">\r\n        <div className=\"admin-sidebar-header\">\r\n          <h2>Админ панел</h2>\r\n          <p>{isSuperAdmin() ? 'Главен администратор' : 'Ресторантски администратор'}</p>\r\n          \r\n          {isSuperAdmin() && restaurants.length > 0 && (\r\n            <div className=\"restaurant-selector\">\r\n              <label>Избран ресторант:</label>\r\n              <select \r\n                value={selectedRestaurant?.id || ''} \r\n                onChange={(e) => changeRestaurant(e.target.value)}\r\n              >\r\n                {restaurants.map((restaurant) => (\r\n                  <option key={restaurant.id} value={restaurant.id}>\r\n                    {restaurant.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <ul className=\"admin-menu\">\r\n          <li \r\n            className={section === 'dashboard' ? 'active' : ''}\r\n            onClick={() => changeSection('dashboard')}\r\n          >\r\n            <i className=\"fas fa-tachometer-alt\"></i> Табло\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'reservations' ? 'active' : ''}\r\n            onClick={() => changeSection('reservations')}\r\n          >\r\n            <i className=\"fas fa-calendar-check\"></i> Резервации\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'menu' ? 'active' : ''}\r\n            onClick={() => changeSection('menu')}\r\n          >\r\n            <i className=\"fas fa-utensils\"></i> Меню\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'events' ? 'active' : ''}\r\n            onClick={() => changeSection('events')}\r\n          >\r\n            <i className=\"fas fa-calendar-alt\"></i> Събития\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'special_offers' ? 'active' : ''}\r\n            onClick={() => changeSection('special_offers')}\r\n          >\r\n            <i className=\"fas fa-percentage\"></i> Специални предложения\r\n          </li>\r\n          \r\n          <li \r\n            className={section === 'tables' ? 'active' : ''}\r\n            onClick={() => changeSection('tables')}\r\n          >\r\n            <i className=\"fas fa-chair\"></i> Управление на маси\r\n          </li>\r\n\r\n          <li \r\n            className={section === 'gallery' ? 'active' : ''}\r\n            onClick={() => changeSection('gallery')}\r\n          >\r\n            <i className=\"fas fa-images\"></i> Галерия и изображения\r\n          </li>\r\n          \r\n          {isSuperAdmin() && (\r\n            <>\r\n              <li \r\n                className={section === 'restaurants' ? 'active' : ''}\r\n                onClick={() => changeSection('restaurants')}\r\n              >\r\n                <i className=\"fas fa-store\"></i> Управление на ресторанти\r\n              </li>\r\n              <li \r\n                className={section === 'admins' ? 'active' : ''}\r\n                onClick={() => changeSection('admins')}\r\n              >\r\n                <i className=\"fas fa-users-cog\"></i> Администратори\r\n              </li>\r\n              <li \r\n                className={section === 'reports' ? 'active' : ''}\r\n                onClick={() => changeSection('reports')}\r\n              >\r\n                <i className=\"fas fa-chart-bar\"></i> Отчети и статистика\r\n              </li>\r\n            </>\r\n          )}\r\n          \r\n          <li onClick={handleSignOut}>\r\n            <i className=\"fas fa-sign-out-alt\"></i> Изход\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      \r\n      <div className=\"admin-content\">\r\n        {section === 'dashboard' && (\r\n          <DashboardSection restaurant={selectedRestaurant} supabase={supabase} />\r\n        )}\r\n        \r\n        {section === 'reservations' && (\r\n  <ReservationsSection restaurant={selectedRestaurant} supabase={supabase} />\r\n)}\r\n        \r\n        {section === 'menu' && (\r\n          <div>\r\n            <h1>Меню: {selectedRestaurant?.name}</h1>\r\n            <p>Тук ще бъде секцията за управление на меню</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'events' && (\r\n          <div>\r\n            <h1>Събития: {selectedRestaurant?.name}</h1>\r\n            <p>Тук ще бъде секцията за управление на събития</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'special_offers' && (\r\n          <div>\r\n            <h1>Специални предложения: {selectedRestaurant?.name}</h1>\r\n            <p>Тук ще бъде секцията за управление на специални предложения</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'tables' && (\r\n          <div>\r\n            <h1>Управление на маси: {selectedRestaurant?.name}</h1>\r\n            <p>Тук ще бъде секцията за управление на маси</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'gallery' && (\r\n          <div>\r\n            <h1>Галерия и изображения: {selectedRestaurant?.name}</h1>\r\n            <p>Тук ще бъде секцията за управление на галерия</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'restaurants' && isSuperAdmin() && (\r\n          <div>\r\n            <h1>Управление на ресторанти</h1>\r\n            <p>Тук ще бъде секцията за управление на ресторанти</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'admins' && isSuperAdmin() && (\r\n          <div>\r\n            <h1>Управление на администратори</h1>\r\n            <p>Тук ще бъде секцията за управление на администратори</p>\r\n          </div>\r\n        )}\r\n        \r\n        {section === 'reports' && isSuperAdmin() && (\r\n          <div>\r\n            <h1>Отчети и статистика</h1>\r\n            <p>Тук ще бъде секцията за отчети и статистика</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Подсекция Табло\r\n// Подсекция Табло\r\nfunction DashboardSection({ restaurant, supabase }) {\r\n    const [stats, setStats] = useState({\r\n      reservationsToday: 0,\r\n      activeTables: 0,\r\n      totalTables: 0,\r\n      upcomingEvents: 0\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n  \r\n    useEffect(() => {\r\n      const fetchStats = async () => {\r\n        if (!restaurant) return;\r\n        \r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Получаване на днешната дата във формат YYYY-MM-DD\r\n          const today = new Date().toISOString().split('T')[0];\r\n          \r\n          // Заявка за резервации днес\r\n          const { data: reservations, error: reservationsError } = await supabase\r\n            .from('reservations')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id)\r\n            .eq('date', today)\r\n            .in('status', ['confirmed', 'pending']);\r\n          \r\n          if (reservationsError) throw reservationsError;\r\n          \r\n          // Заявка за всички маси в ресторанта\r\n          const { data: tables, error: tablesError } = await supabase\r\n            .from('tables')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (tablesError) throw tablesError;\r\n          \r\n          // Заявка за предстоящи събития\r\n          const { data: events, error: eventsError } = await supabase\r\n            .from('events')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id)\r\n            .gte('date', today);\r\n          \r\n          if (eventsError) throw eventsError;\r\n          \r\n          // Изчисляване на заетите маси\r\n          const reservedTableIds = reservations.map(r => r.table_id);\r\n          const activeTables = new Set(reservedTableIds).size;\r\n          \r\n          setStats({\r\n            reservationsToday: reservations.length,\r\n            activeTables,\r\n            totalTables: tables.length,\r\n            upcomingEvents: events ? events.length : 0\r\n          });\r\n        } catch (error) {\r\n          console.error('Error fetching dashboard stats:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchStats();\r\n    }, [restaurant, supabase]);\r\n  \r\n    if (loading) {\r\n      return <div>Зареждане на статистика...</div>;\r\n    }\r\n  \r\n    return (\r\n      <div>\r\n        <h1>Табло: {restaurant?.name}</h1>\r\n        <div className=\"admin-stats-grid\">\r\n          <div className=\"admin-stat-card\">\r\n            <h3>Резервации днес</h3>\r\n            <p className=\"stat\">{stats.reservationsToday}</p>\r\n          </div>\r\n          \r\n          <div className=\"admin-stat-card\">\r\n            <h3>Активни маси</h3>\r\n            <p className=\"stat\">{stats.activeTables}/{stats.totalTables}</p>\r\n          </div>\r\n          \r\n          <div className=\"admin-stat-card\">\r\n            <h3>Предстоящи събития</h3>\r\n            <p className=\"stat\">{stats.upcomingEvents}</p>\r\n          </div>\r\n        </div>\r\n  \r\n        <div className=\"quick-actions\">\r\n          <h2>Бързи действия</h2>\r\n          <div className=\"admin-buttons-grid\">\r\n            <button className=\"admin-action-btn\" onClick={() => window.location.href = `/admin/restaurant/${restaurant?.id}/reservations`}>\r\n              <i className=\"fas fa-plus\"></i> Нова резервация\r\n            </button>\r\n            <button className=\"admin-action-btn\" onClick={() => window.location.href = `/admin/restaurant/${restaurant?.id}/events`}>\r\n              <i className=\"fas fa-calendar-plus\"></i> Добави събитие\r\n            </button>\r\n            <button className=\"admin-action-btn\" onClick={() => window.location.href = `/admin/restaurant/${restaurant?.id}/menu`}>\r\n              <i className=\"fas fa-utensils\"></i> Управление на меню\r\n            </button>\r\n          </div>\r\n        </div>\r\n  \r\n        <div className=\"admin-info-section\">\r\n          <h2>Информация за ресторанта</h2>\r\n          {restaurant ? (\r\n            <div className=\"restaurant-details\">\r\n              <p><strong>Име:</strong> {restaurant.name}</p>\r\n              <p><strong>Адрес:</strong> {restaurant.address || 'Не е зададен'}</p>\r\n              <p><strong>Телефон:</strong> {restaurant.phone || 'Не е зададен'}</p>\r\n              <p><strong>Работно време:</strong> {restaurant.hours || 'Не е зададено'}</p>\r\n              {restaurant.description && (\r\n                <p><strong>Описание:</strong> {restaurant.description}</p>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <p>Няма избран ресторант</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n// Добавете тази функция преди export default AdminDashboard\r\n\r\n// Подсекция Резервации\r\n // Подсекция Резервации\r\nfunction ReservationsSection({ restaurant, supabase }) {\r\n    const [reservations, setReservations] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState('upcoming');\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      date: '',\r\n      time: '',\r\n      table_id: '',\r\n      name: '',\r\n      phone: '',\r\n      email: '',\r\n      guests_count: 2,\r\n      status: 'confirmed'\r\n    });\r\n    const [tables, setTables] = useState([]);\r\n    const [editingId, setEditingId] = useState(null);\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchReservations = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          // Получаване на днешната дата\r\n          const today = new Date().toISOString().split('T')[0];\r\n          \r\n          // Съставяне на заявката според филтъра\r\n          let query = supabase\r\n            .from('reservations')\r\n            .select(`\r\n              *,\r\n              tables:table_id (table_number, capacity)\r\n            `)\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (filter === 'upcoming') {\r\n            query = query.gte('date', today);\r\n          } else if (filter === 'past') {\r\n            query = query.lt('date', today);\r\n          }\r\n          \r\n          // Изпълнение на заявката\r\n          const { data, error } = await query.order('date', { ascending: true });\r\n          \r\n          if (error) throw error;\r\n          \r\n          setReservations(data || []);\r\n          \r\n          // Зареждане на масите за формата\r\n          const { data: tablesData, error: tablesError } = await supabase\r\n            .from('tables')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (tablesError) throw tablesError;\r\n          \r\n          setTables(tablesData || []);\r\n        } catch (error) {\r\n          console.error('Error fetching reservations:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchReservations();\r\n    }, [restaurant, filter, supabase]);\r\n  \r\n    const handleFilterChange = (newFilter) => {\r\n      setFilter(newFilter);\r\n    };\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        date: '',\r\n        time: '',\r\n        table_id: '',\r\n        name: '',\r\n        phone: '',\r\n        email: '',\r\n        guests_count: 2,\r\n        status: 'confirmed'\r\n      });\r\n      setEditingId(null);\r\n    };\r\n  \r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      \r\n      try {\r\n        const fullData = {\r\n          ...formData,\r\n          restaurant_id: restaurant.id\r\n        };\r\n        \r\n        let result;\r\n        \r\n        // Актуализиране на съществуваща резервация или създаване на нова\r\n        if (editingId) {\r\n          const { data, error } = await supabase\r\n            .from('reservations')\r\n            .update(fullData)\r\n            .eq('id', editingId)\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          // Актуализиране на локалния списък с резервации\r\n          setReservations(reservations.map(res => \r\n            res.id === editingId ? { ...res, ...result } : res\r\n          ));\r\n        } else {\r\n          const { data, error } = await supabase\r\n            .from('reservations')\r\n            .insert([fullData])\r\n            .select();\r\n          \r\n          if (error) throw error;\r\n          result = data[0];\r\n          \r\n          // Добавяне на новата резервация към локалния списък\r\n          setReservations([...reservations, result]);\r\n        }\r\n        \r\n        resetForm();\r\n        setShowForm(false);\r\n      } catch (error) {\r\n        console.error('Error saving reservation:', error);\r\n        alert('Възникна грешка при запазване на резервацията');\r\n      }\r\n    };\r\n  \r\n    const handleEdit = (reservation) => {\r\n      // Зареждане на формата с данните от избраната резервация\r\n      setFormData({\r\n        date: reservation.date,\r\n        time: reservation.time,\r\n        table_id: reservation.table_id,\r\n        name: reservation.name,\r\n        phone: reservation.phone,\r\n        email: reservation.email,\r\n        guests_count: reservation.guests_count,\r\n        status: reservation.status\r\n      });\r\n      setEditingId(reservation.id);\r\n      setShowForm(true);\r\n    };\r\n  \r\n    const handleDelete = async (id) => {\r\n      if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази резервация?\")) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        const { error } = await supabase\r\n          .from('reservations')\r\n          .delete()\r\n          .eq('id', id);\r\n        \r\n        if (error) throw error;\r\n        \r\n        // Премахване на изтритата резервация от локалния списък\r\n        setReservations(reservations.filter(res => res.id !== id));\r\n      } catch (error) {\r\n        console.error('Error deleting reservation:', error);\r\n        alert('Възникна грешка при изтриване на резервацията');\r\n      }\r\n    };\r\n  \r\n    if (loading) {\r\n      return <div>Зареждане на резервации...</div>;\r\n    }\r\n  \r\n    return (\r\n      <div>\r\n        <h1>Резервации: {restaurant?.name}</h1>\r\n        \r\n        <div className=\"admin-controls\">\r\n          <div className=\"admin-filters\">\r\n            <button \r\n              className={`admin-filter-btn ${filter === 'upcoming' ? 'active' : ''}`} \r\n              onClick={() => handleFilterChange('upcoming')}\r\n            >\r\n              Предстоящи\r\n            </button>\r\n            <button \r\n              className={`admin-filter-btn ${filter === 'past' ? 'active' : ''}`} \r\n              onClick={() => handleFilterChange('past')}\r\n            >\r\n              Минали\r\n            </button>\r\n            <button \r\n              className={`admin-filter-btn ${filter === 'all' ? 'active' : ''}`} \r\n              onClick={() => handleFilterChange('all')}\r\n            >\r\n              Всички\r\n            </button>\r\n          </div>\r\n          \r\n          <button \r\n            className=\"admin-add-btn\"\r\n            onClick={() => {\r\n              resetForm();\r\n              setShowForm(!showForm);\r\n            }}\r\n          >\r\n            {showForm ? 'Отказ' : 'Добави резервация'}\r\n          </button>\r\n        </div>\r\n        \r\n        {showForm && (\r\n          <div className=\"admin-form-container\">\r\n            <h2>{editingId ? 'Редактиране на резервация' : 'Нова резервация'}</h2>\r\n            <form onSubmit={handleSubmit} className=\"admin-form\">\r\n              <div className=\"form-group\">\r\n                <label>Дата</label>\r\n                <input \r\n                  type=\"date\" \r\n                  name=\"date\" \r\n                  value={formData.date} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Час</label>\r\n                <input \r\n                  type=\"time\" \r\n                  name=\"time\" \r\n                  value={formData.time} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Маса</label>\r\n                <select \r\n                  name=\"table_id\" \r\n                  value={formData.table_id} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"\">Изберете маса</option>\r\n                  {tables.map(table => (\r\n                    <option key={table.id} value={table.id}>\r\n                      Маса {table.table_number} ({table.capacity} места)\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Име</label>\r\n                <input \r\n                  type=\"text\" \r\n                  name=\"name\" \r\n                  value={formData.name} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Телефон</label>\r\n                <input \r\n                  type=\"tel\" \r\n                  name=\"phone\" \r\n                  value={formData.phone} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Email</label>\r\n                <input \r\n                  type=\"email\" \r\n                  name=\"email\" \r\n                  value={formData.email} \r\n                  onChange={handleInputChange} \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Брой гости</label>\r\n                <input \r\n                  type=\"number\" \r\n                  name=\"guests_count\" \r\n                  value={formData.guests_count} \r\n                  onChange={handleInputChange} \r\n                  min=\"1\" \r\n                  required \r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label>Статус</label>\r\n                <select \r\n                  name=\"status\" \r\n                  value={formData.status} \r\n                  onChange={handleInputChange} \r\n                  required\r\n                >\r\n                  <option value=\"confirmed\">Потвърдена</option>\r\n                  <option value=\"pending\">Чакаща</option>\r\n                  <option value=\"cancelled\">Отказана</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-buttons\">\r\n                <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                  Отказ\r\n                </button>\r\n                <button type=\"submit\" className=\"admin-submit-btn\">\r\n                  {editingId ? 'Запази промените' : 'Добави резервация'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"admin-table-container\">\r\n          {reservations.length === 0 ? (\r\n            <div className=\"admin-no-data\">\r\n              <p>Няма намерени резервации.</p>\r\n            </div>\r\n          ) : (\r\n            <table className=\"admin-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Дата</th>\r\n                  <th>Час</th>\r\n                  <th>Маса</th>\r\n                  <th>Клиент</th>\r\n                  <th>Телефон</th>\r\n                  <th>Гости</th>\r\n                  <th>Статус</th>\r\n                  <th>Действия</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {reservations.map(reservation => (\r\n                  <tr key={reservation.id} className={`status-${reservation.status}`}>\r\n                    <td>{reservation.date}</td>\r\n                    <td>{reservation.time}</td>\r\n                    <td>\r\n                      {reservation.tables?.table_number || 'Неизвестно'}\r\n                    </td>\r\n                    <td>{reservation.name}</td>\r\n                    <td>{reservation.phone}</td>\r\n                    <td>{reservation.guests_count}</td>\r\n                    <td>\r\n                      <span className={`status-badge ${reservation.status}`}>\r\n                        {reservation.status === 'confirmed' ? 'Потвърдена' : \r\n                         reservation.status === 'pending' ? 'Чакаща' : 'Отказана'}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <button \r\n                        className=\"admin-action-btn edit\"\r\n                        onClick={() => handleEdit(reservation)}\r\n                      >\r\n                        <i className=\"fas fa-edit\"></i>\r\n                      </button>\r\n                      <button \r\n                        className=\"admin-action-btn delete\"\r\n                        onClick={() => handleDelete(reservation.id)}\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}