{"ast":null,"code":"var _jsxFileName = \"D:\\\\Belezza\\\\restaurant-chain-app\\\\src\\\\pages\\\\UserReservations.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { supabase } from '../utils/supabase';\nimport '../styles/UserPages.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserReservations() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [reservations, setReservations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchReservations = async () => {\n      try {\n        if (!user) return;\n\n        // Зареждане на резервации за потребителя\n        const {\n          data,\n          error\n        } = await supabase.from('reservations').select(`\n            *,\n            restaurants:restaurant_id(id, name, address, image_url),\n            tables:table_id(table_number, capacity)\n          `).eq('email', user.email).order('date', {\n          ascending: true\n        });\n        if (error) throw error;\n        setReservations(data);\n      } catch (error) {\n        console.error('Грешка при зареждане на резервации:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchReservations();\n  }, [user]);\n  const cancelReservation = async id => {\n    try {\n      const {\n        error\n      } = await supabase.from('reservations').update({\n        status: 'cancelled'\n      }).eq('id', id);\n      if (error) throw error;\n\n      // Обновяване на списъка с резервации\n      setReservations(reservations.map(res => res.id === id ? {\n        ...res,\n        status: 'cancelled'\n      } : res));\n    } catch (error) {\n      console.error('Грешка при отказване на резервация:', error);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"user-reservations-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u041C\\u043E\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), reservations.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-reservations\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u044F\\u043C\\u0430\\u0442\\u0435 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0438 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reservations-list\",\n      children: reservations.map(reservation => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `reservation-card ${reservation.status}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reservation-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: reservation.restaurants.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `reservation-status ${reservation.status}`,\n            children: reservation.status === 'confirmed' ? 'Потвърдена' : reservation.status === 'cancelled' ? 'Отказана' : 'Чакаща'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reservation-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0414\\u0430\\u0442\\u0430:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 20\n            }, this), \" \", reservation.date]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0427\\u0430\\u0441:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 20\n            }, this), \" \", reservation.time]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u041C\\u0430\\u0441\\u0430 \\u2116:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 20\n            }, this), \" \", reservation.tables.table_number]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0411\\u0440\\u043E\\u0439 \\u0433\\u043E\\u0441\\u0442\\u0438:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 20\n            }, this), \" \", reservation.guests_count]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this), reservation.status !== 'cancelled' && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel-reservation-btn\",\n          onClick: () => cancelReservation(reservation.id),\n          children: \"\\u041E\\u0442\\u043A\\u0430\\u0436\\u0438 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u044F\\u0442\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this)]\n      }, reservation.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(UserReservations, \"7EXNTRNqL5RAnyH2kAR5O7ryxa8=\", false, function () {\n  return [useAuth];\n});\n_c = UserReservations;\nexport default UserReservations;\nvar _c;\n$RefreshReg$(_c, \"UserReservations\");","map":{"version":3,"names":["React","useEffect","useState","useAuth","supabase","jsxDEV","_jsxDEV","UserReservations","_s","user","reservations","setReservations","loading","setLoading","fetchReservations","data","error","from","select","eq","email","order","ascending","console","cancelReservation","id","update","status","map","res","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","reservation","restaurants","name","date","time","tables","table_number","guests_count","onClick","_c","$RefreshReg$"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/UserReservations.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { supabase } from '../utils/supabase';\r\nimport '../styles/UserPages.css';\r\n\r\nfunction UserReservations() {\r\n  const { user } = useAuth();\r\n  const [reservations, setReservations] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchReservations = async () => {\r\n      try {\r\n        if (!user) return;\r\n\r\n        // Зареждане на резервации за потребителя\r\n        const { data, error } = await supabase\r\n          .from('reservations')\r\n          .select(`\r\n            *,\r\n            restaurants:restaurant_id(id, name, address, image_url),\r\n            tables:table_id(table_number, capacity)\r\n          `)\r\n          .eq('email', user.email)\r\n          .order('date', { ascending: true });\r\n\r\n        if (error) throw error;\r\n        setReservations(data);\r\n      } catch (error) {\r\n        console.error('Грешка при зареждане на резервации:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchReservations();\r\n  }, [user]);\r\n\r\n  const cancelReservation = async (id) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('reservations')\r\n        .update({ status: 'cancelled' })\r\n        .eq('id', id);\r\n\r\n      if (error) throw error;\r\n\r\n      // Обновяване на списъка с резервации\r\n      setReservations(reservations.map(res => \r\n        res.id === id ? { ...res, status: 'cancelled' } : res\r\n      ));\r\n    } catch (error) {\r\n      console.error('Грешка при отказване на резервация:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Зареждане на резервации...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-reservations-container\">\r\n      <h1>Моите резервации</h1>\r\n      \r\n      {reservations.length === 0 ? (\r\n        <div className=\"no-reservations\">\r\n          <p>Нямате активни резервации.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"reservations-list\">\r\n          {reservations.map(reservation => (\r\n            <div key={reservation.id} className={`reservation-card ${reservation.status}`}>\r\n              <div className=\"reservation-header\">\r\n                <h2>{reservation.restaurants.name}</h2>\r\n                <span className={`reservation-status ${reservation.status}`}>\r\n                  {reservation.status === 'confirmed' ? 'Потвърдена' :\r\n                   reservation.status === 'cancelled' ? 'Отказана' : 'Чакаща'}\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"reservation-details\">\r\n                <p><strong>Дата:</strong> {reservation.date}</p>\r\n                <p><strong>Час:</strong> {reservation.time}</p>\r\n                <p><strong>Маса №:</strong> {reservation.tables.table_number}</p>\r\n                <p><strong>Брой гости:</strong> {reservation.guests_count}</p>\r\n              </div>\r\n              \r\n              {reservation.status !== 'cancelled' && (\r\n                <button \r\n                  className=\"cancel-reservation-btn\"\r\n                  onClick={() => cancelReservation(reservation.id)}\r\n                >\r\n                  Откажи резервацията\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserReservations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}