{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{createClient}from'@supabase/supabase-js';import{useAuth}from'../context/AuthContext';// Останалият код...\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const supabaseUrl='https://lnquyopfvuikhjbjsiqk.supabase.co';const supabaseKey='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';const supabase=createClient(supabaseUrl,supabaseKey);function UserDashboard(){const{user}=useAuth();const[userData,setUserData]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchUserData=async()=>{try{if(!user)return;// Получаване на потребителски данни от профила\nconst{data,error}=await supabase.from('profiles').select('*').eq('id',user.id).single();if(error)throw error;setUserData(data);}catch(error){console.error('Грешка при зареждане на потребителски данни:',error);}finally{setLoading(false);}};fetchUserData();},[user]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"user-dashboard-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\u0414\\u043E\\u0431\\u0440\\u0435 \\u0434\\u043E\\u0448\\u043B\\u0438, \",(userData===null||userData===void 0?void 0:userData.full_name)||(user===null||user===void 0?void 0:user.email)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u044F\\u0432\\u0430\\u0439\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0438\\u0442\\u0435 \\u0440\\u0435\\u0437\\u0435\\u0440\\u0432\\u0430\\u0446\\u0438\\u0438\"}),/*#__PURE__*/_jsx(Link,{to:\"/user/reservations\",className:\"dashboard-link\",children:\"\\u041F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u0438\\u0436\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0438\\u0442\\u0435 \\u043B\\u044E\\u0431\\u0438\\u043C\\u0438 \\u0440\\u0435\\u0441\\u0442\\u043E\\u0440\\u0430\\u043D\\u0442\\u0438\"}),/*#__PURE__*/_jsx(Link,{to:\"/user/favorites\",className:\"dashboard-link\",children:\"\\u041F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u044F\\u0442 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u0439\\u0442\\u0435 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u043D\\u0430\\u0442\\u0430 \\u0441\\u0438 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"dashboard-link\",children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u0430\\u043D\\u0435\"})]})]})]});}export default UserDashboard;","map":{"version":3,"names":["React","useEffect","useState","Link","createClient","useAuth","jsx","_jsx","jsxs","_jsxs","supabaseUrl","supabaseKey","supabase","UserDashboard","user","userData","setUserData","loading","setLoading","fetchUserData","data","error","from","select","eq","id","single","console","className","children","full_name","email","to"],"sources":["D:/Belezza/restaurant-chain-app/src/pages/UserDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\n// Останалият код...\r\n\r\nconst supabaseUrl = 'https://lnquyopfvuikhjbjsiqk.supabase.co';\r\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxucXV5b3BmdnVpa2hqYmpzaXFrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU0ODA5MDEsImV4cCI6MjA2MTA1NjkwMX0.GmZ-5FzZkJyMorLGggF_Jegx2Atn0wRiNKCx4esecJw';\r\nconst supabase = createClient(supabaseUrl, supabaseKey);\r\n\r\nfunction UserDashboard() {\r\n  const { user } = useAuth();\r\n  const [userData, setUserData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      try {\r\n        if (!user) return;\r\n\r\n        // Получаване на потребителски данни от профила\r\n        const { data, error } = await supabase\r\n          .from('profiles')\r\n          .select('*')\r\n          .eq('id', user.id)\r\n          .single();\r\n\r\n        if (error) throw error;\r\n        setUserData(data);\r\n      } catch (error) {\r\n        console.error('Грешка при зареждане на потребителски данни:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchUserData();\r\n  }, [user]);\r\n\r\n  if (loading) {\r\n    return <div className=\"loading\">Зареждане...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-dashboard-container\">\r\n      <h1>Добре дошли, {userData?.full_name || user?.email}</h1>\r\n      \r\n      <div className=\"dashboard-cards\">\r\n        <div className=\"dashboard-card\">\r\n          <h2>Моите резервации</h2>\r\n          <p>Управлявайте вашите резервации</p>\r\n          <Link to=\"/user/reservations\" className=\"dashboard-link\">Преглед</Link>\r\n        </div>\r\n        \r\n        <div className=\"dashboard-card\">\r\n          <h2>Любими ресторанти</h2>\r\n          <p>Вижте вашите любими ресторанти</p>\r\n          <Link to=\"/user/favorites\" className=\"dashboard-link\">Преглед</Link>\r\n        </div>\r\n        \r\n        <div className=\"dashboard-card\">\r\n          <h2>Моят профил</h2>\r\n          <p>Редактирайте профилната си информация</p>\r\n          <Link to=\"/profile\" className=\"dashboard-link\">Редактиране</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}