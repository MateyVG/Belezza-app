{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminMenuSection(_ref){let{restaurant,supabase}=_ref;const[menuItems,setMenuItems]=useState([]);const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[selectedCategory,setSelectedCategory]=useState('all');useEffect(()=>{if(!restaurant)return;const fetchMenuData=async()=>{try{setLoading(true);// Зареждане на категории\nconst{data:categoriesData,error:categoriesError}=await supabase.from('menu_categories').select('*').eq('restaurant_id',restaurant.id).order('order',{ascending:true});if(categoriesError)throw categoriesError;setCategories(categoriesData||[]);// Зареждане на продукти от менюто\nlet query=supabase.from('menu_items').select(`\n            *,\n            menu_categories:category_id (id, name)\n          `).eq('restaurant_id',restaurant.id);if(selectedCategory!=='all'){query=query.eq('category_id',selectedCategory);}const{data:menuData,error:menuError}=await query.order('name',{ascending:true});if(menuError)throw menuError;setMenuItems(menuData||[]);}catch(error){console.error('Error fetching menu data:',error);}finally{setLoading(false);}};fetchMenuData();},[restaurant,supabase,selectedCategory]);const handleCategoryChange=categoryId=>{setSelectedCategory(categoryId);};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043C\\u0435\\u043D\\u044E...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\u041C\\u0435\\u043D\\u044E: \",restaurant===null||restaurant===void 0?void 0:restaurant.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-controls menu-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-filter-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0424\\u0438\\u043B\\u0442\\u0440\\u0438\\u0440\\u0430\\u043D\\u0435 \\u043F\\u043E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-filters\",children:[/*#__PURE__*/_jsx(\"button\",{className:`admin-filter-btn ${selectedCategory==='all'?'active':''}`,onClick:()=>handleCategoryChange('all'),children:\"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),categories.map(category=>/*#__PURE__*/_jsx(\"button\",{className:`admin-filter-btn ${selectedCategory===category.id?'active':''}`,onClick:()=>handleCategoryChange(category.id),children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-add-btn\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-add-btn\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-table-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 \\u0432 \\u043C\\u0435\\u043D\\u044E\\u0442\\u043E\"}),menuItems.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"admin-no-data\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 \\u0432 \\u043C\\u0435\\u043D\\u044E\\u0442\\u043E.\"})}):/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:menuItems.map(item=>{var _item$menu_categories,_item$price;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.name}),/*#__PURE__*/_jsx(\"td\",{children:((_item$menu_categories=item.menu_categories)===null||_item$menu_categories===void 0?void 0:_item$menu_categories.name)||'Без категория'}),/*#__PURE__*/_jsxs(\"td\",{children:[(_item$price=item.price)===null||_item$price===void 0?void 0:_item$price.toFixed(2),\" \\u043B\\u0432.\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`status-badge ${item.is_available?'active':'inactive'}`,children:item.is_available?'Наличен':'Неналичен'})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-action-btn edit\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-action-btn delete\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},item.id);})})]})]})]});}export default AdminMenuSection;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AdminMenuSection","_ref","restaurant","supabase","menuItems","setMenuItems","categories","setCategories","loading","setLoading","selectedCategory","setSelectedCategory","fetchMenuData","data","categoriesData","error","categoriesError","from","select","eq","id","order","ascending","query","menuData","menuError","console","handleCategoryChange","categoryId","children","name","className","onClick","map","category","length","item","_item$menu_categories","_item$price","menu_categories","price","toFixed","is_available"],"sources":["D:/Belezza/restaurant-chain-app/src/components/AdminGallerySection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction AdminMenuSection({ restaurant, supabase }) {\r\n  const [menuItems, setMenuItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n\r\n  useEffect(() => {\r\n    if (!restaurant) return;\r\n\r\n    const fetchMenuData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Зареждане на категории\r\n        const { data: categoriesData, error: categoriesError } = await supabase\r\n          .from('menu_categories')\r\n          .select('*')\r\n          .eq('restaurant_id', restaurant.id)\r\n          .order('order', { ascending: true });\r\n        \r\n        if (categoriesError) throw categoriesError;\r\n        setCategories(categoriesData || []);\r\n        \r\n        // Зареждане на продукти от менюто\r\n        let query = supabase\r\n          .from('menu_items')\r\n          .select(`\r\n            *,\r\n            menu_categories:category_id (id, name)\r\n          `)\r\n          .eq('restaurant_id', restaurant.id);\r\n        \r\n        if (selectedCategory !== 'all') {\r\n          query = query.eq('category_id', selectedCategory);\r\n        }\r\n        \r\n        const { data: menuData, error: menuError } = await query\r\n          .order('name', { ascending: true });\r\n        \r\n        if (menuError) throw menuError;\r\n        setMenuItems(menuData || []);\r\n      } catch (error) {\r\n        console.error('Error fetching menu data:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchMenuData();\r\n  }, [restaurant, supabase, selectedCategory]);\r\n\r\n  const handleCategoryChange = (categoryId) => {\r\n    setSelectedCategory(categoryId);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Зареждане на меню...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Меню: {restaurant?.name}</h1>\r\n      \r\n      <div className=\"admin-controls menu-controls\">\r\n        <div className=\"admin-filter-container\">\r\n          <h3>Филтриране по категория:</h3>\r\n          <div className=\"category-filters\">\r\n            <button \r\n              className={`admin-filter-btn ${selectedCategory === 'all' ? 'active' : ''}`} \r\n              onClick={() => handleCategoryChange('all')}\r\n            >\r\n              Всички категории\r\n            </button>\r\n            {categories.map(category => (\r\n              <button \r\n                key={category.id} \r\n                className={`admin-filter-btn ${selectedCategory === category.id ? 'active' : ''}`}\r\n                onClick={() => handleCategoryChange(category.id)}\r\n              >\r\n                {category.name}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"admin-button-group\">\r\n          <button className=\"admin-add-btn\">\r\n            Добави категория\r\n          </button>\r\n          \r\n          <button className=\"admin-add-btn\">\r\n            Добави продукт\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"admin-table-container\">\r\n        <h2>Продукти в менюто</h2>\r\n        {menuItems.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма добавени продукти в менюто.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Име</th>\r\n                <th>Категория</th>\r\n                <th>Цена</th>\r\n                <th>Статус</th>\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {menuItems.map(item => (\r\n                <tr key={item.id}>\r\n                  <td>{item.name}</td>\r\n                  <td>{item.menu_categories?.name || 'Без категория'}</td>\r\n                  <td>{item.price?.toFixed(2)} лв.</td>\r\n                  <td>\r\n                    <span className={`status-badge ${item.is_available ? 'active' : 'inactive'}`}>\r\n                      {item.is_available ? 'Наличен' : 'Неналичен'}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    <button className=\"admin-action-btn edit\">\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button className=\"admin-action-btn delete\">\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminMenuSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}