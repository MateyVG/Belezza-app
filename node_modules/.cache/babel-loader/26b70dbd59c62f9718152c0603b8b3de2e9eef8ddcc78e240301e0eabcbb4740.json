{"ast":null,"code":"var _jsxFileName = \"D:\\\\Belezza\\\\restaurant-chain-app\\\\src\\\\components\\\\AdminGallerySection.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminGallerySection({\n  restaurant,\n  supabase\n}) {\n  _s();\n  const [galleryItems, setGalleryItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    image_url: '',\n    type: 'general',\n    // 'general', 'food', 'interior', 'exterior', 'events'\n    order: 0,\n    is_featured: false\n  });\n  const [editingId, setEditingId] = useState(null);\n  const [filter, setFilter] = useState('all');\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const fileInputRef = useRef(null);\n  useEffect(() => {\n    if (!restaurant) return;\n    const fetchGallery = async () => {\n      try {\n        setLoading(true);\n        let query = supabase.from('gallery').select('*').eq('restaurant_id', restaurant.id);\n        if (filter !== 'all') {\n          query = query.eq('type', filter);\n        }\n        const {\n          data,\n          error\n        } = await query.order('is_featured', {\n          ascending: false\n        }).order('order', {\n          ascending: true\n        });\n        if (error) throw error;\n        setGalleryItems(data || []);\n      } catch (error) {\n        console.error('Error fetching gallery:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchGallery();\n  }, [restaurant, filter, supabase]);\n  const handleInputChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: type === 'checkbox' ? checked : name === 'order' ? parseInt(value, 10) : value\n    });\n  };\n  const resetForm = () => {\n    setFormData({\n      title: '',\n      description: '',\n      image_url: '',\n      type: 'general',\n      order: galleryItems.length > 0 ? Math.max(...galleryItems.map(item => item.order || 0)) + 1 : 0,\n      is_featured: false\n    });\n    setEditingId(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  const handleFileChange = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Проверка на типа файл\n    if (!['image/jpeg', 'image/png', 'image/webp', 'image/gif'].includes(file.type)) {\n      alert('Моля, качете изображение (JPEG, PNG, WEBP, GIF)');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      return;\n    }\n\n    // Проверка на размера (максимум 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      alert('Размерът на файла не може да надвишава 5MB');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n      return;\n    }\n    try {\n      setIsUploading(true);\n      setUploadProgress(0);\n\n      // Генериране на уникално име на файла\n      const fileExt = file.name.split('.').pop();\n      const fileName = `${restaurant.id}/${Date.now()}.${fileExt}`;\n\n      // Качване на файла в Supabase Storage\n      const {\n        data,\n        error\n      } = await supabase.storage.from('gallery_images').upload(fileName, file, {\n        cacheControl: '3600',\n        upsert: false,\n        onUploadProgress: progress => {\n          setUploadProgress(Math.round(progress.loaded / progress.total * 100));\n        }\n      });\n      if (error) throw error;\n\n      // Получаване на публичен URL на качения файл\n      const {\n        data: urlData\n      } = supabase.storage.from('gallery_images').getPublicUrl(data.path);\n\n      // Актуализиране на формата с URL-а на изображението\n      setFormData({\n        ...formData,\n        image_url: urlData.publicUrl\n      });\n      setIsUploading(false);\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      alert('Възникна грешка при качване на изображението');\n      setIsUploading(false);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!formData.image_url) {\n      alert('Моля, качете или въведете URL на изображение');\n      return;\n    }\n    try {\n      const fullData = {\n        ...formData,\n        restaurant_id: restaurant.id\n      };\n      let result;\n      if (editingId) {\n        const {\n          data,\n          error\n        } = await supabase.from('gallery').update(fullData).eq('id', editingId).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Актуализиране на локалния списък\n        setGalleryItems(galleryItems.map(item => item.id === editingId ? {\n          ...item,\n          ...result\n        } : item));\n      } else {\n        const {\n          data,\n          error\n        } = await supabase.from('gallery').insert([fullData]).select();\n        if (error) throw error;\n        result = data[0];\n\n        // Добавяне към локалния списък, ако съответства на текущия филтър\n        if (filter === 'all' || filter === result.type) {\n          setGalleryItems([...galleryItems, result]);\n        }\n      }\n      resetForm();\n      setShowForm(false);\n    } catch (error) {\n      console.error('Error saving gallery item:', error);\n      alert('Възникна грешка при запазване на изображението');\n    }\n  };\n  const handleEdit = item => {\n    setFormData({\n      title: item.title || '',\n      description: item.description || '',\n      image_url: item.image_url,\n      type: item.type || 'general',\n      order: item.order || 0,\n      is_featured: item.is_featured || false\n    });\n    setEditingId(item.id);\n    setShowForm(true);\n  };\n  const handleDelete = async (id, imageUrl) => {\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това изображение?\")) {\n      return;\n    }\n    try {\n      // Изтриване на записа от базата данни\n      const {\n        error\n      } = await supabase.from('gallery').delete().eq('id', id);\n      if (error) throw error;\n\n      // Опит за изтриване на файла от Storage (ако е в нашия Storage)\n      if (imageUrl.includes('supabase') && imageUrl.includes('/storage/v1/object/public/gallery_images/')) {\n        try {\n          const path = imageUrl.split('/gallery_images/')[1];\n          if (path) {\n            await supabase.storage.from('gallery_images').remove([path]);\n          }\n        } catch (storageError) {\n          console.error('Error deleting file from storage:', storageError);\n          // Не прекъсваме процеса, ако изтриването от storage се провали\n        }\n      }\n\n      // Премахване от локалния списък\n      setGalleryItems(galleryItems.filter(item => item.id !== id));\n    } catch (error) {\n      console.error('Error deleting gallery item:', error);\n      alert('Възникна грешка при изтриване на изображението');\n    }\n  };\n  const toggleFeatured = async (id, currentStatus) => {\n    try {\n      const {\n        error\n      } = await supabase.from('gallery').update({\n        is_featured: !currentStatus\n      }).eq('id', id);\n      if (error) throw error;\n\n      // Актуализиране на локалния списък\n      setGalleryItems(galleryItems.map(item => item.id === id ? {\n        ...item,\n        is_featured: !currentStatus\n      } : item));\n    } catch (error) {\n      console.error('Error updating featured status:', error);\n      alert('Възникна грешка при промяна на статуса');\n    }\n  };\n  const handleFilterChange = newFilter => {\n    setFilter(newFilter);\n  };\n  const getTypeLabel = type => {\n    switch (type) {\n      case 'food':\n        return 'Храна';\n      case 'interior':\n        return 'Интериор';\n      case 'exterior':\n        return 'Екстериор';\n      case 'events':\n        return 'Събития';\n      default:\n        return 'Общи';\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u0433\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"\\u0413\\u0430\\u043B\\u0435\\u0440\\u0438\\u044F \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F: \", restaurant === null || restaurant === void 0 ? void 0 : restaurant.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-filters\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'all' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('all'),\n          children: \"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'general' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('general'),\n          children: \"\\u041E\\u0431\\u0449\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'food' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('food'),\n          children: \"\\u0425\\u0440\\u0430\\u043D\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'interior' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('interior'),\n          children: \"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'exterior' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('exterior'),\n          children: \"\\u0415\\u043A\\u0441\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `admin-filter-btn ${filter === 'events' ? 'active' : ''}`,\n          onClick: () => handleFilterChange('events'),\n          children: \"\\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-add-btn\",\n        onClick: () => {\n          resetForm();\n          setShowForm(!showForm);\n        },\n        children: showForm ? 'Отказ' : 'Добави изображение'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: editingId ? 'Редактиране на изображение' : 'Ново изображение'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"admin-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0417\\u0430\\u0433\\u043B\\u0430\\u0432\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"title\",\n            value: formData.title,\n            onChange: handleInputChange,\n            placeholder: \"\\u0417\\u0430\\u0433\\u043B\\u0430\\u0432\\u0438\\u0435 \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\\u0442\\u043E (\\u043D\\u0435\\u0437\\u0430\\u0434\\u044A\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u043D\\u043E)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: formData.description,\n            onChange: handleInputChange,\n            rows: \"2\",\n            placeholder: \"\\u041A\\u0440\\u0430\\u0442\\u043A\\u043E \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 (\\u043D\\u0435\\u0437\\u0430\\u0434\\u044A\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u043D\\u043E)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"type\",\n            value: formData.type,\n            onChange: handleInputChange,\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"general\",\n              children: \"\\u041E\\u0431\\u0449\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"food\",\n              children: \"\\u0425\\u0440\\u0430\\u043D\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"interior\",\n              children: \"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"exterior\",\n              children: \"\\u0415\\u043A\\u0441\\u0442\\u0435\\u0440\\u0438\\u043E\\u0440\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"events\",\n              children: \"\\u0421\\u044A\\u0431\\u0438\\u0442\\u0438\\u044F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0420\\u0435\\u0434 \\u043D\\u0430 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0432\\u0430\\u043D\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"order\",\n              value: formData.order,\n              onChange: handleInputChange,\n              min: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group checkbox-group\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                name: \"is_featured\",\n                checked: formData.is_featured,\n                onChange: handleInputChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 23\n              }, this), \"Featured \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435 (\\u043F\\u043E\\u043A\\u0430\\u0437\\u0432\\u0430 \\u0441\\u0435 \\u043D\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u043D\\u0430\\u0442\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 19\n          }, this), formData.image_url ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-preview\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: formData.image_url,\n              alt: \"\\u041F\\u0440\\u0435\\u0434\\u0432\\u0430\\u0440\\u0438\\u0442\\u0435\\u043B\\u0435\\u043D \\u043F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setFormData({\n                ...formData,\n                image_url: ''\n              }),\n              className: \"remove-image-btn\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 25\n              }, this), \" \\u041F\\u0440\\u0435\\u043C\\u0430\\u0445\\u043D\\u0438\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleFileChange,\n              disabled: isUploading,\n              ref: fileInputRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 23\n            }, this), isUploading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-progress\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-bar\",\n                style: {\n                  width: `${uploadProgress}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [uploadProgress, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"upload-separator\",\n              children: \"\\u0438\\u043B\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"url\",\n              name: \"image_url\",\n              value: formData.image_url,\n              onChange: handleInputChange,\n              placeholder: \"\\u0412\\u044A\\u0432\\u0435\\u0434\\u0435\\u0442\\u0435 URL \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\",\n              disabled: isUploading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"admin-cancel-btn\",\n            onClick: () => setShowForm(false),\n            children: \"\\u041E\\u0442\\u043A\\u0430\\u0437\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"admin-submit-btn\",\n            disabled: isUploading,\n            children: editingId ? 'Запази промените' : 'Добави изображение'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-gallery-container\",\n      children: galleryItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-no-data\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F \\u0432 \\u0442\\u0430\\u0437\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-gallery-grid\",\n        children: galleryItems.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `gallery-item ${item.is_featured ? 'featured' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gallery-image\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: item.image_url,\n              alt: item.title || 'Изображение на галерия'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 19\n            }, this), item.is_featured && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"featured-badge\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-star\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 23\n              }, this), \" Featured\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gallery-overlay\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn view\",\n                onClick: () => window.open(item.image_url, '_blank'),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-search-plus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 477,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn star\",\n                onClick: () => toggleFeatured(item.id, item.is_featured),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fas fa-${item.is_featured ? 'star' : 'star'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 487,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 483,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn edit\",\n                onClick: () => handleEdit(item),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"gallery-action-btn delete\",\n                onClick: () => handleDelete(item.id, item.image_url),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gallery-info\",\n            children: [item.title && /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 504,\n              columnNumber: 34\n            }, this), item.description && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: item.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 40\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"gallery-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"gallery-type\",\n                children: getTypeLabel(item.type)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"gallery-order\",\n                children: [\"\\u0420\\u0435\\u0434: \", item.order]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 17\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 278,\n    columnNumber: 9\n  }, this);\n}\n_s(AdminGallerySection, \"/yZ0tyXKetUSXmewEiqqcag378w=\");\n_c = AdminGallerySection;\nexport default AdminGallerySection;\nvar _c;\n$RefreshReg$(_c, \"AdminGallerySection\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","AdminGallerySection","restaurant","supabase","_s","galleryItems","setGalleryItems","loading","setLoading","showForm","setShowForm","formData","setFormData","title","description","image_url","type","order","is_featured","editingId","setEditingId","filter","setFilter","isUploading","setIsUploading","uploadProgress","setUploadProgress","fileInputRef","useRef","fetchGallery","query","from","select","eq","id","data","error","ascending","console","handleInputChange","e","name","value","checked","target","parseInt","resetForm","length","Math","max","map","item","current","handleFileChange","file","files","includes","alert","size","fileExt","split","pop","fileName","Date","now","storage","upload","cacheControl","upsert","onUploadProgress","progress","round","loaded","total","urlData","getPublicUrl","path","publicUrl","handleSubmit","preventDefault","fullData","restaurant_id","result","update","insert","handleEdit","handleDelete","imageUrl","window","confirm","delete","remove","storageError","toggleFeatured","currentStatus","handleFilterChange","newFilter","getTypeLabel","children","_jsxFileName","lineNumber","columnNumber","className","onClick","onSubmit","onChange","placeholder","rows","required","min","src","alt","accept","disabled","ref","style","width","open","_c","$RefreshReg$"],"sources":["D:/Belezza/restaurant-chain-app/src/components/AdminGallerySection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nfunction AdminGallerySection({ restaurant, supabase }) {\r\n    const [galleryItems, setGalleryItems] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n      title: '',\r\n      description: '',\r\n      image_url: '',\r\n      type: 'general', // 'general', 'food', 'interior', 'exterior', 'events'\r\n      order: 0,\r\n      is_featured: false\r\n    });\r\n    const [editingId, setEditingId] = useState(null);\r\n    const [filter, setFilter] = useState('all');\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [uploadProgress, setUploadProgress] = useState(0);\r\n    const fileInputRef = useRef(null);\r\n  \r\n    useEffect(() => {\r\n      if (!restaurant) return;\r\n  \r\n      const fetchGallery = async () => {\r\n        try {\r\n          setLoading(true);\r\n          \r\n          let query = supabase\r\n            .from('gallery')\r\n            .select('*')\r\n            .eq('restaurant_id', restaurant.id);\r\n          \r\n          if (filter !== 'all') {\r\n            query = query.eq('type', filter);\r\n          }\r\n          \r\n          const { data, error } = await query\r\n            .order('is_featured', { ascending: false })\r\n            .order('order', { ascending: true });\r\n          \r\n          if (error) throw error;\r\n          \r\n          setGalleryItems(data || []);\r\n        } catch (error) {\r\n          console.error('Error fetching gallery:', error);\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      };\r\n      \r\n      fetchGallery();\r\n    }, [restaurant, filter, supabase]);\r\n  \r\n    const handleInputChange = (e) => {\r\n      const { name, value, type, checked } = e.target;\r\n      setFormData({\r\n        ...formData,\r\n        [name]: type === 'checkbox' ? checked : \r\n                name === 'order' ? parseInt(value, 10) : value\r\n      });\r\n    };\r\n  \r\n    const resetForm = () => {\r\n      setFormData({\r\n        title: '',\r\n        description: '',\r\n        image_url: '',\r\n        type: 'general',\r\n        order: galleryItems.length > 0 ? Math.max(...galleryItems.map(item => item.order || 0)) + 1 : 0,\r\n        is_featured: false\r\n      });\r\n      setEditingId(null);\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n    };\r\n    const handleFileChange = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        \r\n        // Проверка на типа файл\r\n        if (!['image/jpeg', 'image/png', 'image/webp', 'image/gif'].includes(file.type)) {\r\n          alert('Моля, качете изображение (JPEG, PNG, WEBP, GIF)');\r\n          if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n          }\r\n          return;\r\n        }\r\n        \r\n        // Проверка на размера (максимум 5MB)\r\n        if (file.size > 5 * 1024 * 1024) {\r\n          alert('Размерът на файла не може да надвишава 5MB');\r\n          if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n          }\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          setIsUploading(true);\r\n          setUploadProgress(0);\r\n          \r\n          // Генериране на уникално име на файла\r\n          const fileExt = file.name.split('.').pop();\r\n          const fileName = `${restaurant.id}/${Date.now()}.${fileExt}`;\r\n          \r\n          // Качване на файла в Supabase Storage\r\n          const { data, error } = await supabase.storage\r\n            .from('gallery_images')\r\n            .upload(fileName, file, {\r\n              cacheControl: '3600',\r\n              upsert: false,\r\n              onUploadProgress: (progress) => {\r\n                setUploadProgress(Math.round((progress.loaded / progress.total) * 100));\r\n              }\r\n            });\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Получаване на публичен URL на качения файл\r\n          const { data: urlData } = supabase.storage\r\n            .from('gallery_images')\r\n            .getPublicUrl(data.path);\r\n          \r\n          // Актуализиране на формата с URL-а на изображението\r\n          setFormData({\r\n            ...formData,\r\n            image_url: urlData.publicUrl\r\n          });\r\n          \r\n          setIsUploading(false);\r\n        } catch (error) {\r\n          console.error('Error uploading image:', error);\r\n          alert('Възникна грешка при качване на изображението');\r\n          setIsUploading(false);\r\n        }\r\n      };\r\n    \r\n      const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!formData.image_url) {\r\n          alert('Моля, качете или въведете URL на изображение');\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          const fullData = {\r\n            ...formData,\r\n            restaurant_id: restaurant.id\r\n          };\r\n          \r\n          let result;\r\n          \r\n          if (editingId) {\r\n            const { data, error } = await supabase\r\n              .from('gallery')\r\n              .update(fullData)\r\n              .eq('id', editingId)\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Актуализиране на локалния списък\r\n            setGalleryItems(galleryItems.map(item => \r\n              item.id === editingId ? { ...item, ...result } : item\r\n            ));\r\n          } else {\r\n            const { data, error } = await supabase\r\n              .from('gallery')\r\n              .insert([fullData])\r\n              .select();\r\n            \r\n            if (error) throw error;\r\n            result = data[0];\r\n            \r\n            // Добавяне към локалния списък, ако съответства на текущия филтър\r\n            if (filter === 'all' || filter === result.type) {\r\n              setGalleryItems([...galleryItems, result]);\r\n            }\r\n          }\r\n          \r\n          resetForm();\r\n          setShowForm(false);\r\n        } catch (error) {\r\n          console.error('Error saving gallery item:', error);\r\n          alert('Възникна грешка при запазване на изображението');\r\n        }\r\n      };\r\n      const handleEdit = (item) => {\r\n        setFormData({\r\n          title: item.title || '',\r\n          description: item.description || '',\r\n          image_url: item.image_url,\r\n          type: item.type || 'general',\r\n          order: item.order || 0,\r\n          is_featured: item.is_featured || false\r\n        });\r\n        setEditingId(item.id);\r\n        setShowForm(true);\r\n      };\r\n    \r\n      const handleDelete = async (id, imageUrl) => {\r\n        if (!window.confirm(\"Сигурни ли сте, че искате да изтриете това изображение?\")) {\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          // Изтриване на записа от базата данни\r\n          const { error } = await supabase\r\n            .from('gallery')\r\n            .delete()\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Опит за изтриване на файла от Storage (ако е в нашия Storage)\r\n          if (imageUrl.includes('supabase') && imageUrl.includes('/storage/v1/object/public/gallery_images/')) {\r\n            try {\r\n              const path = imageUrl.split('/gallery_images/')[1];\r\n              if (path) {\r\n                await supabase.storage\r\n                  .from('gallery_images')\r\n                  .remove([path]);\r\n              }\r\n            } catch (storageError) {\r\n              console.error('Error deleting file from storage:', storageError);\r\n              // Не прекъсваме процеса, ако изтриването от storage се провали\r\n            }\r\n          }\r\n          \r\n          // Премахване от локалния списък\r\n          setGalleryItems(galleryItems.filter(item => item.id !== id));\r\n        } catch (error) {\r\n          console.error('Error deleting gallery item:', error);\r\n          alert('Възникна грешка при изтриване на изображението');\r\n        }\r\n      };\r\n    \r\n      const toggleFeatured = async (id, currentStatus) => {\r\n        try {\r\n          const { error } = await supabase\r\n            .from('gallery')\r\n            .update({ is_featured: !currentStatus })\r\n            .eq('id', id);\r\n          \r\n          if (error) throw error;\r\n          \r\n          // Актуализиране на локалния списък\r\n          setGalleryItems(galleryItems.map(item => \r\n            item.id === id ? { ...item, is_featured: !currentStatus } : item\r\n          ));\r\n        } catch (error) {\r\n          console.error('Error updating featured status:', error);\r\n          alert('Възникна грешка при промяна на статуса');\r\n        }\r\n      };\r\n    \r\n      const handleFilterChange = (newFilter) => {\r\n        setFilter(newFilter);\r\n      };\r\n    \r\n      const getTypeLabel = (type) => {\r\n        switch (type) {\r\n          case 'food': return 'Храна';\r\n          case 'interior': return 'Интериор';\r\n          case 'exterior': return 'Екстериор';\r\n          case 'events': return 'Събития';\r\n          default: return 'Общи';\r\n        }\r\n      };\r\n    \r\n      if (loading) {\r\n        return <div>Зареждане на галерия...</div>;\r\n      }\r\n      return (\r\n        <div>\r\n          <h1>Галерия и изображения: {restaurant?.name}</h1>\r\n          \r\n          <div className=\"admin-controls\">\r\n            <div className=\"admin-filters\">\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'all' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('all')}\r\n              >\r\n                Всички\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'general' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('general')}\r\n              >\r\n                Общи\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'food' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('food')}\r\n              >\r\n                Храна\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'interior' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('interior')}\r\n              >\r\n                Интериор\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'exterior' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('exterior')}\r\n              >\r\n                Екстериор\r\n              </button>\r\n              <button \r\n                className={`admin-filter-btn ${filter === 'events' ? 'active' : ''}`} \r\n                onClick={() => handleFilterChange('events')}\r\n              >\r\n                Събития\r\n              </button>\r\n            </div>\r\n            \r\n            <button \r\n              className=\"admin-add-btn\"\r\n              onClick={() => {\r\n                resetForm();\r\n                setShowForm(!showForm);\r\n              }}\r\n            >\r\n              {showForm ? 'Отказ' : 'Добави изображение'}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Форма за добавяне/редактиране на изображение */}\r\n          {showForm && (\r\n            <div className=\"admin-form-container\">\r\n              <h2>{editingId ? 'Редактиране на изображение' : 'Ново изображение'}</h2>\r\n              <form onSubmit={handleSubmit} className=\"admin-form\">\r\n                <div className=\"form-group\">\r\n                  <label>Заглавие</label>\r\n                  <input \r\n                    type=\"text\" \r\n                    name=\"title\" \r\n                    value={formData.title} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"Заглавие на изображението (незадължително)\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Описание</label>\r\n                  <textarea \r\n                    name=\"description\" \r\n                    value={formData.description} \r\n                    onChange={handleInputChange} \r\n                    rows=\"2\"\r\n                    placeholder=\"Кратко описание (незадължително)\"\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Категория</label>\r\n                  <select \r\n                    name=\"type\" \r\n                    value={formData.type} \r\n                    onChange={handleInputChange} \r\n                    required\r\n                  >\r\n                    <option value=\"general\">Общи</option>\r\n                    <option value=\"food\">Храна</option>\r\n                    <option value=\"interior\">Интериор</option>\r\n                    <option value=\"exterior\">Екстериор</option>\r\n                    <option value=\"events\">Събития</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group\">\r\n                    <label>Ред на показване</label>\r\n                    <input \r\n                      type=\"number\" \r\n                      name=\"order\" \r\n                      value={formData.order} \r\n                      onChange={handleInputChange} \r\n                      min=\"0\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"form-group checkbox-group\">\r\n                    <label>\r\n                      <input \r\n                        type=\"checkbox\" \r\n                        name=\"is_featured\" \r\n                        checked={formData.is_featured} \r\n                        onChange={handleInputChange} \r\n                      />\r\n                      Featured изображение (показва се на началната страница)\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group\">\r\n                  <label>Изображение</label>\r\n                  {formData.image_url ? (\r\n                    <div className=\"image-preview\">\r\n                      <img src={formData.image_url} alt=\"Предварителен преглед\" />\r\n                      <button \r\n                        type=\"button\" \r\n                        onClick={() => setFormData({...formData, image_url: ''})}\r\n                        className=\"remove-image-btn\"\r\n                      >\r\n                        <i className=\"fas fa-times\"></i> Премахни\r\n                      </button>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"upload-container\">\r\n                      <input \r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={handleFileChange}\r\n                        disabled={isUploading}\r\n                        ref={fileInputRef}\r\n                      />\r\n                      {isUploading && (\r\n                        <div className=\"upload-progress\">\r\n                          <div \r\n                            className=\"progress-bar\" \r\n                            style={{ width: `${uploadProgress}%` }}\r\n                          ></div>\r\n                          <span>{uploadProgress}%</span>\r\n                        </div>\r\n                      )}\r\n                      <div className=\"upload-separator\">или</div>\r\n                      <input \r\n                        type=\"url\" \r\n                        name=\"image_url\" \r\n                        value={formData.image_url} \r\n                        onChange={handleInputChange} \r\n                        placeholder=\"Въведете URL на изображение\"\r\n                        disabled={isUploading}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"form-buttons\">\r\n                  <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                    Отказ\r\n                  </button>\r\n                  <button \r\n                    type=\"submit\" \r\n                    className=\"admin-submit-btn\"\r\n                    disabled={isUploading}\r\n                  >\r\n                    {editingId ? 'Запази промените' : 'Добави изображение'}\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          )}\r\n          {/* Галерия с изображения */}\r\n      <div className=\"admin-gallery-container\">\r\n        {galleryItems.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма добавени изображения в тази категория.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"admin-gallery-grid\">\r\n            {galleryItems.map(item => (\r\n              <div key={item.id} className={`gallery-item ${item.is_featured ? 'featured' : ''}`}>\r\n                <div className=\"gallery-image\">\r\n                  <img src={item.image_url} alt={item.title || 'Изображение на галерия'} />\r\n                  {item.is_featured && (\r\n                    <div className=\"featured-badge\">\r\n                      <i className=\"fas fa-star\"></i> Featured\r\n                    </div>\r\n                  )}\r\n                  <div className=\"gallery-overlay\">\r\n                    <button \r\n                      className=\"gallery-action-btn view\"\r\n                      onClick={() => window.open(item.image_url, '_blank')}\r\n                    >\r\n                      <i className=\"fas fa-search-plus\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"gallery-action-btn star\"\r\n                      onClick={() => toggleFeatured(item.id, item.is_featured)}\r\n                    >\r\n                      <i className={`fas fa-${item.is_featured ? 'star' : 'star'}`}></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"gallery-action-btn edit\"\r\n                      onClick={() => handleEdit(item)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"gallery-action-btn delete\"\r\n                      onClick={() => handleDelete(item.id, item.image_url)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"gallery-info\">\r\n                  {item.title && <h4>{item.title}</h4>}\r\n                  {item.description && <p>{item.description}</p>}\r\n                  <div className=\"gallery-meta\">\r\n                    <span className=\"gallery-type\">{getTypeLabel(item.type)}</span>\r\n                    <span className=\"gallery-order\">Ред: {item.order}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default AdminGallerySection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}