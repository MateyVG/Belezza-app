{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminMenuSection(_ref){let{restaurant,supabase}=_ref;const[categories,setCategories]=useState([]);const[menuItems,setMenuItems]=useState([]);const[loading,setLoading]=useState(true);const[showForm,setShowForm]=useState(false);const[formData,setFormData]=useState({name:'',description:'',price:'',category_id:'',is_available:true,image_url:'',allergens:'',recommended:false});const[showCategoryForm,setShowCategoryForm]=useState(false);const[categoryFormData,setCategoryFormData]=useState({name:'',order:0});const[editingId,setEditingId]=useState(null);const[editingCategoryId,setEditingCategoryId]=useState(null);const[selectedCategory,setSelectedCategory]=useState('all');const[isUploading,setIsUploading]=useState(false);const[uploadProgress,setUploadProgress]=useState(0);const fileInputRef=useRef(null);useEffect(()=>{if(!restaurant)return;fetchMenuData();},[restaurant,selectedCategory,supabase]);const fetchMenuData=async()=>{try{setLoading(true);// Зареждане на категории\nconst{data:categoriesData,error:categoriesError}=await supabase.from('menu_categories').select('*').eq('restaurant_id',restaurant.id).order('order',{ascending:true});if(categoriesError)throw categoriesError;setCategories(categoriesData||[]);// Зареждане на продукти от менюто\nlet query=supabase.from('menu_items').select(`\n          *,\n          menu_categories:category_id (id, name)\n        `).eq('restaurant_id',restaurant.id);if(selectedCategory!=='all'){query=query.eq('category_id',selectedCategory);}const{data:menuData,error:menuError}=await query.order('name',{ascending:true});if(menuError)throw menuError;setMenuItems(menuData||[]);}catch(error){console.error('Error fetching menu data:',error);}finally{setLoading(false);}};const handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData({...formData,[name]:type==='checkbox'?checked:type==='number'?parseFloat(value):value});};const handleCategoryInputChange=e=>{const{name,value,type,checked}=e.target;setCategoryFormData({...categoryFormData,[name]:type==='checkbox'?checked:name==='order'?parseInt(value,10):value});};const resetForm=()=>{setFormData({name:'',description:'',price:'',category_id:'',is_available:true,image_url:'',allergens:'',recommended:false});setEditingId(null);if(fileInputRef.current){fileInputRef.current.value='';}};const resetCategoryForm=()=>{setCategoryFormData({name:'',order:categories.length>0?Math.max(...categories.map(c=>c.order))+1:0});setEditingCategoryId(null);};const handleFileChange=async e=>{const file=e.target.files[0];if(!file)return;// Проверка на типа файл\nif(!['image/jpeg','image/png','image/webp','image/gif'].includes(file.type)){alert('Моля, качете изображение (JPEG, PNG, WEBP, GIF)');if(fileInputRef.current){fileInputRef.current.value='';}return;}// Проверка на размера (максимум 5MB)\nif(file.size>5*1024*1024){alert('Размерът на файла не може да надвишава 5MB');if(fileInputRef.current){fileInputRef.current.value='';}return;}try{setIsUploading(true);setUploadProgress(0);// Генериране на уникално име на файла\nconst fileExt=file.name.split('.').pop();const fileName=`${restaurant.id}/menu/${Date.now()}.${fileExt}`;// Качване на файла в Supabase Storage\nconst{data,error}=await supabase.storage.from('menu_images').upload(fileName,file,{cacheControl:'3600',upsert:false,onUploadProgress:progress=>{setUploadProgress(Math.round(progress.loaded/progress.total*100));}});if(error)throw error;// Получаване на публичен URL на качения файл\nconst{data:urlData}=supabase.storage.from('menu_images').getPublicUrl(data.path);// Актуализиране на формата с URL-а на изображението\nsetFormData({...formData,image_url:urlData.publicUrl});setIsUploading(false);}catch(error){console.error('Error uploading image:',error);alert('Възникна грешка при качване на изображението');setIsUploading(false);}};const handleSubmit=async e=>{e.preventDefault();try{const fullData={...formData,restaurant_id:restaurant.id,price:parseFloat(formData.price)};let result;if(editingId){const{data,error}=await supabase.from('menu_items').update(fullData).eq('id',editingId).select();if(error)throw error;result=data[0];// Актуализиране на локалния списък\nsetMenuItems(menuItems.map(item=>item.id===editingId?{...item,...result}:item));}else{const{data,error}=await supabase.from('menu_items').insert([fullData]).select();if(error)throw error;result=data[0];// Добавяне към локалния списък\nsetMenuItems([...menuItems,result]);}resetForm();setShowForm(false);}catch(error){console.error('Error saving menu item:',error);alert('Възникна грешка при запазване на продукта');}};const handleCategorySubmit=async e=>{e.preventDefault();try{const fullData={...categoryFormData,restaurant_id:restaurant.id};let result;if(editingCategoryId){const{data,error}=await supabase.from('menu_categories').update(fullData).eq('id',editingCategoryId).select();if(error)throw error;result=data[0];// Актуализиране на локалния списък\nsetCategories(categories.map(cat=>cat.id===editingCategoryId?{...cat,...result}:cat));}else{const{data,error}=await supabase.from('menu_categories').insert([fullData]).select();if(error)throw error;result=data[0];// Добавяне към локалния списък\nsetCategories([...categories,result]);}resetCategoryForm();setShowCategoryForm(false);}catch(error){console.error('Error saving category:',error);alert('Възникна грешка при запазване на категорията');}};const handleEdit=item=>{setFormData({name:item.name,description:item.description||'',price:item.price.toString(),category_id:item.category_id,is_available:item.is_available,image_url:item.image_url||'',allergens:item.allergens||'',recommended:item.recommended||false});setEditingId(item.id);setShowForm(true);};const handleEditCategory=category=>{setCategoryFormData({name:category.name,order:category.order});setEditingCategoryId(category.id);setShowCategoryForm(true);};const handleDelete=async id=>{if(!window.confirm(\"Сигурни ли сте, че искате да изтриете този продукт?\")){return;}try{const{error}=await supabase.from('menu_items').delete().eq('id',id);if(error)throw error;// Премахване от локалния списък\nsetMenuItems(menuItems.filter(item=>item.id!==id));}catch(error){console.error('Error deleting menu item:',error);alert('Възникна грешка при изтриване на продукта');}};const handleDeleteCategory=async id=>{// Проверка дали категорията се използва в продукти\nconst itemsInCategory=menuItems.filter(item=>item.category_id===id);if(itemsInCategory.length>0){alert(`Не можете да изтриете тази категория, защото има ${itemsInCategory.length} продукта в нея.`);return;}if(!window.confirm(\"Сигурни ли сте, че искате да изтриете тази категория?\")){return;}try{const{error}=await supabase.from('menu_categories').delete().eq('id',id);if(error)throw error;// Премахване от локалния списък\nsetCategories(categories.filter(cat=>cat.id!==id));// Ако текущо избраната категория е изтрита, връщаме се към \"всички\"\nif(selectedCategory===id){setSelectedCategory('all');}}catch(error){console.error('Error deleting category:',error);alert('Възникна грешка при изтриване на категорията');}};const handleCategoryChange=categoryId=>{setSelectedCategory(categoryId);};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0440\\u0435\\u0436\\u0434\\u0430\\u043D\\u0435 \\u043D\\u0430 \\u043C\\u0435\\u043D\\u044E...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\u041C\\u0435\\u043D\\u044E: \",restaurant===null||restaurant===void 0?void 0:restaurant.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-controls menu-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-filter-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0424\\u0438\\u043B\\u0442\\u0440\\u0438\\u0440\\u0430\\u043D\\u0435 \\u043F\\u043E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"category-filters\",children:[/*#__PURE__*/_jsx(\"button\",{className:`admin-filter-btn ${selectedCategory==='all'?'active':''}`,onClick:()=>handleCategoryChange('all'),children:\"\\u0412\\u0441\\u0438\\u0447\\u043A\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),categories.map(category=>/*#__PURE__*/_jsx(\"button\",{className:`admin-filter-btn ${selectedCategory===category.id?'active':''}`,onClick:()=>handleCategoryChange(category.id),children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-button-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-add-btn\",onClick:()=>{resetCategoryForm();setShowCategoryForm(!showCategoryForm);if(showForm)setShowForm(false);},children:showCategoryForm?'Отказ':'Добави категория'}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-add-btn\",onClick:()=>{resetForm();setShowForm(!showForm);if(showCategoryForm)setShowCategoryForm(false);},children:showForm?'Отказ':'Добави продукт'})]})]}),showCategoryForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingCategoryId?'Редактиране на категория':'Нова категория'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCategorySubmit,className:\"admin-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:categoryFormData.name,onChange:handleCategoryInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0420\\u0435\\u0434 \\u043D\\u0430 \\u043F\\u043E\\u043A\\u0430\\u0437\\u0432\\u0430\\u043D\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"order\",value:categoryFormData.order,onChange:handleCategoryInputChange,required:true,min:\"0\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"admin-cancel-btn\",onClick:()=>setShowCategoryForm(false),children:\"\\u041E\\u0442\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"admin-submit-btn\",children:editingCategoryId?'Запази промените':'Добави категория'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-categories-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),categories.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"admin-no-data\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438. \\u0414\\u043E\\u0431\\u0430\\u0432\\u0435\\u0442\\u0435 \\u043F\\u044A\\u0440\\u0432\\u0430\\u0442\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F.\"})}):/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0420\\u0435\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0411\\u0440\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.map(category=>{const itemCount=menuItems.filter(item=>item.category_id===category.id).length;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:category.name}),/*#__PURE__*/_jsx(\"td\",{children:category.order}),/*#__PURE__*/_jsx(\"td\",{children:itemCount}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-action-btn edit\",onClick:()=>handleEditCategory(category),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-action-btn delete\",onClick:()=>handleDeleteCategory(category.id),disabled:itemCount>0,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},category.id);})})]})]}),showForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"admin-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:editingId?'Редактиране на продукт':'Нов продукт'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"admin-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u0435 \\u043D\\u0430 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",value:formData.category_id,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0418\\u0437\\u0431\\u0435\\u0440\\u0435\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0426\\u0435\\u043D\\u0430 (\\u0432 \\u043B\\u0432.)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:formData.price,onChange:handleInputChange,required:true,min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleInputChange,placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043D\\u0430 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"}),formData.image_url?/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:formData.image_url,alt:\"\\u041F\\u0440\\u0435\\u0434\\u0432\\u0430\\u0440\\u0438\\u0442\\u0435\\u043B\\u0435\\u043D \\u043F\\u0440\\u0435\\u0433\\u043B\\u0435\\u0434\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setFormData({...formData,image_url:''}),className:\"remove-image-btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"}),\" \\u041F\\u0440\\u0435\\u043C\\u0430\\u0445\\u043D\\u0438\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"upload-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleFileChange,disabled:isUploading,ref:fileInputRef}),isUploading&&/*#__PURE__*/_jsxs(\"div\",{className:\"upload-progress\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",style:{width:`${uploadProgress}%`}}),/*#__PURE__*/_jsxs(\"span\",{children:[uploadProgress,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"upload-separator\",children:\"\\u0438\\u043B\\u0438\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"image_url\",value:formData.image_url,onChange:handleInputChange,placeholder:\"\\u0412\\u044A\\u0432\\u0435\\u0434\\u0435\\u0442\\u0435 URL \\u043D\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\",disabled:isUploading})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0410\\u043B\\u0435\\u0440\\u0433\\u0435\\u043D\\u0438\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"allergens\",value:formData.allergens,onChange:handleInputChange,placeholder:\"\\u041D\\u0430\\u043F\\u0440.: \\u0433\\u043B\\u0443\\u0442\\u0435\\u043D, \\u043C\\u043B\\u0435\\u0447\\u043D\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438, \\u044F\\u0434\\u043A\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"is_available\",checked:formData.is_available,onChange:handleInputChange}),\"\\u041D\\u0430\\u043B\\u0438\\u0447\\u0435\\u043D \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"recommended\",checked:formData.recommended,onChange:handleInputChange}),\"\\u041F\\u0440\\u0435\\u043F\\u043E\\u0440\\u044A\\u0447\\u0430\\u043D \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"admin-cancel-btn\",onClick:()=>setShowForm(false),children:\"\\u041E\\u0442\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"admin-submit-btn\",disabled:isUploading,children:editingId?'Запази промените':'Добави продукт'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-table-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 \\u0432 \\u043C\\u0435\\u043D\\u044E\\u0442\\u043E\"}),menuItems.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"admin-no-data\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u044F\\u043C\\u0430 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0435\\u043D\\u0438 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0438 \\u0432 \\u043C\\u0435\\u043D\\u044E\\u0442\\u043E.\"})}):/*#__PURE__*/_jsxs(\"table\",{className:\"admin-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041F\\u0440\\u0435\\u043F\\u043E\\u0440\\u044A\\u0447\\u0430\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:menuItems.map(item=>{var _item$menu_categories,_item$price;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.image_url?/*#__PURE__*/_jsx(\"img\",{src:item.image_url,alt:item.name,className:\"menu-item-thumbnail\"}):/*#__PURE__*/_jsx(\"div\",{className:\"menu-item-no-image\",children:\"\\u041D\\u044F\\u043C\\u0430 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:item.name}),item.description&&/*#__PURE__*/_jsx(\"p\",{className:\"menu-item-description\",children:item.description}),item.allergens&&/*#__PURE__*/_jsxs(\"p\",{className:\"menu-item-allergens\",children:[\"\\u0410\\u043B\\u0435\\u0440\\u0433\\u0435\\u043D\\u0438: \",item.allergens]})]}),/*#__PURE__*/_jsx(\"td\",{children:((_item$menu_categories=item.menu_categories)===null||_item$menu_categories===void 0?void 0:_item$menu_categories.name)||'Без категория'}),/*#__PURE__*/_jsxs(\"td\",{children:[(_item$price=item.price)===null||_item$price===void 0?void 0:_item$price.toFixed(2),\" \\u043B\\u0432.\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`status-badge ${item.is_available?'active':'inactive'}`,children:item.is_available?'Наличен':'Неналичен'})}),/*#__PURE__*/_jsx(\"td\",{children:item.recommended?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-star recommended-star\"}):'-'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"admin-action-btn edit\",onClick:()=>handleEdit(item),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-action-btn delete\",onClick:()=>handleDelete(item.id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},item.id);})})]})]})]});}export default AdminMenuSection;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","AdminMenuSection","_ref","restaurant","supabase","categories","setCategories","menuItems","setMenuItems","loading","setLoading","showForm","setShowForm","formData","setFormData","name","description","price","category_id","is_available","image_url","allergens","recommended","showCategoryForm","setShowCategoryForm","categoryFormData","setCategoryFormData","order","editingId","setEditingId","editingCategoryId","setEditingCategoryId","selectedCategory","setSelectedCategory","isUploading","setIsUploading","uploadProgress","setUploadProgress","fileInputRef","fetchMenuData","data","categoriesData","error","categoriesError","from","select","eq","id","ascending","query","menuData","menuError","console","handleInputChange","e","value","type","checked","target","parseFloat","handleCategoryInputChange","parseInt","resetForm","current","resetCategoryForm","length","Math","max","map","c","handleFileChange","file","files","includes","alert","size","fileExt","split","pop","fileName","Date","now","storage","upload","cacheControl","upsert","onUploadProgress","progress","round","loaded","total","urlData","getPublicUrl","path","publicUrl","handleSubmit","preventDefault","fullData","restaurant_id","result","update","item","insert","handleCategorySubmit","cat","handleEdit","toString","handleEditCategory","category","handleDelete","window","confirm","delete","filter","handleDeleteCategory","itemsInCategory","handleCategoryChange","categoryId","children","className","onClick","onSubmit","onChange","required","min","itemCount","disabled","step","placeholder","src","alt","accept","ref","style","width","_item$menu_categories","_item$price","menu_categories","toFixed"],"sources":["D:/Belezza/restaurant-chain-app/src/components/AdminMenuSection.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nfunction AdminMenuSection({ restaurant, supabase }) {\r\n  const [categories, setCategories] = useState([]);\r\n  const [menuItems, setMenuItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    category_id: '',\r\n    is_available: true,\r\n    image_url: '',\r\n    allergens: '',\r\n    recommended: false\r\n  });\r\n  const [showCategoryForm, setShowCategoryForm] = useState(false);\r\n  const [categoryFormData, setCategoryFormData] = useState({\r\n    name: '',\r\n    order: 0\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [editingCategoryId, setEditingCategoryId] = useState(null);\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const fileInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!restaurant) return;\r\n    fetchMenuData();\r\n  }, [restaurant, selectedCategory, supabase]);\r\n\r\n  const fetchMenuData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Зареждане на категории\r\n      const { data: categoriesData, error: categoriesError } = await supabase\r\n        .from('menu_categories')\r\n        .select('*')\r\n        .eq('restaurant_id', restaurant.id)\r\n        .order('order', { ascending: true });\r\n      \r\n      if (categoriesError) throw categoriesError;\r\n      setCategories(categoriesData || []);\r\n      \r\n      // Зареждане на продукти от менюто\r\n      let query = supabase\r\n        .from('menu_items')\r\n        .select(`\r\n          *,\r\n          menu_categories:category_id (id, name)\r\n        `)\r\n        .eq('restaurant_id', restaurant.id);\r\n      \r\n      if (selectedCategory !== 'all') {\r\n        query = query.eq('category_id', selectedCategory);\r\n      }\r\n      \r\n      const { data: menuData, error: menuError } = await query\r\n        .order('name', { ascending: true });\r\n      \r\n      if (menuError) throw menuError;\r\n      setMenuItems(menuData || []);\r\n    } catch (error) {\r\n      console.error('Error fetching menu data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: type === 'checkbox' ? checked : \r\n              type === 'number' ? parseFloat(value) : value\r\n    });\r\n  };\r\n\r\n  const handleCategoryInputChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setCategoryFormData({\r\n      ...categoryFormData,\r\n      [name]: type === 'checkbox' ? checked : \r\n              name === 'order' ? parseInt(value, 10) : value\r\n    });\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      description: '',\r\n      price: '',\r\n      category_id: '',\r\n      is_available: true,\r\n      image_url: '',\r\n      allergens: '',\r\n      recommended: false\r\n    });\r\n    setEditingId(null);\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const resetCategoryForm = () => {\r\n    setCategoryFormData({\r\n      name: '',\r\n      order: categories.length > 0 ? Math.max(...categories.map(c => c.order)) + 1 : 0\r\n    });\r\n    setEditingCategoryId(null);\r\n  };\r\n\r\n  const handleFileChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    \r\n    // Проверка на типа файл\r\n    if (!['image/jpeg', 'image/png', 'image/webp', 'image/gif'].includes(file.type)) {\r\n      alert('Моля, качете изображение (JPEG, PNG, WEBP, GIF)');\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // Проверка на размера (максимум 5MB)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      alert('Размерът на файла не може да надвишава 5MB');\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsUploading(true);\r\n      setUploadProgress(0);\r\n      \r\n      // Генериране на уникално име на файла\r\n      const fileExt = file.name.split('.').pop();\r\n      const fileName = `${restaurant.id}/menu/${Date.now()}.${fileExt}`;\r\n      \r\n      // Качване на файла в Supabase Storage\r\n      const { data, error } = await supabase.storage\r\n        .from('menu_images')\r\n        .upload(fileName, file, {\r\n          cacheControl: '3600',\r\n          upsert: false,\r\n          onUploadProgress: (progress) => {\r\n            setUploadProgress(Math.round((progress.loaded / progress.total) * 100));\r\n          }\r\n        });\r\n      \r\n      if (error) throw error;\r\n      \r\n      // Получаване на публичен URL на качения файл\r\n      const { data: urlData } = supabase.storage\r\n        .from('menu_images')\r\n        .getPublicUrl(data.path);\r\n      \r\n      // Актуализиране на формата с URL-а на изображението\r\n      setFormData({\r\n        ...formData,\r\n        image_url: urlData.publicUrl\r\n      });\r\n      \r\n      setIsUploading(false);\r\n    } catch (error) {\r\n      console.error('Error uploading image:', error);\r\n      alert('Възникна грешка при качване на изображението');\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const fullData = {\r\n        ...formData,\r\n        restaurant_id: restaurant.id,\r\n        price: parseFloat(formData.price)\r\n      };\r\n      \r\n      let result;\r\n      \r\n      if (editingId) {\r\n        const { data, error } = await supabase\r\n          .from('menu_items')\r\n          .update(fullData)\r\n          .eq('id', editingId)\r\n          .select();\r\n        \r\n        if (error) throw error;\r\n        result = data[0];\r\n        \r\n        // Актуализиране на локалния списък\r\n        setMenuItems(menuItems.map(item => \r\n          item.id === editingId ? { ...item, ...result } : item\r\n        ));\r\n      } else {\r\n        const { data, error } = await supabase\r\n          .from('menu_items')\r\n          .insert([fullData])\r\n          .select();\r\n        \r\n        if (error) throw error;\r\n        result = data[0];\r\n        \r\n        // Добавяне към локалния списък\r\n        setMenuItems([...menuItems, result]);\r\n      }\r\n      \r\n      resetForm();\r\n      setShowForm(false);\r\n    } catch (error) {\r\n      console.error('Error saving menu item:', error);\r\n      alert('Възникна грешка при запазване на продукта');\r\n    }\r\n  };\r\n\r\n  const handleCategorySubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      const fullData = {\r\n        ...categoryFormData,\r\n        restaurant_id: restaurant.id\r\n      };\r\n      \r\n      let result;\r\n      \r\n      if (editingCategoryId) {\r\n        const { data, error } = await supabase\r\n          .from('menu_categories')\r\n          .update(fullData)\r\n          .eq('id', editingCategoryId)\r\n          .select();\r\n        \r\n        if (error) throw error;\r\n        result = data[0];\r\n        \r\n        // Актуализиране на локалния списък\r\n        setCategories(categories.map(cat => \r\n          cat.id === editingCategoryId ? { ...cat, ...result } : cat\r\n        ));\r\n      } else {\r\n        const { data, error } = await supabase\r\n          .from('menu_categories')\r\n          .insert([fullData])\r\n          .select();\r\n        \r\n        if (error) throw error;\r\n        result = data[0];\r\n        \r\n        // Добавяне към локалния списък\r\n        setCategories([...categories, result]);\r\n      }\r\n      \r\n      resetCategoryForm();\r\n      setShowCategoryForm(false);\r\n    } catch (error) {\r\n      console.error('Error saving category:', error);\r\n      alert('Възникна грешка при запазване на категорията');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setFormData({\r\n      name: item.name,\r\n      description: item.description || '',\r\n      price: item.price.toString(),\r\n      category_id: item.category_id,\r\n      is_available: item.is_available,\r\n      image_url: item.image_url || '',\r\n      allergens: item.allergens || '',\r\n      recommended: item.recommended || false\r\n    });\r\n    setEditingId(item.id);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleEditCategory = (category) => {\r\n    setCategoryFormData({\r\n      name: category.name,\r\n      order: category.order\r\n    });\r\n    setEditingCategoryId(category.id);\r\n    setShowCategoryForm(true);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете този продукт?\")) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const { error } = await supabase\r\n        .from('menu_items')\r\n        .delete()\r\n        .eq('id', id);\r\n      \r\n      if (error) throw error;\r\n      \r\n      // Премахване от локалния списък\r\n      setMenuItems(menuItems.filter(item => item.id !== id));\r\n    } catch (error) {\r\n      console.error('Error deleting menu item:', error);\r\n      alert('Възникна грешка при изтриване на продукта');\r\n    }\r\n  };\r\n\r\n  const handleDeleteCategory = async (id) => {\r\n    // Проверка дали категорията се използва в продукти\r\n    const itemsInCategory = menuItems.filter(item => item.category_id === id);\r\n    \r\n    if (itemsInCategory.length > 0) {\r\n      alert(`Не можете да изтриете тази категория, защото има ${itemsInCategory.length} продукта в нея.`);\r\n      return;\r\n    }\r\n    \r\n    if (!window.confirm(\"Сигурни ли сте, че искате да изтриете тази категория?\")) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const { error } = await supabase\r\n        .from('menu_categories')\r\n        .delete()\r\n        .eq('id', id);\r\n      \r\n      if (error) throw error;\r\n      \r\n      // Премахване от локалния списък\r\n      setCategories(categories.filter(cat => cat.id !== id));\r\n      \r\n      // Ако текущо избраната категория е изтрита, връщаме се към \"всички\"\r\n      if (selectedCategory === id) {\r\n        setSelectedCategory('all');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting category:', error);\r\n      alert('Възникна грешка при изтриване на категорията');\r\n    }\r\n  };\r\n\r\n  const handleCategoryChange = (categoryId) => {\r\n    setSelectedCategory(categoryId);\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Зареждане на меню...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Меню: {restaurant?.name}</h1>\r\n      \r\n      <div className=\"admin-controls menu-controls\">\r\n        <div className=\"admin-filter-container\">\r\n          <h3>Филтриране по категория:</h3>\r\n          <div className=\"category-filters\">\r\n            <button \r\n              className={`admin-filter-btn ${selectedCategory === 'all' ? 'active' : ''}`} \r\n              onClick={() => handleCategoryChange('all')}\r\n            >\r\n              Всички категории\r\n            </button>\r\n            {categories.map(category => (\r\n              <button \r\n                key={category.id} \r\n                className={`admin-filter-btn ${selectedCategory === category.id ? 'active' : ''}`}\r\n                onClick={() => handleCategoryChange(category.id)}\r\n              >\r\n                {category.name}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"admin-button-group\">\r\n          <button \r\n            className=\"admin-add-btn\"\r\n            onClick={() => {\r\n              resetCategoryForm();\r\n              setShowCategoryForm(!showCategoryForm);\r\n              if (showForm) setShowForm(false);\r\n            }}\r\n          >\r\n            {showCategoryForm ? 'Отказ' : 'Добави категория'}\r\n          </button>\r\n          \r\n          <button \r\n            className=\"admin-add-btn\"\r\n            onClick={() => {\r\n              resetForm();\r\n              setShowForm(!showForm);\r\n              if (showCategoryForm) setShowCategoryForm(false);\r\n            }}\r\n          >\r\n            {showForm ? 'Отказ' : 'Добави продукт'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Форма за категории */}\r\n      {showCategoryForm && (\r\n        <div className=\"admin-form-container\">\r\n          <h2>{editingCategoryId ? 'Редактиране на категория' : 'Нова категория'}</h2>\r\n          <form onSubmit={handleCategorySubmit} className=\"admin-form\">\r\n            <div className=\"form-group\">\r\n              <label>Име на категория</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={categoryFormData.name} \r\n                onChange={handleCategoryInputChange} \r\n                required \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Ред на показване</label>\r\n              <input \r\n                type=\"number\" \r\n                name=\"order\" \r\n                value={categoryFormData.order} \r\n                onChange={handleCategoryInputChange} \r\n                required \r\n                min=\"0\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-buttons\">\r\n              <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowCategoryForm(false)}>\r\n                Отказ\r\n              </button>\r\n              <button type=\"submit\" className=\"admin-submit-btn\">\r\n                {editingCategoryId ? 'Запази промените' : 'Добави категория'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Управление на категории */}\r\n      <div className=\"admin-categories-section\">\r\n        <h2>Управление на категории</h2>\r\n        {categories.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма добавени категории. Добавете първата категория.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Име</th>\r\n                <th>Ред</th>\r\n                <th>Брой продукти</th>\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {categories.map(category => {\r\n                const itemCount = menuItems.filter(item => item.category_id === category.id).length;\r\n                return (\r\n                  <tr key={category.id}>\r\n                    <td>{category.name}</td>\r\n                    <td>{category.order}</td>\r\n                    <td>{itemCount}</td>\r\n                    <td>\r\n                      <button \r\n                        className=\"admin-action-btn edit\"\r\n                        onClick={() => handleEditCategory(category)}\r\n                      >\r\n                        <i className=\"fas fa-edit\"></i>\r\n                      </button>\r\n                      <button \r\n                        className=\"admin-action-btn delete\"\r\n                        onClick={() => handleDeleteCategory(category.id)}\r\n                        disabled={itemCount > 0}\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Форма за добавяне/редактиране на продукт */}\r\n      {showForm && (\r\n        <div className=\"admin-form-container\">\r\n          <h2>{editingId ? 'Редактиране на продукт' : 'Нов продукт'}</h2>\r\n          <form onSubmit={handleSubmit} className=\"admin-form\">\r\n            <div className=\"form-group\">\r\n              <label>Име на продукт</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"name\" \r\n                value={formData.name} \r\n                onChange={handleInputChange} \r\n                required \r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Категория</label>\r\n              <select \r\n                name=\"category_id\" \r\n                value={formData.category_id} \r\n                onChange={handleInputChange} \r\n                required\r\n              >\r\n                <option value=\"\">Изберете категория</option>\r\n                {categories.map(category => (\r\n                  <option key={category.id} value={category.id}>\r\n                    {category.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Цена (в лв.)</label>\r\n              <input \r\n                type=\"number\" \r\n                name=\"price\" \r\n                value={formData.price} \r\n                onChange={handleInputChange} \r\n                required \r\n                min=\"0\"\r\n                step=\"0.01\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Описание</label>\r\n              <textarea \r\n                name=\"description\" \r\n                value={formData.description} \r\n                onChange={handleInputChange} \r\n                placeholder=\"Описание на продукта\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Изображение</label>\r\n              {formData.image_url ? (\r\n                <div className=\"image-preview\">\r\n                  <img src={formData.image_url} alt=\"Предварителен преглед\" />\r\n                  <button \r\n                    type=\"button\" \r\n                    onClick={() => setFormData({...formData, image_url: ''})}\r\n                    className=\"remove-image-btn\"\r\n                  >\r\n                    <i className=\"fas fa-times\"></i> Премахни\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <div className=\"upload-container\">\r\n                  <input \r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleFileChange}\r\n                    disabled={isUploading}\r\n                    ref={fileInputRef}\r\n                  />\r\n                  {isUploading && (\r\n                    <div className=\"upload-progress\">\r\n                      <div \r\n                        className=\"progress-bar\" \r\n                        style={{ width: `${uploadProgress}%` }}\r\n                      ></div>\r\n                      <span>{uploadProgress}%</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"upload-separator\">или</div>\r\n                  <input \r\n                    type=\"url\" \r\n                    name=\"image_url\" \r\n                    value={formData.image_url} \r\n                    onChange={handleInputChange} \r\n                    placeholder=\"Въведете URL на изображение\"\r\n                    disabled={isUploading}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Алергени</label>\r\n              <input \r\n                type=\"text\" \r\n                name=\"allergens\" \r\n                value={formData.allergens} \r\n                onChange={handleInputChange} \r\n                placeholder=\"Напр.: глутен, млечни продукти, ядки\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input \r\n                  type=\"checkbox\" \r\n                  name=\"is_available\" \r\n                  checked={formData.is_available} \r\n                  onChange={handleInputChange} \r\n                />\r\n                Наличен продукт\r\n              </label>\r\n            </div>\r\n            \r\n            <div className=\"form-group checkbox-group\">\r\n              <label>\r\n                <input \r\n                  type=\"checkbox\" \r\n                  name=\"recommended\" \r\n                  checked={formData.recommended} \r\n                  onChange={handleInputChange} \r\n                />\r\n                Препоръчан продукт\r\n              </label>\r\n            </div>\r\n            \r\n            <div className=\"form-buttons\">\r\n              <button type=\"button\" className=\"admin-cancel-btn\" onClick={() => setShowForm(false)}>\r\n                Отказ\r\n              </button>\r\n              <button \r\n                type=\"submit\" \r\n                className=\"admin-submit-btn\"\r\n                disabled={isUploading}\r\n              >\r\n                {editingId ? 'Запази промените' : 'Добави продукт'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Списък с продукти */}\r\n      <div className=\"admin-table-container\">\r\n        <h2>Продукти в менюто</h2>\r\n        {menuItems.length === 0 ? (\r\n          <div className=\"admin-no-data\">\r\n            <p>Няма добавени продукти в менюто.</p>\r\n          </div>\r\n        ) : (\r\n          <table className=\"admin-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Изображение</th>\r\n                <th>Име</th>\r\n                <th>Категория</th>\r\n                <th>Цена</th>\r\n                <th>Статус</th>\r\n                <th>Препоръчан</th>\r\n                <th>Действия</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {menuItems.map(item => (\r\n                <tr key={item.id}>\r\n                  <td>\r\n                    {item.image_url ? (\r\n                      <img src={item.image_url} alt={item.name} className=\"menu-item-thumbnail\" />\r\n                    ) : (\r\n                      <div className=\"menu-item-no-image\">Няма изображение</div>\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <strong>{item.name}</strong>\r\n                    {item.description && <p className=\"menu-item-description\">{item.description}</p>}\r\n                    {item.allergens && <p className=\"menu-item-allergens\">Алергени: {item.allergens}</p>}\r\n                  </td>\r\n                  <td>{item.menu_categories?.name || 'Без категория'}</td>\r\n                  <td>{item.price?.toFixed(2)} лв.</td>\r\n                  <td>\r\n                    <span className={`status-badge ${item.is_available ? 'active' : 'inactive'}`}>\r\n                      {item.is_available ? 'Наличен' : 'Неналичен'}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {item.recommended ? <i className=\"fas fa-star recommended-star\"></i> : '-'}\r\n                  </td>\r\n                  <td>\r\n                    <button \r\n                      className=\"admin-action-btn edit\"\r\n                      onClick={() => handleEdit(item)}\r\n                    >\r\n                      <i className=\"fas fa-edit\"></i>\r\n                    </button>\r\n                    <button \r\n                      className=\"admin-action-btn delete\"\r\n                      onClick={() => handleDelete(item.id)}\r\n                    >\r\n                      <i className=\"fas fa-trash\"></i>\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminMenuSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}